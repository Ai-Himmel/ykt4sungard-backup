<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
	<bean id="monitorWorktimeRangeDAO" class="org.king.topo.dao.hibernate.MonitorWorktimeRangeDAOHibernate">
		<property name="baseDAO">
			<ref bean="baseDAO" />
		</property>
	</bean>
	<bean id="monitorTopoLocationDAO" class="org.king.topo.dao.hibernate.MonitorTopoLocationDAOHibernate">
		<property name="baseDAO">
			<ref bean="baseDAO" />
		</property>
	</bean>
	<bean id="monitorTopoGroupDAO" class="org.king.topo.dao.hibernate.MonitorTopoGroupDAOHibernate">
		<property name="baseDAO">
			<ref bean="baseDAO" />
		</property>
	</bean>
	<bean id="monitorTopoDeviceGroupDAO" class="org.king.topo.dao.hibernate.MonitorTopoDeviceGroupDAOHibernate">
		<property name="baseDAO">
			<ref bean="baseDAO" />
		</property>
	</bean>
	<bean id="monitorTopoDeviceDicDAO" class="org.king.topo.dao.hibernate.MonitorTopoDeviceDicDAOHibernate">
		<property name="baseDAO">
			<ref bean="baseDAO" />
		</property>
	</bean>
	<bean id="monitorTopoDevgroupInfoDAO" class="org.king.topo.dao.hibernate.MonitorTopoDevgroupInfoDAOHibernate">
		<property name="baseDAO">
			<ref bean="baseDAO" />
		</property>
	</bean>
	<bean id="monitorParameterDAO" class="org.king.topo.dao.hibernate.MonitorParameterDAOHibernate">
		<property name="baseDAO">
			<ref bean="baseDAO" />
		</property>
	</bean>
	<bean id="monitorDevWorktimeDAO" class="org.king.topo.dao.hibernate.MonitorDevWorktimeDAOHibernate">
		<property name="baseDAO">
			<ref bean="baseDAO" />
		</property>
	</bean>
	    <bean id="monitorTopoGroupInfoDAO" class="org.king.topo.dao.hibernate.MonitorTopoGroupInfoDAOHibernate">
    	<property name="baseDAO">
			<ref bean="baseDAO" />
		</property>
    </bean>
    <bean id="monitorTopoGroupStatisticDAO"
    	class="org.king.topo.dao.hibernate.MonitorTopoGroupStatisticDAOHibernate">
    	<property name="baseDAO">
			<ref bean="baseDAO" />
		</property>
    </bean>
     <bean id="monitorTopoServerStatisticDAO"
    	class="org.king.topo.dao.hibernate.MonitorTopoServerStatisticDAOHibernate">
    	<property name="baseDAO">
			<ref bean="baseDAO" />
		</property>
    </bean>
    <bean id="topoCalculatorService" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="transactionManager"/>
		</property>
		<property name="target">
			<bean class="org.king.topo.service.impl.TopoCalculatorServiceImpl">
				<property name="monitorTopoDevgroupInfoDAO">
					<ref local="monitorTopoDevgroupInfoDAO"/>
				</property>
				<property name="monitorTopoDeviceDicDAO">
					<ref bean="monitorTopoDeviceDicDAO"/>
				</property>
				<property name="monitorTopoDeviceGroupDAO">
					<ref bean="monitorTopoDeviceGroupDAO"/>
				</property>
                <property name="monitorTopoLocationDAO">
                    <ref local="monitorTopoLocationDAO"/>
                </property>
                <property name="monitorTopoGroupDAO">
                    <ref local="monitorTopoGroupDAO"/>
                </property>
                <property name="monitorTopoGroupInfoDAO">
                    <ref local="monitorTopoGroupInfoDAO"/>
                </property>
                <property name="monitorTopoGroupStatisticDAO">
                    <ref local="monitorTopoGroupStatisticDAO"/>
                </property>
                 <property name="monitorTopoServerStatisticDAO">
                    <ref local="monitorTopoServerStatisticDAO"/>
                </property>
                <property name="monitorHostDAO">
                	<ref bean="monitorHostDAO" />
                </property>
                <property name="monitorServiceDAO">
                	<ref bean="monitorServiceDAO" />
                </property>
			</bean>
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="calculate*">PROPAGATION_REQUIRED</prop>
				<prop key="save*">PROPAGATION_REQUIRED</prop>
				<prop key="update*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>
	<bean id="monitorTopoService" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="transactionManager"/>
		</property>
		<property name="target">
			<bean class="org.king.topo.service.impl.MonitorTopoServiceImpl">
                <property name="monitorTopoLocationDAO">
                    <ref local="monitorTopoLocationDAO"/>
                </property>
                <property name="monitorTopoGroupDAO">
                    <ref local="monitorTopoGroupDAO"/>
                </property>
                <property name="monitorTopoDeviceGroupDAO">
                    <ref local="monitorTopoDeviceGroupDAO" />
                </property>
                <property name="topoCalculatorService">
                    <ref local="topoCalculatorService"/>
                </property>
			</bean>
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="calculate*">PROPAGATION_REQUIRED</prop>
				<prop key="save*">PROPAGATION_REQUIRED</prop>
				<prop key="update*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>
    </beans>