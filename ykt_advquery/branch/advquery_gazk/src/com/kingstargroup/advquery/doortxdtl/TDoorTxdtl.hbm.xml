<?xml version="1.0" encoding='UTF-8'?>
<!DOCTYPE hibernate-mapping PUBLIC
                            "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
                            "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >

<!-- DO NOT EDIT: This is a generated file that is synchronized -->
<!-- by MyEclipse Hibernate tool integration.                   -->
<!-- Created Wed Oct 19 14:09:12 CST 2005                         -->
<hibernate-mapping package="com.kingstargroup.advquery.doortxdtl">

    <class name="TDoorTxdtl" table="T_DOOR_TXDTL">
        <composite-id name="id" class="TDoorTxdtlKey">
            <key-property name="deviceId" column="DEVICE_ID" type="string"/>
            <key-property name="serialNo" column="SERIAL_NO" type="integer"/>
            <key-property name="txDate" column="TX_DATE" type="string"/>
        </composite-id>
 
        <property name="txTime" column="TX_TIME" type="string" />
        <property name="modeCode" column="MODE_CODE" type="integer" />
        <property name="cardNo" column="CARD_NO" type="integer" />
        <property name="showCardNo" column="SHOW_CARD_NO" type="string" />
        <property name="useType" column="USE_TYPE" type="integer" />
        <property name="inductorNo" column="INDUCTOR_NO" type="integer" />
        <property name="workMark" column="WORK_MARK" type="integer" />
        <property name="txMark" column="TX_MARK" type="integer" />
        <property name="crc" column="CRC" type="string" />
        <property name="sysId" column="SYS_ID" type="integer" />
        <property name="colDate" column="COL_DATE" type="string" />
        <property name="colTime" column="COL_TIME" type="string" />
        <property name="status" column="STATUS" type="string" />
        <property name="errCode" column="ERR_CODE" type="integer" />
        <property name="cutId" column="CUT_ID" type="integer" />
        <property name="stdempNo" column="STDEMP_NO" type="string" />
        <property name="cutName" column="CUT_NAME" type="string" />
       
    </class>
    
    <sql-query name="oneDoorDetail">
   <return-scalar type="string" column="DEVICE_ID"/>
   <return-scalar type="string" column="DEVICE_NAME"/>
   <return-scalar type="string" column="TX_DATE"/>
   <return-scalar type="string" column="TX_TIME"/>
   <return-scalar type="string" column="CUST_ID"/>
   <return-scalar type="string" column="TX_MARK"/>
    select DEVICE_ID, DEVICE_NAME,TX_DATE, TX_TIME, CUST_ID , TX_MARK from(
			select dev.DEVICE_ID, dev.DEVICE_NAME,door.TX_DATE, door.TX_TIME, door.CUST_ID, door.TX_MARK
			from YKT_CUR.T_DOOR_TXDTL door,YKT_CUR.T_PIF_DEVICE dev 
			where door.device_id=dev.device_id and tx_date>=:startDate and not(tx_date>:endDate) and CUST_ID =:custId
			union all
			select dev.DEVICE_ID, dev.DEVICE_NAME,door.TX_DATE, door.TX_TIME, door.CUST_ID, door.TX_MARK
			from YKT_HIS.t_door_txdtl_his door,YKT_CUR.T_PIF_DEVICE dev 
			where door.device_id=dev.device_id and tx_date>=:startDate and not(tx_date>:endDate) and CUST_ID =:custId) t
			order by tx_date desc ,tx_time  desc 
	 </sql-query>		
	 
</hibernate-mapping>
