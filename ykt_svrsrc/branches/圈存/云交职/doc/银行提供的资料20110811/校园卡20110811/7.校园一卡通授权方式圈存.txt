7.校园一卡通授权方式圈存
|接收远程客户:132.147.252.81:60001连接
|开始一个新过程.
|tmpbuf=[0351]
[216]head=                           |
=========================Binary buffer content len[0]====================
110810:190746:682|D2|  COnceServer.cc[217]body=                           |
=========================Binary buffer content len[351]====================
000000 2e 01 30 33 35 31 39 39 - 39 39 30 30 30 31 20 20   ..035199990001  
000010 20 30 30 30 31 30 30 30 - 30 20 20 20 30 30 30 30    00010000   0000
000020 30 30 30 30 30 30 30 30 - 30 30 30 30 30 30 30 32   0000000000000002
000030 30 30 f2 3a 44 81 88 e1 - 90 10 00 00 00 00 16 00   00.:D...........
000040 00 01 31 36 36 32 32 33 - 36 39 30 39 39 34 38 33   ..16622369099483
000050 35 34 35 38 34 30 30 30 - 30 30 30 30 30 30 30 30   5458400000000000
000060 30 30 31 30 30 30 30 38 - 31 30 31 38 35 32 34 30   0010000810185240
000070 30 30 30 36 31 39 31 38 - 35 32 34 30 30 38 31 30   0006191852400810
000080 30 38 31 30 38 32 32 30 - 30 31 31 30 30 31 30 30   0810822001100100
000090 31 39 39 39 39 39 39 39 - 39 30 38 39 39 39 39 30   1999999990899990
0000a0 30 30 31 30 30 30 30 30 - 30 30 30 30 36 31 39 30   0010000000006190
0000b0 30 30 30 30 30 30 31 38 - 32 32 30 31 31 33 39 31   0000001822011391
0000c0 30 30 30 39 32 33 cb bc - c3 a9 ca a6 d7 a8 20 20   000923........  
0000d0 20 20 20 20 20 20 20 20 - 20 20 20 20 20 20 20 20                   
0000e0 20 20 20 20 20 20 20 20 - 20 20 20 20 20 20 30 32                 02
0000f0 34 44 46 31 48 31 4c 38 - 48 38 35 42 4d 31 32 34   4DF1H1L8H85BM124
000100 48 31 43 30 42 43 30 49 - 31 31 35 36 31 47 30 47   H1C0BC0I11561G0G
000110 46 38 30 41 30 31 32 30 - 30 30 30 30 35 30 30 30   F80A012000005000
000120 31 30 30 31 30 30 31 39 - 39 39 39 39 39 39 39 31   1001001999999991
000130 38 32 33 30 31 30 33 31 - 39 36 39 30 31 30 32 30   8230103196901020
000140 33 33 38 31 38 32 33 30 - 31 30 33 31 39 36 39 30   3381823010319690
000150 31 30 32 30 33 33 38 37 - 32 45 43 36 39 42 43      102033872EC69BC
|                             收到8583数据包        
|		      报文头:---[Message Head]---
|Head.HeadLength               =[46]
|Head.HeadFlag                 =[1]
|Head.TotalLength              =[0351]
|Head.DestinationId            =[99990001   ]
|Head.SourceId                 =[00010000   ]
|Head.Reserved                 =[000]
|Head.Batchnumber              =[812341285]
|Head.TxnInfo                  =[00000000]
|Head.RejectCode               =[00000]
|		      报文体:---[Message Body]---
MTI                           =[0200]
主帐号02                      =[6223690994835458]
交易处理码03                  =[400000]
交易金额04                    =[000000001000]
交易传输时间07                =[0810185240]
系统跟踪号11                  =[000619]
受卡方所在地时间12            =[185240]
受卡方所在地日期13            =[0810]
清算日期15                    =[0810]
商户类型18                    =[8220]
服务点输入方式码22            =[011]
服务点条件码25                =[00]
代理机构标识码32              =[0199999999]
发送机构标识码33              =[99990001]
检索参考号37                  =[000000000619]
受卡机终端标识码41            =[00000001]
受卡方标识码42                =[822011391000923]
受卡方名称地址43              =[思茅师专                                ]
附加数据---私有48             =[DF1H1L8H85BM124H1C0BC0I1]
交易货币代码49                =[156]
自定义域60                    =[000005000100]
接收机构标识码100             =[0199999999]
帐户标识1                     =[230103196901020338]
帐户标识2                     =[230103196901020338]
|	   END--------------解包结束--------------END
|成功接收报文

处理完毕，应答报文：
|通过socket[11]发送数据.
|                             往对方送数据包          
|		BEGIN---------------------------------BEGIN
|		      报文体:---[Message Body]---
MTI                           =[0210]
主帐号02                      =[6223690994835458]
交易处理码03                  =[400000]
交易金额04                    =[000000001000]
交易传输时间07                =[0810185240]
系统跟踪号11                  =[000619]
受卡方所在地时间12            =[185240]
受卡方所在地日期13            =[0810]
商户类型18                    =[8220]
服务点输入方式码22            =[011]
服务点条件码25                =[00]
代理机构标识码32              =[99990001]
发送机构标识码33              =[99990000]
检索参考号37                  =[000000000619]
应答码39                      =[00]
受卡机终端标识码41            =[00000001]
受卡方标识码42                =[822011391000923]
受卡方名称地址43              =[思茅师专                                ]
附加数据---私有48             =[737F96172A3BEBB6EBEC83D7552B2760]
交易货币代码49                =[156]
自定义域60                    =[000005000100]
接收机构标识码100             =[0199999999]
帐户标识1                     =[230103196901020338]
帐户标识2                     =[230103196901020338]
|回应报文,获取8583报文头
|		      报文头:---[Message Head]---
|Head.HeadLength               =[46]
|Head.HeadFlag                 =[1]
|Head.TotalLength              =[0347]
|Head.DestinationId            =[00010000   ]
|Head.SourceId                 =[99990001   ]
|Head.Reserved                 =[000]
|Head.Batchnumber              =[812344505]
|Head.TxnInfo                  =[00000000]
|Head.RejectCode               =[00000]
向对方发送数据                  |
=========================Binary buffer content len[351]====================
000000 30 33 34 37 2e 01 30 33 - 34 37 30 30 30 31 30 30   0347..0347000100
000010 30 30 20 20 20 39 39 39 - 39 30 30 30 31 20 20 20   00   99990001   
000020 30 30 30 30 30 30 30 30 - 30 30 30 30 30 30 30 30   0000000000000000
000030 30 30 30 32 31 30 f2 38 - 44 81 8a e1 80 10 00 00   000210.8D.......
000040 00 00 16 00 00 01 31 36 - 36 32 32 33 36 39 30 39   ......1662236909
000050 39 34 38 33 35 34 35 38 - 34 30 30 30 30 30 30 30   9483545840000000
000060 30 30 30 30 30 30 31 30 - 30 30 30 38 31 30 31 38   0000001000081018
000070 35 32 34 30 30 30 30 36 - 31 39 31 38 35 32 34 30   5240000619185240
000080 30 38 31 30 38 32 32 30 - 30 31 31 30 30 30 38 39   0810822001100089
000090 39 39 39 30 30 30 31 30 - 38 39 39 39 39 30 30 30   9990001089999000
0000a0 30 30 30 30 30 30 30 30 - 30 30 36 31 39 30 30 30   0000000000619000
0000b0 30 30 30 30 30 30 31 38 - 32 32 30 31 31 33 39 31   0000001822011391
0000c0 30 30 30 39 32 33 cb bc - c3 a9 ca a6 d7 a8 20 20   000923........  
0000d0 20 20 20 20 20 20 20 20 - 20 20 20 20 20 20 20 20                   
0000e0 20 20 20 20 20 20 20 20 - 20 20 20 20 20 20 30 33                 03
0000f0 32 37 33 37 46 39 36 31 - 37 32 41 33 42 45 42 42   2737F96172A3BEBB
000100 36 45 42 45 43 38 33 44 - 37 35 35 32 42 32 37 36   6EBEC83D7552B276
000110 30 31 35 36 30 31 32 30 - 30 30 30 30 35 30 30 30   0156012000005000
000120 31 30 30 31 30 30 31 39 - 39 39 39 39 39 39 39 31   1001001999999991
000130 38 32 33 30 31 30 33 31 - 39 36 39 30 31 30 32 30   8230103196901020
000140 33 33 38 31 38 32 33 30 - 31 30 33 31 39 36 39 30   3381823010319690
000150 31 30 32 30 33 33 38 37 - 39 32 45 45 38 35 32      1020338792EE852
###################################################################################################
###################################################################################################