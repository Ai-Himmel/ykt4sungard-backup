/************************************************************************
*	System		: POPLAR_B/POPLAR_L/ANZU_L
*	File Name	: OPR_SERV.C
*	Author		: ìnï”àÍèÕ
*	Date		: 1996/10/21
*	RealTimeOS	: ÇqÇhÇrÇbÅiÇrÇgÇVÇOÇSÇRÅjÉÇÉjÉ^Å[
*	Description	: ÉTÅ[ÉrÉXÉtÉ@ÉìÉNÉVÉáÉì
*	Maintenance	:
*
*	Copyright (C) 1996 Murata Machinery,Ltd. All rights reserved.
*************************************************************************/
#include	"\src\atlanta\define\product.h"
#include	"\src\atlanta\define\apl_msg.h"
#include	"\src\atlanta\define\keycode.h"
#include	"\src\atlanta\define\mntsw_a.h"
#include	"\src\atlanta\define\param.h"
#include	"\src\atlanta\define\status.h"
#include	"\src\atlanta\define\std.h"
#include	"\src\atlanta\define\sys_stat.h"
#include	"\src\atlanta\define\syslifem.h"
#include	"\src\atlanta\define\syslocal.h"
#include	"\src\atlanta\define\sysrxsw.h"
#include	"\src\atlanta\define\syst30.h"
#include	"\src\atlanta\opr\ank\define\opr_def.h"
#include	"\src\memsw\define\mem_sw_b.h"
#include	"\src\memsw\define\mem_sw_h.h"

#include	"\src\atlanta\define\cmn_pro.h"
/*#include	"\src\atlanta\define\idp_pro.h"	/* à⁄êAÇ‹Çæ */
#include	"\src\atlanta\define\lst_pro.h"
#include	"\src\atlanta\define\man_pro.h"		/* by K.Watanabe 1998/08/21 */
#include	"\src\atlanta\define\mem_pro.h"
#include	"\src\atlanta\define\mon_pro.h"
#include	"\src\atlanta\define\stng_pro.h"
#if (PRO_MULTI_T30_MONITOR == ENABLE) /* By H.Fujimura 1999/04/09 */
#include	"\src\atlanta\define\uni_pro.h"
#endif
#include	"\src\atlanta\opr\ank\define\opr_pro.h"
#include	"\src\memsw\define\mems_pro.h"

#include	"\src\atlanta\ext_v\bkupram.h"
#include	"\src\atlanta\ext_v\cpu_tbl.h"

#if (PRO_MODEM == ORANGE3) /* By H.Fujimura 1999/01/06 */
#include	"\src\atlanta\mdm\orange\define\mdm_def.h"
#include	"\src\atlanta\mdm\orange\define\mdm_pro.h"
#endif
#if (PRO_MODEM == R288F) /* By H.Fujimura 1999/01/06 */
	#if (PRO_MODEM_R288F_VERSION == FM336_VERSION_12P)
		#include "\src\atlanta\mdm\fm336\define\mdm_def.h"
#if !defined (KEISATSU) /* åxé@FAX 05/06/24 êŒã¥ê≥òa */
		#include "\src\atlanta\mdm\fm336\define\mdm_bps.h"
#endif
		#include "\src\atlanta\mdm\fm336\define\mdm_pro.h"
		#include "\src\atlanta\mdm\fm336\define\mdm_io.h"
		#include "\src\atlanta\mdm\fm336\ext_v\mdm_data.h"
	#else
		#include "\src\atlanta\mdm\r288f\define\mdm_def.h"
		#include "\src\atlanta\mdm\r288f\define\mdm_bps.h"
		#include "\src\atlanta\mdm\r288f\define\mdm_pro.h"
		#include "\src\atlanta\mdm\r288f\define\mdm_io.h"
		#include "\src\atlanta\mdm\r288f\ext_v\mdm_data.h"
	#endif
#endif
#if (PRO_MODEM == MN195006)
#include	"\src\atlanta\mdm\pana\define\mdm_def.h"
#include	"\src\atlanta\mdm\pana\define\mdm_bps.h"
#include	"\src\atlanta\mdm\pana\define\mdm_pro.h"
#include	"\src\atlanta\mdm\pana\define\mdm_io.h"
#include	"\src\atlanta\mdm\pana\ext_v\mdm_data.h"
#endif
#include	"\src\atlanta\ext_v\fcm_data.h"
#if (PRO_MULTI_T30_MONITOR == ENABLE) /* By H.Fujimura 1999/04/09 */
#include	"\src\atlanta\ext_v\lst_data.h"
#endif
#include	"\src\atlanta\ext_v\man_data.h"		/* by K.Watanabe 1998/08/21 */
#include	"\src\atlanta\ext_v\mem_data.h"
#include	"\src\atlanta\ext_v\rom_tbl.h"
#include	"\src\atlanta\ext_v\sys_data.h"
#include	"\src\atlanta\ext_v\sys_port.h"
#include	"\src\atlanta\opr\ank\ext_v\opr_data.h"
#include	"\src\atlanta\opr\ank\ext_v\opr_tbl.h"
#include	"\src\atlanta\opr\ank\ext_v\opr_wrd0.h"
#if (PRO_IMAGE_PROCESSOR ==	IMAGE_PROCESSOR_LC82103)
 #if defined(SATSUKI2) /* SMuratec H.C.H 2003.07.11 */
#include	"\src\atlanta\satsuki2\define\scn_pro.h"
 #elif defined(STOCKHM2)
#include	"\src\atlanta\stockhm2\define\scn_pro.h"
 #else
#include	"\src\atlanta\hinoki\define\scn_pro.h"
 #endif
#include	"\src\atlanta\define\mntsw_c.h"
#endif
#if (PRO_CPU == SH7043)
#include	"\src\atlanta\sh7043\define\def_tib.h"
#include	"\src\atlanta\sh7043\define\io_pro.h"
#include	"\src\atlanta\sh7043\define\sh_sys.h"
#include	"\src\atlanta\sh7043\ext_v\extv_mbx.h"
#endif

#if (PRO_CLASS1 == ENABLE)
#include	"\src\atlanta\define\cl1_def.h"
#include	"\src\atlanta\define\scn_def.h"
#include	"\src\atlanta\define\scn_pro.h"
#endif

#if (PRO_PRINT_TYPE == LED)
#include	"\src\atlanta\prt\ph3\define\prn_pro.h"
#include	"\src\atlanta\prt\ph3\ext_v\prn_data.h"
#else
 #if (PRO_PRINT_TYPE != THERMAL) /* By H.Fujimura 1999/01/06 */
#include	"\src\atlanta\prt\sp322\ext_v\prn_data.h"
/*#include	"\src\atlanta\prt\sp322\ext_v\prn_tbl.h"*/
 #endif
#endif

#if (PRO_MULTI_LINE == ENABLE)
#include	"\src\atlanta\define\sys_opt.h"
#include	"\src\atlanta\define\man_pro.h"
#include	"\src\atlanta\define\mlt_pro.h"
#include	"\src\atlanta\define\uni_pro.h"
#include 	"\src\atlanta\define\unisw_a.h"
#include	"\src\atlanta\ext_v\mlt_data.h"
#endif
#include	"\src\atlanta\ext_v\cmn_data.h"

#if (PRO_DIALUP_INTERNET_FAX == ENABLE) /* 1998/08/20 */
#include "\src\atlanta\define\inf_def.h"
#include "\src\atlanta\ext_v\inf_data.h"
#endif

#if (PRO_NEW_JATE == ENABLE)	/* 1998/10/06 H.Yoshikawa *//* Add By O.Kimoto 1999/03/01 */
#include "\src\atlanta\ext_v\cmn_tbl.h"
#endif

#if defined(SATSUKI2)  /* ëºÇÃã@éÌÇ∆ÇÃã§ópÉ\Å[ÉXÇ»ÇÃÇ≈SATSUKI2Ç≈êÿÇËÇ‹Ç∑ÅBO.Oshima 2003/11/07 */
/*	Added by SMuratec K.W.Q	2003/09/26	*/

#include "\src\atlanta\define\std.h"
#include "\src\atlanta\define\mon_pro.h"
#include "\src\atlanta\define\message.h"
#include "\src\atlanta\define\sysdoc.h"
#include "\src\atlanta\define\mon_pro.h"
#include "\src\atlanta\define\apl_msg.h"
#include "\src\atlanta\define\scn_def.h"
#include "\src\atlanta\ext_v\scn_data.h"
#include "\src\atlanta\ext_v\sys_data.h"
#include "\src\atlanta\satsuki2\define\scn_pro.h"
#include "\src\atlanta\satsuki2\ext_v\scn_data.h"
#include "\src\atlanta\satsuki2\ext_v\scn_dath.h"
#include	"\src\atlanta\satsuki2\define\scn_def.h"
#include	"\src\atlanta\satsuki2\ext_v\scn_tbl.h"
#include "\src\cpu\sh7043_a\irom\ext_v\extv_mbx.h"

#include "\src\cpu\sh7043_a\irom\define\def_evtn.h"

#endif

#if (0) /* ïœçX by SMuratec K.W.Q 2003/10/22 */
#define SAMPLE_LINE_COUNT	10
#endif

#if defined(STOCKHM2)
#include "\src\atlanta\define\std.h"
#include "\src\atlanta\define\mon_pro.h"
#include "\src\atlanta\define\message.h"
#include "\src\atlanta\define\sysdoc.h"
#include "\src\atlanta\define\mon_pro.h"
#include "\src\atlanta\define\apl_msg.h"
#include "\src\atlanta\define\scn_def.h"
#include "\src\atlanta\ext_v\scn_data.h"
#include "\src\atlanta\ext_v\sys_data.h"
#include "\src\atlanta\stockhm2\define\scn_pro.h"
#include "\src\atlanta\stockhm2\ext_v\scn_data.h"
#include "\src\atlanta\stockhm2\ext_v\scn_dath.h"
#include "\src\atlanta\stockhm2\define\scn_def.h"
#include "\src\atlanta\stockhm2\ext_v\scn_tbl.h"
#include "\src\cpu\sh7043_a\irom\ext_v\extv_mbx.h"
#include "\src\cpu\sh7043_a\irom\define\def_evtn.h"

#endif

#if (PRO_RTC_RX5C338A == ENABLE)
#include	"\src\atlanta\define\rtc_def.h"
#endif

#if (PRO_DISASTER_PREVENTION_FAX == ENABLE)				/* ñhç–FAXëŒâû by Y.Kano 2005/03/04 	*/
#include 	"\src\atlanta\ext_v\fcm_tbl.h"
#include 	"\src\atlanta\define\unisw_i.h"
#include 	"\src\atlanta\define\unisw_a.h"
#include 	"\src\atlanta\define\unisw_b.h"
#include 	"\src\atlanta\define\unisw_c.h"
#include 	"\src\atlanta\define\unisw_d.h"
#include	"\src\memsw\define\mem_sw_d.h"
#include 	"\src\atlanta\ext_v\ini_tbl.h"
#endif

/* Prototype
void	MachineParameterMode(void);			/ *0 /
void	MemorySwitchMode(void);				/ *1 /
UBYTE	SelectSetClearMode(void);
void	SetSoftSwitch(void);
UBYTE	SelectSoftSwitch(void);
void	DisplaySoftSwitchSelect(void);
void	ClearSoftSwitch(UBYTE);
UBYTE	SoftDipInput(void);
void	SoftDipInputInitial(void);
void	ClearBackUpFile(void);				/ *2 /
void	ClearAllBackUpFile(void);			/ *3 /
void	UniqSwitchMode(void);				/ *4 /
void	T30MonitorPrintOperation(void);		/ *5 /
#if (PRO_PRINT_TYPE == LED)	@@ 1997/07/10 Y.Matsukuma @@
void	PrintMaintenance(void);				/ *6(ŒﬂÃﬂ◊) /
void	ReplaceCountSetOperation(void);
void	ServiceCallOperation(void);
void	SearchServiceCallRight(UBYTE *);
void	SearchServiceCallLeft(UBYTE *);
#endif
void	FunctionListPrintOperation(void);	/ *8 /
void	ServiceFunctionSetting(void);		/ *9 /
void	SF_InnerStatusOperation(void);		/ *9-1 /
void	SF_LifeMonitorClear(void);			/ *9-2, *H /
void	SF_TestPatternOperation(void);		/ *9-3 /
void	DisplayPatternPrint(UBYTE, UBYTE);
void	SF_StampTest(void);					/ *9-4 /
void	SF_DocumentFeedOutTest(void);		/ *9-5 /
void	SF_ShadingOperation(void);			/ *9-6 /
void	PrintMemorySwList(void);			/ *A /
void	FactoryFunctionMode(void);			/ *B /
void	PrintFactoryFunctionList(void);		/ *B-1 /
void	SF_All_LED_Test(void);				/ *B-2 /
void	SF_LED_Test(void);					/ *B-2 /
void	SF_LCD_Test(void);					/ *B-3 /
void	SF_PanelKeyTest(void);				/ *B-4 /
void	SF_RTCTestFunction(void);			/ *B-7 /
void	SF_RS232CTestFunction(void);		/ *B-8 /
#if (0)	@@ É`ÉFÉbÉJÅ[ÇÃÇ› 97/09/10 By M.Kuwahara @@
void	SF_CassetteCheck(void);				/ *B-9 /
void	DisplayCassetteCheck(UBYTE);
#endif
void	LineFunctionMode(void);				/ *C /
void	SF_RelayTest(void);					/ *C-1 /
void	DisplayRelayTest(void);
void	SF_TonalTest(void);					/ *C-2 /
UBYTE	TxSignalType(UBYTE);
UBYTE	TxSignalFreq(UBYTE, UBYTE);
void	FskPixStop(void);
void	DisplayTonalTest(UBYTE, UBYTE, UBYTE);
void	SF_DTMF_Test(void);					/ *C-3 /
void	DisplayTxDTMF(UBYTE);
UBYTE	DTMF_TypeGet(UBYTE);
void	ConnectLine(void);
void	DisconnectLine(void);
void	InvalidServiceFunction(void);
void	TeachingRingPattern(void);			/ *D(USA) /
#if (PRO_RING_MASTER == ENABLE)
void	DisplayTeachingPattern(UBYTE);
#endif
void	SetMirrorCarrigeTransMode(void);	/ *E(ŒﬂÃﬂ◊B) /
void	ConsumptionArticleOrderFunc(void);	/ *F(ŒﬂÃﬂ◊) /
UBYTE	EnterConsumerOrder(void);
UBYTE	ToCustomerCodeInput(void);
UBYTE	ToCompanyNameInput(void);
UBYTE	FromCustomerCodeInput(void);
UBYTE	FromCompanyNameInput(void);
UBYTE	FromSectionNameInput(void);
UBYTE	FromSectionName2Input(void);    addedbythonda1998/05/22
UBYTE	FromCustomerTelNumberInput(void);
UBYTE	SerialNumberInput(void);
#if(0)	/@ ÇqÇnÇlóeó çÌå∏ÇÃà◊ by K.Watanabe 1998/04/24 @/
UBYTE	SetDateInput(void);
#endif
UBYTE	PrintConsumerOrderForm(void);
void	ServicePrintSettingList(void);		/ *G /
#if (PRO_MULTI_LINE == ENABLE)
void	MultiLineFunctionMode(void);		/ *J(ŒﬂÃﬂ◊), *E(±›Ωﬁ) /
void	SF_MultiRelayTest(void);
void	SF_MultiTonalTest(void);
void	SF_MultiDTMF_Test(void);
UWORD	MultiPixPattern(UWORD);
void	DisplayMultiTonalTest(UBYTE, UBYTE );
void 	DisplayMultiTxDTMF(UBYTE);
#endif
void	SF_OptionDataInitial(void);			/ *K /
void	ClearOrderData(void);				/ *L(ŒﬂÃﬂ◊) /
#if (PRO_KEYPANEL == PANEL_POPLAR_B) && !defined(JPN)  / lifemonitorbythonda1998/06/01 /
void	SetLifeMonitorPasscode(void);		/ *P(ŒﬂÃﬂ◊) /
#endif
#if (0) @@ ROMóeó ÇÃä÷åWÇ≈ÉRÉÅÉìÉgÇ…ÇµÇ‹Ç∑ T.Fukumoto @@
void	EditLifeMonitor(void);				/ *Z(ŒﬂÃﬂ◊) /
UBYTE	LifeMonitorNumberInput(UBYTE *, UBYTE);
#endif
void	SetMonitorSpeakerOnOff(void);		/ *[33](ŒﬂÃﬂ◊), *L(±›Ωﬁ) /
void	MemoryDump(void);					/ *[34](ŒﬂÃﬂ◊), *M(±›Ωﬁ) /
UBYTE	InputAddressOrLength(UBYTE *, UBYTE, UBYTE, UBYTE *);

void	MaintenanceOperationMode(void);		/ ** /
void	MachineStatusMonitor(void);			/ **1 /
void	Class1MonitorPrintOperation(void);	/ **2 /
void	PrinterStatusMonitor(void);			/ **3 /
#if (PRO_KEYPANEL == PANEL_ANZU_L)	/@ ŒﬂÃﬂ◊ÇÃROMóeó çÌå∏ÇÃà◊ÅAèåè∫› ﬂ≤Ÿí«â¡ by K.Watanabe 1998/04/24 @/
void	EmptyAndMemoryAreaDisplay(void);	/ **4(±›Ωﬁ) /
#endif
#if defined(POPLAR_F)
void	EmptyAndMemoryAreaDisplay(void);
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
void 	ChangeRxSecondLine(void);			/ **5(±›Ωﬁ) /
#endif
void	ServiceReportPrintOperation(void);	/ **A /
#if (PRO_KEYPANEL == PANEL_POPLAR_B) && (PRO_OKI == ENABLE)	/ by K.Watanabe 1998/09/24 /
void	PrintErrorList(void);				/ **B(ŒﬂÃﬂ◊B) /
#endif
void	MaintenanceSwitchMode(void);		/ **[40](ŒﬂÃﬂ◊), **P6(±›Ωﬁ) /
#if (PRO_MINOLTA_TEST_FUNC == ENABLE)
void 	MinoltaTestOperation(UBYTE);
void	ClearMinoltaTestPrintArea(void);
void	MinoltaTestPatternPrint(UBYTE);
void	MinoltaTestPatternPrintCheck(void);
void	MinoltaTestPatternPrintPG(void);
void	MinoltaTestPatternDisplay(void);
#endif
*/

static UWORD	tskno_txtask = 0xFFFF;	/* ÉgÅ[ÉiÉãÉeÉXÉgÅFÇeÇrÇjÅ^ÇoÇhÇwëóèoÉ^ÉXÉNÇsÇhÇc */

#include	"\src\atlanta\ext_v\ncu_data.h"

#if (PRO_IMAGE_PROCESSOR == IMAGE_PROCESSOR_LC82103)
 #if defined(SATSUKI2) /* SMuratec H.C.H 2003.07.11 */
#include	"\src\atlanta\satsuki2\define\m_param.h"
 #elif defined(STOCKHM2)
#include	"\src\atlanta\stockhm2\define\m_param.h"
 #else
#include	"\src\atlanta\hinoki\define\m_param.h"
 #endif
#include	"\src\atlanta\define\mntsw_h.h"
 #if defined(SATSUKI2) || defined(STOCKHM2)
#include "\src\atlanta\sh7043\define\sh_port.h"
 #else
#include "\src\atlanta\hinoki\define\hinoport.h"
 #endif
 #if defined(STOCKHM2)		/* Modify by SMuratec K.W.Q 2004/05/18 */
#include	"\src\atlanta\prt\lv_therm\define\prt_pro.h"
 #else
#include	"\src\atlanta\prt\iu_therm\define\prt_pro.h"
 #endif
#endif

#if defined(POPLAR_F)
#include	"\src\atlanta\sh7043\define\sh_port.h"
#endif

/* Ç`ÇcÇeÇ…å¥çeÇÉZÉbÉgÇµÇΩéûÅAÇ`ÇcÇeë§Ç≈É~ÉâÅ[Ç™é~Ç‹ÇÁÇ»Ç≠Ç»ÇÈåè
** T.Nose 1997/12/20
*/
#include "\src\atlanta\ext_v\scn_data.h"
#include "\src\atlanta\define\mntsw_c.h"

#if defined (KEISATSU)		/* åxé@FAX Added by SMuratec K.W.Q 2005/06/14 */
#include	"\src\memsw\define\mem_sw_a.h"
#include	"\src\memsw\define\mem_sw_g.h"
#include	"\src\atlanta\hinoki\define\m_param.h"
#endif		/* End of (defined (KEISATSU)) */

extern UWORD			RsRxIntCount;	/* test debugcl1 */

#if defined (HINOKI2) || defined(HINOKI3) || defined (SATSUKI2) || defined(STOCKHM2)	/* for debug */
 #if defined (JPN)
#include	"\src\atlanta\define\ncu_pro.h"
void TestDialinDetectDTMF(void);	/* 2002/01/24 T.Takagi */
 #endif
void PC24V_TestMode(void);			/* 2002/12/03 T.Takagi */
#endif


/*************************************************************************
 * ÅmÉ|ÉvÉâÇaÅEÇkÅn
 * ****ÉTÅ[ÉrÉXÉtÉ@ÉìÉNÉVÉáÉìàÍóóÅiã@î\Å@Å{Å@ÅñÇ≈énÇ‹ÇÈÅj*****
 *		0.É}ÉVÉìÉpÉâÉÅÅ[É^ÉZÉbÉgÅEÉNÉäÉA
 *		1.ÉÅÉÇÉäÉXÉCÉbÉ`ÉZÉbÉgÅEÉNÉäÉA
 *		2.ÉÜÅ[ÉUÅ[ê›íËÉNÉäÉA
 *		3.ÉIÅ[ÉãÉâÉÄÉNÉäÉA
 *		4.ã@éÌå≈óLÉXÉCÉbÉ`ÉZÉbÉgÅEÉNÉäÉA
 *		5.ÇsÇRÇOÉÇÉjÉ^Å[ÉvÉäÉìÉg
 *		6.ÉvÉäÉìÉ^ÉÅÉìÉeÉiÉìÉX
 *			1.åä∑ÉJÉEÉìÉ^ÉZÉbÉg
 *			2.ÉTÅ[ÉrÉXÉRÅ[Éã
 *		7.ñ¢égóp
 *		8.ÉtÉ@ÉìÉNÉVÉáÉìÉäÉXÉg
 *		9.ÉeÉXÉgÉtÉ@ÉìÉNÉVÉáÉì
 *			1.ÉâÉCÉtÉÇÉjÉ^Å[
 *				A:ÇqÇnÇlÉoÅ[ÉWÉáÉì
 *				B:ì«Ç›Ç∆ÇËñáêî
 *				C:àÛéöñáêî
 *				D:ëóêMñáêî
 *				E:ÉhÉâÉÄåä∑âÒêî
 *				F:ÉhÉâÉÄéıñΩ
 *			2.ÉâÉCÉtÉÇÉjÉ^Å[ÉNÉäÉA
 *			3.ÉeÉXÉgÉpÉ^Å[ÉìÉvÉäÉìÉg
 *			4.ÉXÉ^ÉìÉvÉeÉXÉg
 *			5.ÉVÉFÅ[ÉfÉBÉìÉOÉfÅ[É^éÊÇËçûÇ›
 *		A.ÉpÉâÉÅÅ[É^Å[ÉäÉXÉgÉvÉäÉìÉg
 *		B.çHèÍÉtÉ@ÉìÉNÉVÉáÉì
 *			1.çHèÍÉtÉ@ÉìÉNÉVÉáÉìÉäÉXÉg
 *			2.ÇkÇdÇcÉeÉXÉg
 *			3.ÇkÇbÇcÉeÉXÉg
 *			4.ÉpÉlÉãÉLÅ[ÉeÉXÉg
 *			5.ÇrÇqÇ`ÇlÉ`ÉFÉbÉN
 *			6.ÇcÇqÇ`ÇlÉ`ÉFÉbÉN
 *			7.ÇqÇsÇbÉeÉXÉg
 *			8.ÇqÇrÇQÇRÇQÇRÇbÉeÉXÉg
 *		C.âÒê¸ÉeÉXÉg
 *			1.ÉäÉåÅ[ÉeÉXÉg
 *			2.ÉgÅ[ÉiÉãÉeÉXÉg
 *			3.ÇcÇsÇlÇeÉeÉXÉg
 *		D.ÉäÉìÉOÉ}ÉXÉ^Å[ÉpÉ^Å[Éìé©ìÆåüèo (USAÇÃÇ›)
 *		E.É~ÉâÅ[ÉLÉÉÉäÉbÉWóAëóÉÇÅ[ÉhÉZÉbÉg
 *		F.è¡ñ’ïiî≠íçã@î\
 *		G.ã@äÌê›íËÉäÉXÉgÉvÉäÉìÉg
 *		H.ÉâÉCÉtÉÇÉjÉ^Å[ÉNÉäÉA
 *		I.ÇcÇqÇ`ÇlÉNÉäÉA
 *		J.âÒê¸ÉeÉXÉgÅiÇQâÒédólÅj
 *		K.ÉIÉvÉVÉáÉìÉfÅ[É^èâä˙âª
 *		L.è¡ñ’ïiî≠íçÉfÅ[É^ÉNÉäÉA
 *		P.ÉâÉCÉtÉÇÉjÉ^ÉpÉXÉRÅ[ÉhÅiJPNà»äOÅj
 *		[33].ÉÇÉjÉ^Å[ÉXÉsÅ[ÉJÅ[ÇnÇmÅ^ÇnÇeÇe
 *		[34].ÉÅÉÇÉäÉ_ÉìÉvï\é¶
 * ****ÉeÉXÉgÉIÉyÉåÅ[ÉVÉáÉìàÍóóÅiã@î\Å@Å{Å@ÅñÅ@Å{Å@ÅñÇ≈énÇ‹ÇÈÅj*****
 *		1.É}ÉVÉìÉXÉeÅ[É^ÉXï\é¶
 *		2.ÉNÉâÉXÇPÉIÉìÉâÉCÉìÉÇÉjÉ^Å[ÉvÉäÉìÉg
 *		3.ÉvÉäÉìÉ^Å[ÉXÉeÅ[É^ÉXï\é¶
 *		A.ÉTÅ[ÉrÉXÉåÉ|Å[ÉgÉvÉäÉìÉg
 *		[40].ï€éÁópÉXÉCÉbÉ`ÉZÉbÉgÅEÉNÉäÉA
 *
 *
 * ÅmÉAÉìÉYÇkÅn
 * ****ÉTÅ[ÉrÉXÉtÉ@ÉìÉNÉVÉáÉìàÍóóÅiã@î\Å@Å{Å@ÅñÇ≈énÇ‹ÇÈÅj*****
 *		0.É}ÉVÉìÉpÉâÉÅÅ[É^ÉZÉbÉgÅEÉNÉäÉA
 *		1.ÉÅÉÇÉäÉXÉCÉbÉ`ÉZÉbÉgÅEÉNÉäÉA
 *		2.ÉÜÅ[ÉUÅ[ê›íËÉNÉäÉA
 *		3.ÉIÅ[ÉãÉâÉÄÉNÉäÉA
 *		4.ã@éÌå≈óLÉXÉCÉbÉ`ÉZÉbÉgÅEÉNÉäÉA
 *		5.ÇsÇRÇOÉÇÉjÉ^Å[ÉvÉäÉìÉg
 *		6.ñ¢égóp
 *		7.ñ¢égóp
 *		8.ÉtÉ@ÉìÉNÉVÉáÉìÉäÉXÉg
 *		9.ÉeÉXÉgÉtÉ@ÉìÉNÉVÉáÉì
 *			1.ÉâÉCÉtÉÇÉjÉ^Å[
 *				A:ÇqÇnÇlÉoÅ[ÉWÉáÉì
 *				B:ì«Ç›Ç∆ÇËñáêî
 *				C:àÛéöñáêî
 *				D:ëóêMñáêî
 *				E:ÉhÉâÉÄåä∑âÒêî
 *				F:ÉhÉâÉÄéıñΩ
 *			2.ÉâÉCÉtÉÇÉjÉ^Å[ÉNÉäÉA
 *			3.ÉeÉXÉgÉpÉ^Å[ÉìÉvÉäÉìÉg
 *			4.ÉXÉ^ÉìÉvÉeÉXÉg
 *			5.ÉVÉFÅ[ÉfÉBÉìÉOÉfÅ[É^éÊÇËçûÇ›
 *		A.ÉpÉâÉÅÅ[É^Å[ÉäÉXÉgÉvÉäÉìÉg
 *		B.çHèÍÉtÉ@ÉìÉNÉVÉáÉì
 *			1.çHèÍÉtÉ@ÉìÉNÉVÉáÉìÉäÉXÉg
 *			2.ÇkÇdÇcÉeÉXÉg
 *			3.ÇkÇbÇcÉeÉXÉg
 *			4.ÉpÉlÉãÉLÅ[ÉeÉXÉg
 *			5.ÇrÇqÇ`ÇlÉ`ÉFÉbÉN
 *			6.ÇcÇqÇ`ÇlÉ`ÉFÉbÉN
 *			7.ÇqÇsÇbÉeÉXÉg
 *			8.ÇqÇrÇQÇRÇQÇRÇbÉeÉXÉg
 *		C.âÒê¸ÉeÉXÉg
 *			1.ÉäÉåÅ[ÉeÉXÉg
 *			2.ÉgÅ[ÉiÉãÉeÉXÉg
 *			3.ÇcÇsÇlÇeÉeÉXÉg
 *		D.ÉäÉìÉOÉ}ÉXÉ^Å[ÉpÉ^Å[Éìé©ìÆåüèo (USAÇÃÇ›)
 *		E.âÒê¸ÉeÉXÉgÅiÇQâÒédólÅj
 *		F.ÉTÅ[ÉrÉXÉåÉ|Å[ÉgÉvÉäÉìÉg
 *		G.ã@äÌê›íËÉäÉXÉgÉvÉäÉìÉg
 *		H.ÉâÉCÉtÉÇÉjÉ^Å[ÉNÉäÉA
 *		I.ÇcÇqÇ`ÇlÉNÉäÉA
 *		K.ÉIÉvÉVÉáÉìÉfÅ[É^èâä˙âª
 *		L.ÉÇÉjÉ^Å[ÉXÉsÅ[ÉJÅ[ÇnÇmÅ^ÇnÇeÇe
 *		M.ÉÅÉÇÉäÉ_ÉìÉvï\é¶
 * ****ÉeÉXÉgÉIÉyÉåÅ[ÉVÉáÉìàÍóóÅiã@î\Å@Å{Å@ÅñÅ@Å{Å@ÅñÇ≈énÇ‹ÇÈÅj*****
 *		1.É}ÉVÉìÉXÉeÅ[É^ÉXï\é¶
 *		2.ÉNÉâÉXÇPÉIÉìÉâÉCÉìÉÇÉjÉ^Å[ÉvÉäÉìÉg
 *		3.ÉvÉäÉìÉ^Å[ÉXÉeÅ[É^ÉXï\é¶
 *		4.ÉÅÉÇÉäécó ÅEEMPTYÉtÉ@ÉCÉãêîï\é¶
 *		A.ÉTÅ[ÉrÉXÉåÉ|Å[ÉgÉvÉäÉìÉg
 *		P06.ï€éÁópÉXÉCÉbÉ`ÉZÉbÉgÅEÉNÉäÉA
*************************************************************************/

/*************************************************************************
	module		:[É}ÉVÅ[ÉìÉpÉâÉÅÅ[É^Å[ÉIÉyÉåÅ[ÉVÉáÉì]
	function	:[
		1.ã@î\+Åñ+0
		2.É}ÉVÅ[ÉìÉpÉâÉÅÅ[É^Å[ÇÃÉZÉbÉgÅ^ÉNÉäÉAÇé¿çs
	]
	return		:[]
	common		:[SoftSwCtrl]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1995/07/18]
	author		:[ç]å˚]
*************************************************************************/
void MachineParameterMode(void)
{
	UBYTE	mode;

	/* ÉfÅ[É^ÇÃÉZÉbÉg */
	OPR_Buf.SoftSwCtrl.ItemWording  = D2W_SF_ParameterSet;			/* [Set Parameters      ] */
	OPR_Buf.SoftSwCtrl.SetParameter = &SYB_MachineParameter[0];		/* œº∞› ﬂ◊“∞¿ */
	OPR_Buf.SoftSwCtrl.SwitchMax    = SYS_MACHINE_PARAMETER_MAX;	/* ç≈ëÂÇPÇOÇOå¬ */
	OPR_Buf.SoftSwCtrl.SelectSwitch = 0;							/* èâä˙ílÇOÅiÇ`ÇOÅjSATSUKI2Ç≈ÇÕÅiÇOÇOÅj*/

	/* ï“èWÇ∑ÇÈÇ©ÉNÉäÉAÇ∑ÇÈÇ©ëIëÇ≥ÇπÇÈ */
	mode = SelectSetClearMode();

	if (mode == PARAMETER_SET) {		/* ï“èWÇÃèÍçá */
		SetSoftSwitch();
#if (PRO_MULTI_LINE == ENABLE)
		MAN_ChangedSRAM_Parameter(OPT_CHANGED_MACHINE_PARA);
#endif
	}
	else if (mode == PARAMETER_CLEAR) {	/* ÉNÉäÉAÇÃèÍçá */
		ClearSoftSwitch(MACHINE_PARAMETER_MODE);
#if (PRO_MULTI_LINE == ENABLE)
		MAN_ChangedSRAM_Parameter(OPT_CHANGED_MACHINE_PARA);
#endif
	}
	else { /* èIóπOPR_END */
		return;
	}
}

/*************************************************************************
	module		:[ÉÅÉÇÉäÅ[ÉXÉCÉbÉ`ÉIÉyÉåÅ[ÉVÉáÉì]
	function	:[
		1.ã@î\+Åñ+ÇP
		2.ÉÅÉÇÉäÅ[ÉXÉCÉbÉ`ÇÃÉZÉbÉgÅ^ÉNÉäÉAÇé¿çs
	]
	return		:[]
	common		:[SoftSwCtrl]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1995/07/18]
	author		:[ç]å˚]
*************************************************************************/
void MemorySwitchMode(void)
{
	UBYTE	mode;

	/* ÉfÅ[É^ÇÃÉZÉbÉg */
	OPR_Buf.SoftSwCtrl.ItemWording  = D2W_SF_MemorySwitchSet;	/* [Set Memory Switch   ]*/
	OPR_Buf.SoftSwCtrl.SetParameter = &SYS_MemorySwitch[0];		/* “”ÿ∞Ω≤Ø¡ */
	OPR_Buf.SoftSwCtrl.SwitchMax    = SYS_MEMORY_SWITCH_MAX;	/* ç≈ëÂÇPÇOÇOå¬ */
	OPR_Buf.SoftSwCtrl.SelectSwitch = 0;						/* èâä˙ílÇOÅiÇ`ÇOÅjSATSUKI2Ç≈ÇÕÅiÇOÇOÅj*/

	/** ÉZÉbÉgÇ∑ÇÈÇ©ÉNÉäÉAÇ∑ÇÈÇ©ëIëÇ≥ÇπÇÈ */
	mode = SelectSetClearMode();

	if (mode == PARAMETER_SET) {		/* ï“èWÇ∑ÇÈèÍçá */
		SetSoftSwitch();
#if (PRO_MULTI_LINE == ENABLE)
		MAN_ChangedSRAM_Parameter(OPT_CHANGED_MEMORY_SWITCH);
#endif
	}
	else if (mode == PARAMETER_CLEAR) {	/* ÉNÉäÉAÇÃèÍçá */
		ClearSoftSwitch(MEMORY_SWITCH_MODE);
#if (PRO_MULTI_LINE == ENABLE)
		MAN_ChangedSRAM_Parameter(OPT_CHANGED_MEMORY_SWITCH);
#endif
	}
	else {/*OPR_END*/
		return;
	}
}

/*************************************************************************
	module		:[ï“èWÇ∑ÇÈÇ©ÉNÉäÉAÇ∑ÇÈÇ©ÇÃëIë]
	function	:[
		1.
	]
	return		:[]
	common		:[SoftSwCtrl]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1995/07/18]
	author		:[ç]å˚]
*************************************************************************/
UBYTE SelectSetClearMode(void)
{
	UBYTE	status;		/* 0:setÅ@1:clear */
	UBYTE	key;
	UBYTE	keytype;

	status = 0;

	/** èâä˙ï\é¶ [Set MemorySwitch    ][Set Parameters      ]*/
	/*			 [      Program/Enter ][      Program/Enter ]*/
	DisplayStringHigh(0, OPR_Buf.SoftSwCtrl.ItemWording); /* ****Set */
	FlashDisplayStringLow(D2W_ProgramEnter);	/* "            ∑…≥/æØƒ " */

	while (1) {
		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();
		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[ */
		case LEFT_ARROW:	/* ç∂ñÓàÛ  */
			/** ï“èWÅ^ÉNÉäÉAÇêÿÇËë÷Ç¶ */

			status ^= (UBYTE)0x01;
			DisplayStringHigh(0, OPR_Buf.SoftSwCtrl.ItemWording + status * OPR_WORDING_LEN);
			/* Set / ClearÇÃÉèÅ[ÉfÉBÉìÉOÇÕï¿Ç◊Çƒìoò^Ç∑ÇÈÇ±Ç∆ */
			break;

		case ENTER: /* ÉZÉbÉg */
			/** åàíË */
			if (status == 0) /* ï“èW */
				return (PARAMETER_SET);
			else /* ÉNÉäÉA */
				return (PARAMETER_CLEAR);

		case STOP:
		case KEY_TIME_UP:
			/** èIóπ */
			return (OPR_END);

		case NO_EFFECT:
			break; /* ÉiÉbÉNÇÇ»ÇÁÇ≥ÇÒÇΩÇﬂ */
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÉpÉâÉÅÅ[É^ÇÃï“èW]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1995/07/18]
	author		:[ç]å˚,ìnï”àÍèÕ]
*************************************************************************/
void SetSoftSwitch(void)
{
	UWORD	i;
#if (PRO_IMAGE_PROCESSOR == IMAGE_PROCESSOR_LC82103)
	UWORD DBG_Status;
#endif
#if (PRO_NEW_JATE == ENABLE)	/* 1998/10/06 H.Yoshikawa */
	UBYTE attenation;
#endif
#if (PRO_MULTI_T30_MONITOR == ENABLE) /* By H.Fujimura 1999/04/12 */
	UBYTE	temp;
#endif
#if (PRO_MEMORY_SW_EDIT_GUARD == ENABLE)	/* ï“èWÇ∑ÇÈÉÅÉÇÉäSWÇÉeÉìÉLÅ[/ÉJÅ[É\ÉãÇ≈ëIëÇ∑ÇÈÇ‹Ç≈ï“èWÇÉKÅ[ÉhÇ∑ÇÈ by J.Kishida 2002/10/01 */
	UBYTE	memory_sw_edit_mode;	/* ÉÅÉÇÉäSWÇÃï“èWÇ™â¬î\Ç…Ç»Ç¡ÇΩ */
#endif

#if (PRO_MEMORY_SW_EDIT_GUARD == ENABLE)
	memory_sw_edit_mode = FALSE;
#endif
#if defined (KEISATSU) /* åxé@FAX 05/04/27 êŒã¥ê≥òa */
	UBYTE att;
#endif

	while (1) {
#if (PRO_MEMORY_SW_EDIT_GUARD == ENABLE)	/* ÉXÉCÉbÉ`ÇÃà íuÇëIëÇµÇΩÇÃÇ≈ï“èWÉKÅ[ÉhÇâèú */
		/** ï“èWÇ∑ÇÈÉpÉâÉÅÅ[É^ÇëIë */
		if (SelectSoftSwitch(memory_sw_edit_mode) == OPR_END) {/** ëIëíÜÇ…ÉXÉgÉbÉvÉLÅ[*/
			return; /* èIóπ */
		}
		memory_sw_edit_mode = TRUE;
#else
		/** ï“èWÇ∑ÇÈÉpÉâÉÅÅ[É^ÇëIë */
		if (SelectSoftSwitch() == OPR_END) {/** ëIëíÜÇ…ÉXÉgÉbÉvÉLÅ[*/
			return; /* èIóπ */
		}
#endif

		/** ÉpÉâÉÅÅ[É^ÇÃï“èW */
		DisplayStringHigh(0, OPR_Buf.SoftSwCtrl.ItemWording);
		SoftDipInputInitial();  /* èâä˙ílÉZÉbÉg :OPR_Buf.SoftSwCtrl ->> CharacterInput */
		if (SoftDipInput() == NG) {	/* ï“èWíÜÇ…ÉXÉgÉbÉvÉLÅ[ */
			return;
		}

#if (PRO_MULTI_T30_MONITOR == ENABLE) /* By H.Fujimura 1999/04/12 */
		temp = CHK_UNI_MultiT30Monitor();
#endif

		/** ï“èWèIóπÇµÇΩèÍçá,êVÇµÇ¢ÉfÅ[É^Çäiî[ */
		OPR_Buf.SoftSwCtrl.SetParameter[OPR_Buf.SoftSwCtrl.SelectSwitch] = StoreCharacterInputToSoftDip();

#if defined(POPLAR_F)
#else
 #if (PRO_MULTI_T30_MONITOR == ENABLE) /* By H.Fujimura 1999/04/12 */
		if (CHK_UNI_MultiT30Monitor() != temp) {
			InitializeDRAM_Parameter();									/** ÇcÇqÇ`ÇlóÃàÊÇèâä˙âª		*/
			InitializeMachineStatus();									/** É}ÉVÅ[ÉìÉXÉeÅ[É^ÉXÇÃÉNÉäÉA	*/
			SYS_MachineStatus[SYS_RESOURCE_STATUS] |= SYS_PANEL_BUSY;
			SYS_ErasePixMemoryListRequest = 0;							/** í‚ìdî≠ê∂èâä˙âª				*/
			Init_AnyList(LST_POWEROFF_NOTICE);							/** í‚ìdÉXÉeÅ[É^ÉXÇÃÉNÉäÉA		*/
  #if defined(KEISATSU) /* ÉXÉNÉâÉìÉuÉãBITÇ™óéÇøÇƒÇµÇ‹Ç§åè O.Oshima 2005/12/06 */
			InitializeSensor();											/** ÉZÉìÉTÅ[Çèâä˙âª			*/
  #endif
		}
 #endif
#endif

		/*-------------------------------------------------------------
		** êVJATEäÓèÄÅi98/04à»ç~ÅjÇ≈ÇÕÅAëóèoÉåÉxÉãÇÕ-8dBmà»â∫Ç∆Ç»ÇËÇ‹ÇµÇΩÇÃÇ≈ÅA
		** èâä˙ílÇ-8.5dBmÇ∆Ç»ÇÈÇÊÇ§Ç…ÇµÇ‹Ç∑ÅBCountryTable[][COUNTRY_SW_15])Ç…íËã`Ç∑Ç›
		** É\ÉtÉgí≤êÆîÕàÕÇÕÅAèâä˙ílÅi-8.5dBmÅjÇÊÇËè¨Ç≥Ç¢ílÇ≈Ç»ÇØÇÍÇŒÇ»ÇËÇ‹ÇπÇÒÅB
		** èâä˙ílÇÊÇËè¨Ç≥Ç¢ílÇ™ÉZÉbÉgÇ≥ÇÍÇΩèÍçáÇ…ÇÕÅAã≠êßìIÇ…èâä˙ílÇ…ÇµÇ‹Ç∑ÅB
		** Ç±ÇÃéûÅAèâä˙ílÇÊÇËè¨Ç≥Ç¢ílÇê›íËÇ≈Ç´Ç»Ç¢ÇÊÇ§Ç…Ç∑ÇÈï˚ñ@Ç‡Ç†ÇËÇ‹Ç∑Ç™ÅA
		** èâä˙ílÇÃílÇ™ÇÌÇ©ÇÁÇ»Ç≠Ç»Ç¡ÇΩÇΩÇﬂÇ…ÅAê›íËÇ≈Ç´Ç»Ç≠Ç»ÇÈÇÃÇñhÇ¨Ç‹Ç∑ÅB
		** ÉeÉXÉgópÇ…ÅAÇOÇÑÇaÇ‹Ç≈í≤êÆÇ≈Ç´ÇÈÇÊÇ§Ç…ÇµÇƒÇ®Ç´Ç‹Ç∑ÅB
		** 1998/10/08 H.Yoshikawa
		** ã@éÌå≈óLÇrÇvÇÃÇaÇVÅ|ÇUÇ…à⁄ìÆÇµÇ‹ÇµÇΩ 1999/01/05
		*/
#if (PRO_NEW_JATE == ENABLE)	/* 1998/10/06 H.Yoshikawa *//* Add By O.Kimoto 1999/03/01 */
		if (!CHK_UNI_TxLevelUpper0DB()) {	/* 1999/01/05 H.Yoshikawa */
			if (&OPR_Buf.SoftSwCtrl.SetParameter[OPR_Buf.SoftSwCtrl.SelectSwitch] == (&SYB_MachineParameter[MACHINE_PARA_1])) {
 				attenation = (UBYTE)(SYB_MachineParameter[MACHINE_PARA_1] & ATTENATION_MACHINE_PARA);
 				if (attenation) {
	 				if (attenation < CountryTable[SYB_MachineParameter[COUNTRY_CODE]][COUNTRY_SW_15]) {
		 				SYB_MachineParameter[MACHINE_PARA_1] &= ~ATTENATION_MACHINE_PARA;
		 				SYB_MachineParameter[MACHINE_PARA_1] |= (ATTENATION_MACHINE_PARA & (CountryTable[SYB_MachineParameter[COUNTRY_CODE]][COUNTRY_SW_15]));
					}
				}
			}
			if (&OPR_Buf.SoftSwCtrl.SetParameter[OPR_Buf.SoftSwCtrl.SelectSwitch] == (&SYS_MemorySwitch[MEMORY_SW_B1])) {
				attenation = (UBYTE)(SYS_MemorySwitch[MEMORY_SW_B1] & ATTENATION);
				if (attenation < CountryTable[SYB_MachineParameter[COUNTRY_CODE]][COUNTRY_SW_15]) {
					SYS_MemorySwitch[MEMORY_SW_B1] &= ~ATTENATION;
					SYS_MemorySwitch[MEMORY_SW_B1] |= (ATTENATION & (CountryTable[SYB_MachineParameter[COUNTRY_CODE]][COUNTRY_SW_15]));
				}
			}
		}
#endif

#if defined (KEISATSU) /* åxé@FAX 05/04/27 êŒã¥ê≥òa */
		att = OPR_Buf.SoftSwCtrl.SetParameter[OPR_Buf.SoftSwCtrl.SelectSwitch] & ATTENATION;
		if (&OPR_Buf.SoftSwCtrl.SetParameter[OPR_Buf.SoftSwCtrl.SelectSwitch] == &SYB_MachineParameter[MACHINE_PARA_1]) {
			SYS_MemorySwitch[MEMORY_SW_B1] &= ~ATTENATION;
			SYS_MemorySwitch[MEMORY_SW_B1] |= att;
		}
		if (&OPR_Buf.SoftSwCtrl.SetParameter[OPR_Buf.SoftSwCtrl.SelectSwitch] == &SYB_MachineParameter[M_PARA_SW_B3]) {
			SYS_MemorySwitch[MEMORY_SW_B4] &= ~ATTENATION;
			SYS_MemorySwitch[MEMORY_SW_B4] |= att;
		}
		if (&OPR_Buf.SoftSwCtrl.SetParameter[OPR_Buf.SoftSwCtrl.SelectSwitch] == &SYS_MemorySwitch[MEMORY_SW_B1]) {
			SYB_MachineParameter[MACHINE_PARA_1] &= ~ATTENATION;
			SYB_MachineParameter[MACHINE_PARA_1] |= att;
		}
		if (&OPR_Buf.SoftSwCtrl.SetParameter[OPR_Buf.SoftSwCtrl.SelectSwitch] == &SYS_MemorySwitch[MEMORY_SW_B4]) {
			SYB_MachineParameter[M_PARA_SW_B3] &= ~ATTENATION;
			SYB_MachineParameter[M_PARA_SW_B3] |= att;
		}
#else
		/* ã@äÌÉpÉâÉÅÅ[É^ï“èWÇ≈ÉXÉCÉbÉ`Ç`ÇPÇÃëóèoÉåÉxÉãê›íËÇ…ÇOà»äOÇ™ÉZÉbÉgÇ≥ÇÍÇΩèÍçáÅA
		** ëSÉIÅ[ÉgÉ_ÉCÉÑÉâÇÃëóèoÉåÉxÉãÇïœçXÇµÇ‹Ç∑
		*/
		if ((&OPR_Buf.SoftSwCtrl.SetParameter[OPR_Buf.SoftSwCtrl.SelectSwitch] == &SYB_MachineParameter[MACHINE_PARA_1])
		 && (OPR_Buf.SoftSwCtrl.SetParameter[OPR_Buf.SoftSwCtrl.SelectSwitch] & ATTENATION_MACHINE_PARA)) {
			/* ëSÉèÉìÉ^ÉbÉ`É_ÉCÉAÉãëÆê´ÉAÉbÉeÉlÅ[É^ïœçX */
			for (i = 0; i < SYS_ONETOUCH_MAX; i++) {
				if ((SYB_OnetouchDial[i].Dial[0] & 0xF0) != 0xF0) {
					SYB_OnetouchDial[i].Attribute2 &= ~ATTENATION;
					SYB_OnetouchDial[i].Attribute2 |= (SYB_MachineParameter[MACHINE_PARA_1] & ATTENATION_MACHINE_PARA);
				}
			}
			/* ëSíZèkÉ_ÉCÉAÉãëÆê´ÉAÉbÉeÉlÅ[É^ïœçX */
			for (i = 0; i < SYS_SPEED_DIAL_MAX; i++) {
				if (CheckSpeedStoreStatus(i) == OK) {
					SYB_SpeedDial[i].Attribute2 &= ~ATTENATION;
					SYB_SpeedDial[i].Attribute2 |= (SYB_MachineParameter[MACHINE_PARA_1] & ATTENATION_MACHINE_PARA);
				}
			}
			/* ã@éÌã§í ÉXÉCÉbÉ`ÉAÉbÉeÉlÅ[É^ïœçX */
			SYS_MemorySwitch[MEMORY_SW_B1] &= ~ATTENATION;
			SYS_MemorySwitch[MEMORY_SW_B1] |= (SYB_MachineParameter[MACHINE_PARA_1] & ATTENATION_MACHINE_PARA);
		}
#endif

#if (PRO_IMAGE_PROCESSOR == IMAGE_PROCESSOR_LC82103)
		/* îZìxí≤êÆÇÃÉpÉâÉÅÅ[É^èàóùí«â¡
		** îZìxïÅí ÇÃÉpÉâÉÅÅ[É^Çí≤êÆÇµÇΩèÍçáÅAîZÇ¢ÅAîñÇ¢Ç™ÇOÇÃÇ∆Ç´ÅAòAìÆÇµÇƒÉZÉbÉgÇ∑ÇÈÇÊÇ§Ç…ÇµÇ‹Ç∑
		** Ç‹ÇΩÅAîZÇ¢Ç∆îñÇ¢ÇÃÉpÉâÉÅÅ[É^Çí≤êÆÇµÇΩèÍçáÇÕÅAëºÇÃÉpÉâÉÅÅ[É^Ç…òAìÆÇµÇ»Ç¢ÇÊÇ§Ç…ÇµÇ‹Ç∑
		**
		** íçà”ÅFàÍìxïÅí ÇÃÉpÉâÉÅÅ[É^í≤êÆÅiÇOà»äOÅjÇçsÇ¢ÅAîZÇ¢ÅAîñÇ¢Ç™òAìÆÇµÇƒÉZÉbÉgÇ≥ÇÍÇΩå„ÅA
		**       Ç‡Ç§àÍìxÅAïÅí ÇÃÉpÉâÉÅÅ[É^í≤êÆÇçsÇ»Ç¡ÇΩèÍçáÅAîZÇ¢ÅAîñÇ¢Ç…ÇÕÇOà»äOÇÃílÇ™ÉZÉbÉgÇ≥ÇÍÇƒÇ¢ÇÈÇÃÇ≈
		**       òAìÆÇ≥ÇÍÇ‹ÇπÇÒ
		*/
		if (&OPR_Buf.SoftSwCtrl.SetParameter[OPR_Buf.SoftSwCtrl.SelectSwitch] == &SYB_MachineParameter[M_PARA_SW_H1]) {
#if (0) /* ï¿êÏÇÃàÀóä èÌÇ…òAìÆÇ∑ÇÈÇÊÇ§Ç…ïœçXÇµÇ‹Ç∑ 1999/1/22 by T.Soneoka */
**			if (!SYB_MachineParameter[M_PARA_SW_H0]) {
**				SYB_MachineParameter[M_PARA_SW_H0] = SYB_MachineParameter[M_PARA_SW_H1];
**			}
**			if (!SYB_MachineParameter[M_PARA_SW_H2]) {
**				SYB_MachineParameter[M_PARA_SW_H2] = SYB_MachineParameter[M_PARA_SW_H1];
**			}
#else
			SYB_MachineParameter[M_PARA_SW_H0] = SYB_MachineParameter[M_PARA_SW_H1];
			SYB_MachineParameter[M_PARA_SW_H2] = SYB_MachineParameter[M_PARA_SW_H1];
#endif
		}
		if (&OPR_Buf.SoftSwCtrl.SetParameter[OPR_Buf.SoftSwCtrl.SelectSwitch] == &SYB_MachineParameter[M_PARA_SW_H4]) {
#if (0) /* ï¿êÏÇÃàÀóä èÌÇ…òAìÆÇ∑ÇÈÇÊÇ§Ç…ïœçXÇµÇ‹Ç∑ 1999/1/22 by T.Soneoka */
**			if (!SYB_MachineParameter[M_PARA_SW_H3]) {
**				SYB_MachineParameter[M_PARA_SW_H3] = SYB_MachineParameter[M_PARA_SW_H4];
**			}
**			if (!SYB_MachineParameter[M_PARA_SW_H5]) {
**				SYB_MachineParameter[M_PARA_SW_H5] = SYB_MachineParameter[M_PARA_SW_H4];
**			}
#else
			SYB_MachineParameter[M_PARA_SW_H3] = SYB_MachineParameter[M_PARA_SW_H4];
			SYB_MachineParameter[M_PARA_SW_H5] = SYB_MachineParameter[M_PARA_SW_H4];
#endif
		}

#if (0) /* í≤ç∏èIóπÉfÉoÉbÉOèIóπ */
** 		/* ÉvÉäÉìÉgÉãÅ[Éví≤ç∏óp 1999/1/27 by T.Soneoka */
** 		if (&OPR_Buf.SoftSwCtrl.SetParameter[OPR_Buf.SoftSwCtrl.SelectSwitch] == &SYB_MaintenanceSwitch[MNT_SW_H5]) {
** 			if (SYB_MaintenanceSwitch[MNT_SW_H5] & 0x10) {
** 				GA_IntMaskStatus |= (IMASK_PBRDY | IMASK_XCI);
** 				OutputWORD(GA_INT_MASK, GA_IntMaskStatus);
** 			}
** 			if (SYB_MaintenanceSwitch[MNT_SW_H5] & 0x04) {
** 				DBG_Status = InputWORD(GA_INT_STA);		/* G/AäÑçûÇ›ÉXÉeÅ[É^ÉXÅEÉ|Å[Ég */
** 				OutputWORD(GA_INT_REC, DBG_Status);	/* äÑçûÇ›éÛóÃ */
** 				PrinterPbreadyInt();
** 				DtcPermission = TRUE;
** 			}
** 		}
#endif
#endif

		/* ÉXÉCÉbÉ`ÇêiÇﬂÇÈ */
		OPR_Buf.SoftSwCtrl.SelectSwitch++;
		if (OPR_Buf.SoftSwCtrl.SelectSwitch >= OPR_Buf.SoftSwCtrl.SwitchMax) {
			OPR_Buf.SoftSwCtrl.SelectSwitch = 0;
		}
	}
}

/*************************************************************************
	module		:[ï“èWÇ∑ÇÈÉXÉCÉbÉ`ÇëIë]
	function	:[
		1.ï“èWÇ∑ÇÈÉXÉCÉbÉ`ÅiA0Ç©ÇÁJ9ÅjÇëIë
	]
	return		:[]
	common		:[SoftSwCtrl]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1995/07/18]
	author		:[ç]å˚,ìnï”àÍèÕ]
*************************************************************************/
#if (PRO_MEMORY_SW_EDIT_GUARD == ENABLE)
UBYTE SelectSoftSwitch(UBYTE memory_sw_guard_release)
#else
UBYTE SelectSoftSwitch(void)
#endif
{
	UBYTE	key;			/*ì¸óÕ∑∞√ﬁ∞¿*/
	UBYTE	keytype;
#if (PRO_MEMORY_SW_EDIT_GUARD == ENABLE)	/* ï“èWÇ∑ÇÈÉÅÉÇÉäSWÇÉeÉìÉLÅ[/ÉJÅ[É\ÉãÇ≈ëIëÇ∑ÇÈÇ‹Ç≈ï“èWÇÉKÅ[ÉhÇ∑ÇÈ by J.Kishida 2002/10/01 */
	UBYTE	onetouch_select;	/* ÉèÉìÉ^ÉbÉ`Ç≈ï“èWÇ∑ÇÈSW(è\ÇÃà )ÇëIëÇµÇΩ */
	UBYTE	ten_key_select;		/* ÉeÉìÉLÅ[Ç≈ï“èWÇ∑ÇÈSW(àÍÇÃà )ÇëIëÇµÇΩ */
#endif
#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Modify by SMuratec L.Z.W 2003/09/22 */
	UBYTE	key_ck;

	key_ck = 0;
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */

#if (PRO_MEMORY_SW_EDIT_GUARD == ENABLE)	/* 2å¬ñ⁄à»ç~ÇÃSWÇÃï“èWÇÕÉKÅ[ÉhÇâèú */
	if (memory_sw_guard_release == TRUE) {	/* ÉÅÉÇÉäSWÇÃï“èWÇÃÉKÅ[ÉhÇ™âèúÇ≥ÇÍÇƒÇ¢ÇÈ */
		onetouch_select = TRUE;
		ten_key_select  = TRUE;
	}
	else {	/* 1å¬ñ⁄ÇÃÉÅÉÇÉäSWÇÃï“èW */
		onetouch_select = FALSE;
		ten_key_select  = FALSE;
	}
#endif

	/* èâä˙ï\é¶ */
	DisplaySoftSwitchSelect();
	FlashDisplayStringLow(D2W_ProgramEnter);	/* "            ∑…≥/æØƒ " */

	while (1) {
		/* ï\é¶èàóù */
		DisplaySoftSwitchSelect();
		/* ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case FUNCTION:
			/* ÉXÉCÉbÉ`ÇêiÇﬂÇÈ */
			OPR_Buf.SoftSwCtrl.SelectSwitch++;
			if (OPR_Buf.SoftSwCtrl.SelectSwitch >= OPR_Buf.SoftSwCtrl.SwitchMax) {
				OPR_Buf.SoftSwCtrl.SelectSwitch = 0;
			}
#if (PRO_MEMORY_SW_EDIT_GUARD == ENABLE)	/* ç∂âEÉJÅ[É\ÉãÉLÅ[Ç≈SWÇÃà íuÇëIëÇµÇΩÇÃÇ≈ï“èWÉKÅ[ÉhÇâèú */
			onetouch_select = TRUE;
			ten_key_select  = TRUE;
#endif
			break;
		case LEFT_ARROW:
			/* ÉXÉCÉbÉ`ÇñﬂÇ∑ */
			if (OPR_Buf.SoftSwCtrl.SelectSwitch == 0) {
				OPR_Buf.SoftSwCtrl.SelectSwitch = OPR_Buf.SoftSwCtrl.SwitchMax;
			}
			OPR_Buf.SoftSwCtrl.SelectSwitch--;
#if (PRO_MEMORY_SW_EDIT_GUARD == ENABLE)	/* ç∂âEÉJÅ[É\ÉãÉLÅ[Ç≈SWÇÃà íuÇëIëÇµÇΩÇÃÇ≈ï“èWÉKÅ[ÉhÇâèú */
			onetouch_select = TRUE;
			ten_key_select  = TRUE;
#endif
			break;
#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Modify by SMuratec L.Z.W 2003/09/22 */
		case NUMBER:	/* 0 - 9 */
			/* ±ŸÃßÕﬁØƒï\é¶ïîï™ÇëSÇƒêîéöÇ…ïœçX */
			if (key_ck == 0) {
				OPR_Buf.SoftSwCtrl.SelectSwitch = (UBYTE)((key - '0') * 10);
				key_ck = 1;
			}
			else {
				/* A7 -> A5 ÇÃÇÊÇ§Ç»ìÆÇ´ */
				OPR_Buf.SoftSwCtrl.SelectSwitch
				 = (UBYTE)((OPR_Buf.SoftSwCtrl.SelectSwitch / 10) * 10 + (UBYTE)(key - '0'));
				key_ck = 0;
			}
#if (PRO_MEMORY_SW_EDIT_GUARD == ENABLE)	/* ÉeÉìÉLÅ[ÇÃÉKÅ[ÉhÇâèúÇµÇ‹Ç∑ */
			ten_key_select  = TRUE;
#endif
			break;
#else
		case ONETOUCH: /* 0 - 90 */
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L) || (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 
			if (key <= ONETOUCH_10_KEY) {	/* 01 - 10 */
				/* A9 -> C0ÇÃólÇ»ëIëÇçsÇ§ */
				OPR_Buf.SoftSwCtrl.SelectSwitch = (UBYTE)((key - 'A') * 10);
 #if (PRO_MEMORY_SW_EDIT_GUARD == ENABLE)	/* ÉèÉìÉ^ÉbÉ`ÇÃÉKÅ[ÉhÇâèúÇµÇ‹Ç∑ */
				onetouch_select = TRUE;
 #endif
			}
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
			if (key <= ONETOUCH_J_KEY) {	/* A - J */
				/* A9 -> C0ÇÃólÇ»ëIëÇçsÇ§ */
				OPR_Buf.SoftSwCtrl.SelectSwitch = (UBYTE)((key - 'A') * 10);
 #if (PRO_MEMORY_SW_EDIT_GUARD == ENABLE)	/* ÉèÉìÉ^ÉbÉ`ÇÃÉKÅ[ÉhÇâèúÇµÇ‹Ç∑ */
				onetouch_select = TRUE;
 #endif
			}
#endif
			else {
				NackBuzzer();
			}
			break;
		case NUMBER:	/* 0 - 9 */
			/* A7 -> A5 ÇÃÇÊÇ§Ç»ìÆÇ´ */
			OPR_Buf.SoftSwCtrl.SelectSwitch
			 = (UBYTE)((OPR_Buf.SoftSwCtrl.SelectSwitch / 10) * 10 + (UBYTE)(key - '0'));
#if (PRO_MEMORY_SW_EDIT_GUARD == ENABLE)	/* ÉeÉìÉLÅ[ÇÃÉKÅ[ÉhÇâèúÇµÇ‹Ç∑ */
			ten_key_select  = TRUE;
#endif
			break;
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
		case ENTER:
#if (PRO_MEMORY_SW_EDIT_GUARD == ENABLE)	/* ÉèÉìÉ^ÉbÉ`/ÉeÉìÉLÅ[ÇÃóºï˚Ç≈ëIëÇµÇƒÇ¢Ç»Ç¢Ç∆ï“èWÇ≈Ç´Ç‹ÇπÇÒ */
			if ((onetouch_select == FALSE)
			||  (ten_key_select  == FALSE)) {
				NackBuzzer();
				break;
			}
#endif
			/** åàíË */
			return (OPR_CONTINUE);
		case STOP:
		case KEY_TIME_UP:
			/** èIóπ */
			return (OPR_END);
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÉXÉCÉbÉ`ëIëèÛë‘ÇÃï\é¶]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1995/07/18]
	author		:[ç]å˚]
*************************************************************************/
void DisplaySoftSwitchSelect(void)
{
	UBYTE	count;	/*loop*/
	UBYTE	value;

	CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Modify by SMuratec L.Z.W 2003/09/22 */
	FunctionDisplayBufferHigh[0] = (UBYTE)(OPR_Buf.SoftSwCtrl.SelectSwitch / 10 + '0');
#else
	FunctionDisplayBufferHigh[0] = (UBYTE)(OPR_Buf.SoftSwCtrl.SelectSwitch / 10 + 'A');
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
	FunctionDisplayBufferHigh[1] = (UBYTE)(OPR_Buf.SoftSwCtrl.SelectSwitch % 10 + '0');
	FunctionDisplayBufferHigh[2] = ':';
	value = *(OPR_Buf.SoftSwCtrl.SetParameter + OPR_Buf.SoftSwCtrl.SelectSwitch);
	for (count = 0; count < 8; count++) {
		if (value & (0x80 >> count)) {
			FunctionDisplayBufferHigh[count + 10] = '1';
		}
		else {
			FunctionDisplayBufferHigh[count + 10] = '0';
		}
	}
	ClearDisplayHigh();
	DisplayStringHigh(0, FunctionDisplayBufferHigh);
}

/*************************************************************************
	module		:[ÉpÉâÉÅÅ[É^ÇÃÉNÉäÉAÅièâä˙âªÅjÇçsÇ§]
	function	:[
		1.É}ÉVÅ[ÉìÉpÉâÉÅÅ[É^ÅEÉÅÉÇÉäÅ[ÉXÉCÉbÉ`ÇÃÉNÉäÉAÇçsÇ§
	]
	return		:[]
	common		:[OPR_Buf.SoftSwCtrl]
	condition	:[]
	comment		:[

		<<èCê≥óöó>>
			1:è¡ãéämîFéûÇÃÉèÅ[ÉfÉBÉìÉOÇÅuCheck Program/ClearÅvÇ©ÇÁ
			Å@ÅuCheck  Program/EnterÅvÇ…ïœçXÅBÅ@1996/08/30
	]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1995/07/18]
	author		:[ç]å˚]
*************************************************************************/
void ClearSoftSwitch(UBYTE mode)
{
#if (PRO_MULTI_T30_MONITOR == ENABLE) /* By H.Fujimura 1999/04/12 */
	UBYTE	temp;
#endif

	/* è„íiï\é¶ï∂éöóÒ->ÅuClear Memory Switch      Åv*/
	/* Ç±ÇÍÇÕÅuSet Memory Switch    ÅvÇÃéüÇ…íËã`Ç≥ÇÍÇƒÇ¢ÇÈ‹∞√ﬁ®›∏ﬁÇ≈Ç†ÇÈ */

	if (ConfirmKeyInputOperation(OPR_Buf.SoftSwCtrl.ItemWording + OPR_WORDING_LEN,
								 D2W_CheckProgramEnter,								/* "∂∏∆›        ∑…≥/æØƒ " */
								 ENTER,
								 FUNCTION) == CONFIRM_EXEC) {
		switch (mode) {
		case MACHINE_PARAMETER_MODE:
			CMN_InitializeMachineParameter();	/* ã@äÌ ﬂ◊“∞¿ÇÃèâä˙âª */
			break;
		case MEMORY_SWITCH_MODE:
			CMN_InitializeMemorySwitch();		/* “”ÿΩ≤Ø¡ÇÃèâä˙âª */
			break;
		case UNIQ_SWITCH_MODE:			/* ã@éÌå≈óLÉXÉCÉbÉ`ÇÃèâä˙âª 1996/03/06 */

#if (PRO_MULTI_T30_MONITOR == ENABLE) /* By H.Fujimura 1999/04/12 */
			temp = CHK_UNI_MultiT30Monitor();
#endif

			CMN_InitializeUniqSwitch();

#if defined(POPLAR_F)
#else
 #if (PRO_MULTI_T30_MONITOR == ENABLE) /* By H.Fujimura 1999/04/12 */
			if (CHK_UNI_MultiT30Monitor() != temp) {
				InitializeDRAM_Parameter();									/** ÇcÇqÇ`ÇlóÃàÊÇèâä˙âª		*/
				InitializeMachineStatus();									/** É}ÉVÅ[ÉìÉXÉeÅ[É^ÉXÇÃÉNÉäÉA	*/
				SYS_MachineStatus[SYS_RESOURCE_STATUS] |= SYS_PANEL_BUSY;
				SYS_ErasePixMemoryListRequest = 0;							/** í‚ìdî≠ê∂èâä˙âª				*/
				Init_AnyList(LST_POWEROFF_NOTICE);							/** í‚ìdÉXÉeÅ[É^ÉXÇÃÉNÉäÉA		*/
  #if defined(KEISATSU) /* ÉXÉNÉâÉìÉuÉãBITÇ™óéÇøÇƒÇµÇ‹Ç§åè O.Oshima 2005/12/06 */
				InitializeSensor();											/** ÉZÉìÉTÅ[Çèâä˙âª			*/
  #endif
			}
 #endif
#endif
			break;
		case MAINTENANCE_SWITCH_MODE:	/* ï€éÁópÉXÉCÉbÉ`ÇÃèâä˙âª 1996/03/06 */
			CMN_InitMaintenanceSwitch();
		}
		ChildDisplayStringLow(D2W_ClearComplete);	/* " **  ∏ÿ± ∂›ÿÆ≥  **  " */
	}
}

/*************************************************************************
	module		:[É\ÉtÉgÉfÉBÉcÉvì¸óÕ]
	function	:[
		1.ÉÅÉÇÉäÅ[ÉXÉCÉbÉ`ÅAÉ}ÉVÉìÉpÉâÉÅÅ[É^Å[ÇÃï“èWÇçsÇ§
	]
	return		:[ì¸óÕåãâ 	NG=ì¸óÕíÜé~	OK=ì¸óÕÇnÇj]
	common		:[
		SoftSwCtrl:
	]
	condition	:[]
	comment		:[ÇgÇWÇ©ÇÁà⁄êA]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[95/05/20]
	author		:[ç]å˚]
*************************************************************************/
UBYTE SoftDipInput(void)
{
	UBYTE	key;		/* ì¸óÕÉLÅ[ÉfÅ[É^*/
	UBYTE	keytype;

	while (1) {
		DisplayFixedNumberInput();

		/** ÉLÅ[ÇÃéÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case NUMBER:
			if (key <= TEN_1_KEY)
				FixedNumberDataSet(key);
			else
				NackBuzzer();
			break;
		case STOP:			/* ÉXÉgÉbÉvÉLÅ[Å@	  */
		case KEY_TIME_UP:/* ÇPï™ä‘ÉLÅ[ì¸óÕÇ»Çµ */
			CursorOff();
			return (NG);
		case ENTER:	/* ÉZÉbÉgÉLÅ[ */
			CursorOff();
			return (OK);
		case FUNCTION:	/* ÉJÅ[É\ÉãÅ[ÅÑÉLÅ[ */
			CursorRightRotation();
			break;
		case LEFT_ARROW: /* ÉJÅ[É\ÉãÅÉÅ[Å@ÉLÅ[ */
			CursorLeftRotation();
			break;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[É\ÉtÉgÉfÉBÉbÉvì¸óÕÇÃèâä˙ÉfÅ[É^ÉZÉbÉg]
	function	:[
		1.ÉÅÉÇÉäÉXÉCÉbÉ`ÅEÉ}ÉVÉìÉpÉâÉÅÅ[É^Å[ÇÃï“èWópÇÃèâä˙ÉfÅ[É^ÇÉZÉbÉgÅB
		2.OPR_Buf.SoftSwCtrlÇ…ì¸óÕÇ≥ÇÍÇΩÉfÅ[É^Çï∂éöì¸óÕópÇÃÉoÉbÉtÉ@ÅA
		Å@Ç…ï“èWÇ≈Ç´ÇÈå`Ç…ÇµÇƒÉZÉbÉgÇ∑ÇÈÅB
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1995/07/25]
	author		:[ç]å˚]
*************************************************************************/
void SoftDipInputInitial(void)
{
	/* OPR_Buf.SoftSwCtrlÇÃÉfÅ[É^Çï∂éöì¸óÕópÇÃÉoÉbÉtÉ@Ç…ÉZÉbÉgÇ∑ÇÈ */
	ClearCharacterInput();					/* çÏã∆ópÉoÉbÉtÉ@ÇÉNÉäÉA */
	CharacterInput.LcdDisplayPosition = 12;	/* ï\é¶äJénà íuÇÉZÉbÉg */
	CharacterInput.WritePosition 	  = 7; 	/* ï“èWå„í[à íuÇÉZÉbÉg */
	/* èâä˙ílÇï“èWópÇ…ï∂éöóÒå`éÆÇ…ïœä∑ */
	StoreSoftDipToCharacterInput(OPR_Buf.SoftSwCtrl.SetParameter[OPR_Buf.SoftSwCtrl.SelectSwitch]);

	/* ï\é¶ï∂éöóÒÇçÏê¨*/
	CMN_MemorySetNULL(SubTitleDisplayBuffer, OPR_DISPLAY_MAX, ' ');
#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Modify by SMuratec L.Z.W 2003/09/22 */
	SubTitleDisplayBuffer[0] = (UBYTE)(OPR_Buf.SoftSwCtrl.SelectSwitch / 10 + '0');
#else
	SubTitleDisplayBuffer[0] = (UBYTE)(OPR_Buf.SoftSwCtrl.SelectSwitch / 10 + 'A');
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
	SubTitleDisplayBuffer[1] = (UBYTE)(OPR_Buf.SoftSwCtrl.SelectSwitch % 10 + '0');
	CharacterInput.FixedWordingLow = &SubTitleDisplayBuffer[0];
}

/*************************************************************************
	module		:[ÉoÉbÉNÉAÉbÉvÅEÉtÉ@ÉCÉãÉNÉäÉAÅ[ã@î\]
	function	:[
		1.ÉÜÅ[ÉUÅ[ê›íËÉfÅ[É^ÇÃÉNÉäÉA
	]
	return		:[Ç»Çµ]
	common		:[]
	condition	:[]
	comment		:[PRG -*2

				<<èCê≥óöó>>
					1:è¡ãéämîFéûÇÃÉèÅ[ÉfÉBÉìÉOÇÅuCheck Program/ClearÅvÇ©ÇÁ
					Å@ÅuCheck  Program/EnterÅvÇ…ïœçXÅBÅ@1996/08/30

				]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[95/05/22]
	author		:[ç]å˚]
*************************************************************************/
void ClearBackUpFile(void)
{
	UDWORD	long_time;		/* ÉTÉ}Å[É^ÉCÉÄóp */
	TIME_DATA_t bcd_time;		/* ÉTÉ}Å[É^ÉCÉÄóp */

	CMN_LongTimeToBCD(&bcd_time, SYB_CurrentTime);

	if (ConfirmKeyInputOperation(D2W_SF_BackUpFileClear, D2W_CheckProgramEnter, ENTER, FUNCTION) == CONFIRM_EXEC) {
		/* CMN_InitializeBackUpValue();	@* ÉoÉbÉNÉAÉbÉvÇqÇ`ÇlÇÃèâä˙âª */
		/* Å™ Comment by Eguchi 1996/10/08  */

		CMN_InitializeAllBackUpRAM(1);	/** ÉoÉbÉNÉAÉbÉvóÃàÊÇÃì‡ÉÜÅ[ÉUìoò^ÉfÅ[É^ÇÃÇ›Çèâä˙âª 1996/10/08 Eguchi */
										/*ÉÅÉÇÉäÅ[ÉXÉCÉbÉ`ÅAå≈óLÉXÉCÉbÉ`ÅAï€éÁÉXÉCÉbÉ`ÅAã@äÌÉpÉâÉÅÅ[É^ÇÕÉNÉäÉAÇµÇ»Ç¢ */

		/* ÉTÉ}Å[É^ÉCÉÄÇÃÇΩÇﬂÇÃèàóù 1995/12/21 Eguchi */
		if (bcd_time.Year == CurrentTimeInBCD.Year) {
			long_time = CMN_BCD_TimeToLong(&CurrentTimeInBCD);
			SetSummerTimeStatus(long_time);
		}

#if (PRO_MULTI_LINE == ENABLE)
		/* â∫ãLÇÃä÷êîÇÕDPRAMÇÃèâä˙âªÇ™ëSÇƒäÆóπÇµÇƒÇ¢ÇÈÇ±Ç∆Ç™ëÂëOíÒÇÃä÷êîÇ≈Ç∑ÅB
		** by O.Kimoto 1997/03/05
		*/
		MAN_ChangedSRAM_Parameter(OPT_CHANGED_SETTEING_STATUS   |
								  OPT_CHANGED_MEMORY_SWITCH     |
								  OPT_CHANGED_UNI_SWITCH        |
								  OPT_CHANGED_MENTE_SWITCH      |
								  OPT_CHANGED_DRD_TEADCHING_BUF |
								  OPT_CHANGED_MACHINE_PARA);
#endif
#if defined (KEISATSU)		/* åxé@FAX DVT_ID7 Added by SMuratec K.W.Q 2005/10/31 */
		SetKeisatsuSettings();
		AttributeTimeoutCheck = 0;
		NCU_HdstShift();
#endif
		ChildDisplayStringLow(D2W_ClearComplete);	/* " **  ∏ÿ± ∂›ÿÆ≥  **  " */
	}
}

/*************************************************************************
	module		:[ÉoÉbÉNÉAÉbÉvÅEÉtÉ@ÉCÉãÅEÉIÅ[ÉãÉNÉäÉAÅ[ã@î\]
	function	:[
		1.ÉÜÅ[ÉUÅ[ê›íËÉfÅ[É^ÉNÉäÉA
		Å@ÉÅÉÇÉäÅ[ÉXÉCÉbÉ`èâä˙âª
		Å@ã@éÌå≈óLÉXÉCÉbÉ`èâä˙âª
		Å@É}ÉVÅ[ÉìÉpÉâÉÅÅ[É^Å[èâä˙âª
		Å@É}ÉVÅ[ÉìÉXÉeÅ[É^ÉXÅAÉZÉìÉTÅ[ÉXÉeÅ[É^ÉXÇÃèâä˙âª
	]
	return		:[Ç»Çµ]
	common		:[
		SYS_MachineStatus:
	]
	condition	:[]
	comment		:[PRG-*3
				  ãÀÅEäëÇ…Ç†ÇÌÇπÇƒÉ}ÉVÅ[ÉìÉXÉeÅ[É^ÉXÇÃÉNÉäÉAÅEÉZÉìÉTÅ[ÇÃÉNÉäÉAÇé¿çsÅB
				Å@Ç‹ÇΩÇ«ÇÒÇ»èÛë‘Ç≈Ç‡ÉâÉÄÉNÉäÉAÇ≈Ç´ÇÈÇÊÇ§Ç…ïœçX 1995/12/05

				<<èCê≥óöó>>
					1:è¡ãéämîFéûÇÃÉèÅ[ÉfÉBÉìÉOÇÅuCheck Program/ClearÅvÇ©ÇÁ
					Å@ÅuCheck  Program/EnterÅvÇ…ïœçXÅBÅ@1996/08/30
	]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[95/05/22]
	author		:[ç]å˚]
*************************************************************************/
void ClearAllBackUpFile(void)
{
	UDWORD	long_time;		/* ÉTÉ}Å[É^ÉCÉÄóp */
	TIME_DATA_t bcd_time;	/* ÉTÉ}Å[É^ÉCÉÄóp */

#if defined(POPLAR_F)	/* 2000/03/01 Y.Murata */
	/* ÉpÉèÅ[ÇnÇméûÇÃÉEÉHÅ[ÉÄÉAÉbÉvíÜÇÕÅAÉLÅ[ëÄçÏã÷é~ */
	if (SYS_MachineStatus[SYS_MACHINE_STATUS_RESERVE] & SYS_PRINTER_POWER_ON) {
		NackBuzzer();
		return;
	}
#endif

#if (PRO_FBS == ENABLE)
	if ((SYB_ScannerTransportMode == TRUE)
	 && (SYS_MachineStatus[SYS_RESOURCE_STATUS] | SYS_SCANNER_BUSY)) { /* óAëóÉÇÅ[ÉhÇÃéûÇÕÇqÇ`ÇlÉIÅ[ÉãÉNÉäÉAÇÕÇ∂Ç≠ */
		NackBuzzer();
		return;
	}
#endif

	CMN_LongTimeToBCD(&bcd_time, SYB_CurrentTime); /* ÉTÉ}Å[É^ÉCÉÄóp 1995/12/21 Eguchi */

	if (ConfirmKeyInputOperation(D2W_SF_AllClear, D2W_CheckProgramEnter, ENTER, FUNCTION) == CONFIRM_EXEC) {

#if (0)	/* ANKÇ‡KANJIÇ…çáÇÌÇπÇ‹Ç∑ by K.Watanabe 1998/12/04 */
//#if (PRO_KEYPANEL == PANEL_HINOKI)
#endif
		if (SYS_MachineStatus[SYS_RESOURCE_STATUS] & ~SYS_PANEL_BUSY) {	/** ã@äÌìÆçÏíÜ */
			NackBuzzer();
			return;
		}
#if (0)
//#endif
#endif

 #if (PRO_ALLRAMCLR_WO_MCP == ENABLE) /* ALL RAM ClearÇÃç€ÅAã@äÌÉpÉâÉÅÅ[É^ÇÃèâä˙âªÇÇµÇ»Ç¢ By S.Fukui Oct.27,1998 */
		CMN_InitializeAllBackUpRAM(2);	/** ã@äÌÉpÉâÉÅÅ[É^èâä˙âªÇèúÇ≠ÉoÉbÉNÉAÉbÉvóÃàÊëSÇƒÇèâä˙âª */
 #else
		CMN_InitializeAllBackUpRAM(0);	/** ÉoÉbÉNÉAÉbÉvóÃàÊëSÇƒÇèâä˙âª */
 #endif
		InitializeMachineStatus();		/** É}ÉVÅ[ÉìÉXÉeÅ[É^ÉXÉNÉäÉA */
		SYS_MachineStatus[SYS_RESOURCE_STATUS] |= SYS_PANEL_BUSY;	/** ÉIÉyÉåÅ[ÉVÉáÉìíÜÉZÉbÉg */
		InitializeSensor();				/** ÉZÉìÉTÅ[èâä˙âª */

		/* ÉTÉ}Å[É^ÉCÉÄÇÃÇΩÇﬂÇÃèàóù 1995/12/21 Eguchi */
		if (bcd_time.Year == CurrentTimeInBCD.Year) {
			long_time = CMN_BCD_TimeToLong(&CurrentTimeInBCD);
			SetSummerTimeStatus(long_time);
		}
		/* WriteCurrentTime();	@** ìoò^Ç≥ÇÍÇΩÇaÇbÇcéûçèÇÇqÇsÇbÇ…èëÇ´çûÇﬁ ->ïsóvÇ»ÇÕÇ∏ */

#if (PRO_MULTI_LINE == ENABLE)
		/* â∫ãLÇÃä÷êîÇÕDPRAMÇÃèâä˙âªÇ™ëSÇƒäÆóπÇµÇƒÇ¢ÇÈÇ±Ç∆Ç™ëÂëOíÒÇÃä÷êîÇ≈Ç∑ÅB
		** by O.Kimoto 1997/03/05
		*/
		MAN_ChangedSRAM_Parameter(OPT_CHANGED_SETTEING_STATUS   |
								  OPT_CHANGED_MEMORY_SWITCH     |
								  OPT_CHANGED_UNI_SWITCH        |
								  OPT_CHANGED_MENTE_SWITCH      |
								  OPT_CHANGED_DRD_TEADCHING_BUF |
								  OPT_CHANGED_MACHINE_PARA);
#endif
#if defined (KEISATSU)		/* åxé@FAX DVT_ID7 Added by SMuratec K.W.Q 2005/10/31 */
		SetKeisatsuSettings();
		AttributeTimeoutCheck = 0;
		NCU_HdstShift();
#endif

		ChildDisplayStringLow(D2W_ClearComplete);	/* " **  ∏ÿ± ∂›ÿÆ≥  **  " */
	}
}

/*************************************************************************
	module		:[ã@éÌå≈óLÉXÉCÉbÉ`ÉÇÅ[Éh]
	function	:[
		1.ã@î\+Åñ+ÇS
		2.ã@éÌå≈óLÉXÉCÉbÉ`ÇÃÉZÉbÉgÅ^ÉNÉäÉAÇé¿çs
	]
	return		:[]
	common		:[SoftSwCtrl]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1995/07/18]
	author		:[ç]å˚]
*************************************************************************/
void UniqSwitchMode(void)
{
	UBYTE	mode;

	/* ÉfÅ[É^ÇÃÉZÉbÉg */
	OPR_Buf.SoftSwCtrl.ItemWording  = D2W_SF_UniqSwitchSet;			/* [Set Uniq Switc      ] */
	OPR_Buf.SoftSwCtrl.SetParameter = &SYB_MachineUniqSwitch[0];	/* œº∞› ﬂ◊“∞¿ */
	OPR_Buf.SoftSwCtrl.SwitchMax    = SYS_MEMORY_SWITCH_MAX;		/* ç≈ëÂÇPÇOÇOå¬ */
	OPR_Buf.SoftSwCtrl.SelectSwitch = 0;							/* èâä˙ílÇOÅiÇ`ÇOÅjSATSUKI2Ç≈ÇÕÅiÇOÇOÅj*/

	/* ï“èWÇ∑ÇÈÇ©ÉNÉäÉAÇ∑ÇÈÇ©ëIëÇ≥ÇπÇÈ */
	mode = SelectSetClearMode();

	if (mode == PARAMETER_SET) {		/* ï“èWÇÃèÍçá */
		SetSoftSwitch();
#if (PRO_MULTI_LINE == ENABLE)
		MAN_ChangedSRAM_Parameter(OPT_CHANGED_UNI_SWITCH);

		/* ï\é¶ÇÇPÇ…Ç∑ÇÈÇΩÇﬂí«â¡ÅiÉ}ÉãÉ`ï\é¶ópÅj */
		if (CHK_UNI_MultiDisplayTime() == 0) {
			OPR_MultiDisplayFlag = 0;
		}
#endif
	}
	else if (mode == PARAMETER_CLEAR) {	/* ÉNÉäÉAÇÃèÍçá */
		ClearSoftSwitch(UNIQ_SWITCH_MODE);
#if (PRO_MULTI_LINE == ENABLE)
		MAN_ChangedSRAM_Parameter(OPT_CHANGED_UNI_SWITCH);

		/* ï\é¶ÇÇPÇ…Ç∑ÇÈÇΩÇﬂí«â¡ÅiÉ}ÉãÉ`ï\é¶ópÅj */
		if (CHK_UNI_MultiDisplayTime() == 0) {
			OPR_MultiDisplayFlag = 0;
		}
#endif
	}
	else {								/* èIóπOPR_END */
		return;
	}
}

/*************************************************************************
	module		:[T30ÉÇÉjÉ^Å[ÅEÉvÉäÉìÉgã@î\]
	function	:[
		1.T30ÉÇÉjÉ^Å[ÅEÉvÉäÉìÉgÇÃã@î\Çé¿çsÇ∑ÇÈÅB
	]
	return		:[Ç»Çµ]
	common		:[
		FaxComPerformingFlag
		SYB_T30Monitor
	]
	condition	:[]
	comment		:[PRG-*5]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[95/05/22]
	author		:[ç]å˚]
*************************************************************************/
void T30MonitorPrintOperation(void)
{
	UBYTE	print_ok;	/* 1:T30ÉÇÉjÉ^Å[ÉvÉäÉìÉgÇ∑ÇÈÅB0:T30ÉÇÉjÉ^Å[ÉvÉäÉìÉgÇµÇ»Ç¢*/

	print_ok = FALSE;

	if (CheckPrintOperationEnable() == FALSE) {	/* ÉvÉäÉìÉgïsâ¬î\ */
		return;
	}

#if defined(POPLAR_F)
	DisplayStringHigh(0, D2W_SF_T30MonitorPrint);

	/* ÇsÇRÇOÉÇÉjÉ^Å[î‘çÜì¸óÕ */
	if (CHK_UNI_MultiT30Monitor()) {
		if (NumberInput(OPR_T30_MONITOR_NUMBER_INPUT) == OK) {
			if (CheckCharacterInputEmpty() == TRUE) { /** ñ¢ì¸óÕ */
				LST_T30ConfNumber = 0xFF;
			}
			else {
				LST_T30ConfNumber = (UBYTE)CharacterInputToNumber();
				if (SYB_T30MonitorDRAM_Status[LST_T30ConfNumber] != 1) {
					NackBuzzer();
					return;
				}
			}
		}
		else {
			return;
		}
	}
	else {
		LST_T30ConfNumber = 0xFF;
	}

#else
 #if (PRO_MULTI_T30_MONITOR == ENABLE) /* By H.Fujimura 1999/04/09 */
	if (CHK_UNI_MultiT30Monitor()) {
		DisplayStringHigh(0, D2W_SF_T30MonitorPrint);

		/* ÇsÇRÇOÉÇÉjÉ^Å[î‘çÜì¸óÕ */
		if (NumberInput(OPR_T30_MONITOR_NUMBER_INPUT) == OK) {
			if (CheckCharacterInputEmpty() == TRUE) { /** ñ¢ì¸óÕ */
				LST_T30ConfNumber = 0xFF;
			}
			else {
				LST_T30ConfNumber = (UBYTE)CharacterInputToNumber();
			}
		}
		else {
			return;
		}
	}
 #endif
#endif

	/*----------------------------------------*/
	/* ÇsÇRÇOÉÇÉjÉ^Ç™ÉvÉäÉìÉgâ¬î\Ç©ÇÃÉ`ÉFÉbÉN */
	/*----------------------------------------*/
#if (PRO_MULTI_LINE == DISABLE)
 #if (0) /* 1996/07/04 Eguchi */
 //		/* SYB_T30Monitor.ReadPointerÇçXêVÇµÇƒÇ¢ÇÈèäÇÕÇ«Ç±Ç…Ç‡Ç»Ç¢ÇΩÇﬂÅAèåèïœçX */
 //	if ((FaxComPerformingFlag == YES || SYB_T30Monitor.JournalType != SYS_T30_EMPTY)
 //	&&	(SYB_T30Monitor.ReadPointer != SYB_T30Monitor.WritePointer)) {
 //		/* í êMíÜÇ‹ÇΩÇÕT30ÉfÅ[É^Ç™ë∂ç›ÇµÅAÇ©Ç¬èëÇ´çûÇ›à íuÇ∆ì«Ç›èoÇµà íuÇ™àŸÇ»ÇÈÅBÅièëÇ¢ÇƒÇ¢Ç»Ç¢ÉfÅ[É^Ç™Ç†ÇÈÅj */
 //		print_ok = TRUE;
 //	}
 #endif
 #if (PRO_MULTI_T30_MONITOR == ENABLE) /* By H.Fujimura 1999/04/09 */
	if (CHK_UNI_MultiT30Monitor() && LST_T30ConfNumber != 0xFF) {
		if (((SYS_T30Monitor + LST_T30ConfNumber)->JournalType != SYS_T30_EMPTY)
		 && ((SYS_T30Monitor + LST_T30ConfNumber)->WritePointer != 0)) {
			/* í êMíÜÇ‹ÇΩÇÕT30ÉfÅ[É^Ç™ë∂ç›ÇµÅAÇ©Ç¬èëÇ´çûÇ›à íuÇ∆ì«Ç›èoÇµà íuÇ™àŸÇ»ÇÈÅBÅièëÇ¢ÇƒÇ¢Ç»Ç¢ÉfÅ[É^Ç™Ç†ÇÈÅj */
			print_ok = TRUE;
		}
	}
	else {
		if ((FaxComPerformingFlag == YES || SYB_T30Monitor.JournalType != SYS_T30_EMPTY)
		 && (SYB_T30Monitor.WritePointer != 0)) {
			/* í êMíÜÇ‹ÇΩÇÕT30ÉfÅ[É^Ç™ë∂ç›ÇµÅAÇ©Ç¬èëÇ´çûÇ›à íuÇ∆ì«Ç›èoÇµà íuÇ™àŸÇ»ÇÈÅBÅièëÇ¢ÇƒÇ¢Ç»Ç¢ÉfÅ[É^Ç™Ç†ÇÈÅj */
			print_ok = TRUE;
		}
	}
 #else
	if ((FaxComPerformingFlag == YES || SYB_T30Monitor.JournalType != SYS_T30_EMPTY)
	 && (SYB_T30Monitor.WritePointer != 0)) {
		/* í êMíÜÇ‹ÇΩÇÕT30ÉfÅ[É^Ç™ë∂ç›ÇµÅAÇ©Ç¬èëÇ´çûÇ›à íuÇ∆ì«Ç›èoÇµà íuÇ™àŸÇ»ÇÈÅBÅièëÇ¢ÇƒÇ¢Ç»Ç¢ÉfÅ[É^Ç™Ç†ÇÈÅj */
		print_ok = TRUE;
	}
 #endif
#else
	/* éËÇ≈ÉvÉäÉìÉgÇ∑ÇÈéûÇÃOPRÇÃãNìÆÇ≈ÇÕäÑÇËçûÇ›ã÷é~Ç¢ÇÁÇ»Ç¢ */
	if (CHK_GetT30Sign() != 0xFF) {
		print_ok = TRUE;
	}
#endif	/* (PRO_MULTI_LINE == DISABLE) */

	/*----------------------------*/
	/* ÉÅÉÇÉäÉ_ÉìÉvóvãÅÇÃÉ`ÉFÉbÉN */
	/*----------------------------*/
	if (!print_ok) {	/* ÇsÇRÇOÉÇÉjÉ^ÇÉvÉäÉìÉgÇµÇ»Ç¢éû */
		if ((SYB_MaintenanceSwitch[MNT_SW_A7] & MEM_INDEX_FAT_DUMP)
		 || (SYB_MaintenanceSwitch[MNT_SW_A7] & ITORON_MEMORY_DUMP)) {
			/* ÉÅÉÇÉäÅ[É_ÉìÉvóvãÅÇ™Ç†ÇÈÅBàΩÇ¢ÇÕÉÇÉjÉ^Å[èÓïÒÅiÉXÉ^ÉbÉNÇÃÉ_ÉìÉvÅjÉvÉäÉìÉgóvãÅÇ™Ç†ÇÈ */
			print_ok = TRUE;
		}
	}

	if (print_ok) {	/* ÇsÇRÇOÉÇÉjÉ^Ç©ÅAÉÅÉÇÉäÉ_ÉìÉvÇÉvÉäÉìÉgÇ∑ÇÈéû */
		FinalListPrintOperation(LST_T30MONITOR);
	}
	else {
		NackBuzzer();
#if (PRO_MULTI_T30_MONITOR == ENABLE) /* By H.Fujimura 1999/04/20 */
		if (CHK_UNI_MultiT30Monitor()) {
			OPR_ChildErrorFlag = NO_COMMAND_RESULT_ERROR;	/* "¬≥º›πØ∂ ±ÿœæ›       " */
		}
#endif
	}
}

#if (PRO_PRINT_TYPE == LED)	/* 1997/07/10 Y.Matsukuma */
/*************************************************************************
	module		:[ÉvÉäÉìÉ^ÉÅÉìÉeÉiÉìÉXÉIÉyÉåÅ[ÉVÉáÉì]
	function	:[
		1.åä∑ÉJÉEÉìÉ^ÉZÉbÉgÉIÉyÉåÅ[ÉVÉáÉìÇ∆ÉTÅ[ÉrÉXÉRÅ[ÉãÉIÉyÉåÅ[ÉVÉáÉìÇÃëIëÇçsÇ§
		2.ã@î\ÉLÅ[Ç≈åä∑ÉJÉEÉìÉ^ÉZÉbÉgÉIÉyÉåÅ[ÉVÉáÉìÇ∆ÉTÅ[ÉrÉXÉRÅ[ÉãÉIÉyÉåÅ[ÉVÉáÉìÇêÿÇËë÷Ç¶ÅB
		3.ÉZÉbÉgÉLÅ[Ç≈ÉIÉyÉåÅ[ÉVÉáÉìÇÃéÌóﬁÇëIëÇµÇƒäeÉIÉyÉåÅ[ÉVÉáÉìÇ…ï™äÚ
		4.ÉXÉgÉbÉvÉLÅ[ñîÇÕÉLÅ[ë“ÇøÉ^ÉCÉÄÉIÅ[ÉoÅ[Ç≈èIóπ
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/07/09]
	author		:[åKå¥î¸ãI]
*************************************************************************/
void PrintMaintenance(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	type;		/* 0:åä∑∂≥›¿æØƒ 1:ª∞ÀﬁΩ∫∞Ÿ */
	UBYTE	ret;

	type = 0;
	/* â∫íiì_ñ≈ï\é¶ */
	FlashDisplayStringLow(D2W_ProgramEnter);				/* "            ∑…≥/æØƒ " */

	while (1) {
		/* è„íiï\é¶ */
		/* "∫≥∂› ∂≥›¿ æØƒ        " */
		/* "ª∞ÀﬁΩ∫∞Ÿ             " */
		CMN_StringCopy(FunctionDisplayBufferHigh, (D2W_SF_ReplaceCountSet + (OPR_WORDING_LEN * type)));
		DisplayStringHigh(0, FunctionDisplayBufferHigh);

		/* ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[Å^âEñÓàÛÉLÅ[*/
		case LEFT_ARROW:	/* ç∂ñÓàÛÉLÅ[ */
			type ^= 0x01;
			break;
		case STOP:			/* í‚é~ÉLÅ[ */
		case KEY_TIME_UP:
			return;
		case ENTER:			/* ÉZÉbÉgÉLÅ[ */
			/* èàóùé¿çs */
			if (type == 0) {
				ReplaceCountSetOperation();		/* åä∑ÉJÉEÉìÉ^ÉZÉbÉg */
			}
			else {
				ServiceCallOperation();			/* ÉTÅ[ÉrÉXÉRÅ[Éã */
			}
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[åä∑ÉJÉEÉìÉ^ÉZÉbÉgÉIÉyÉåÅ[ÉVÉáÉì]
	function	:[
		1.íËíÖã@åä∑ÉIÉyÉåÅ[ÉVÉáÉìÇ∆ì]é ÉçÅ[ÉâÅ[åä∑ÉIÉyÉåÅ[ÉVÉáÉìÇÃëIëÇçsÇ§
		2.ã@î\ÉLÅ[Ç≈íËíÖã@åä∑ÉIÉyÉåÅ[ÉVÉáÉìÇ∆ì]é ÉçÅ[ÉâÅ[åä∑ÉIÉyÉåÅ[ÉVÉáÉìÇêÿÇËë÷Ç¶ÅB
		3.ÉZÉbÉgÉLÅ[Ç≈ÉIÉyÉåÅ[ÉVÉáÉìÇÃéÌóﬁÇëIëÇµÇƒäeÉIÉyÉåÅ[ÉVÉáÉìÇ…ï™äÚ
		4.ÉXÉgÉbÉvÉLÅ[ñîÇÕÉLÅ[ë“ÇøÉ^ÉCÉÄÉIÅ[ÉoÅ[Ç≈èIóπ
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/07/09]
	author		:[åKå¥î¸ãI]
*************************************************************************/
void ReplaceCountSetOperation(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	type;		/* 0:√≤¡¨∏∑ ∫≥∂› 1:√›º¨€∞◊∞ ∫≥∂› */

	type = 0;

	while (1) {
		/* è„íiï\é¶ */
		/* "√≤¡¨∏∑ ∫≥∂›          " */
		/* "√›º¨€∞◊∞ ∫≥∂›        " */
		CMN_StringCopy(FunctionDisplayBufferHigh, (D2W_SF_FuserReplace + (OPR_WORDING_LEN * type)));
		DisplayStringHigh(0, FunctionDisplayBufferHigh);
		/* â∫íiì_ñ≈ï\é¶ */
		FlashDisplayStringLow(D2W_ProgramEnter);	/* "            ∑…≥/æØƒ " */

		/* ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[Å^âEñÓàÛÉLÅ[*/
		case LEFT_ARROW:	/* ç∂ñÓàÛÉLÅ[ */
			type ^= 0x01;
			break;
		case STOP:			/* í‚é~ÉLÅ[ */
		case KEY_TIME_UP:
			return;
		case ENTER:			/* ÉZÉbÉgÉLÅ[ */
			/* èàóùé¿çs */
			if (type == 0) {	/* íËíÖã@åä∑ */
				if (ConfirmKeyInputOperation(D2W_SF_FuserReplace,		/* "√≤¡¨∏∑ ∫≥∂›         " */
											 D2W_CheckProgramEnter,		/* "∂∏∆›        ∑…≥/æØƒ " */
											 ENTER,
											 FUNCTION) == CONFIRM_EXEC) {
					SYB_PrinterLifeMonitor.FuserReplaceCount++;
					SYB_PrinterLifeMonitor.FuserLifeCount = 0;
					ChildDisplaySetCompleted(D2W_SF_FuserReplace);		/* "√≤¡¨∏∑ ∫≥∂›         " */
				}
			}
			else {				/* ì]é ÉçÅ[ÉâÅ[åä∑ */
				if (ConfirmKeyInputOperation(D2W_SF_TransferReplace,	/* "√›º¨€∞◊∞ ∫≥∂›       " */
											 D2W_CheckProgramEnter,		/* "∂∏∆›        ∑…≥/æØƒ " */
											 ENTER,
											 FUNCTION) == CONFIRM_EXEC) {
					SYB_PrinterLifeMonitor.TransferReplaceCount++;
					SYB_PrinterLifeMonitor.TransferLifeCount = 0;
					ChildDisplaySetCompleted(D2W_SF_TransferReplace);	/* "√›º¨€∞◊∞ ∫≥∂›       " */
				}
			}
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÉTÅ[ÉrÉXÉRÅ[ÉãÉIÉyÉåÅ[ÉVÉáÉì]
	function	:[
		1.ÉGÉâÅ[êîÇéÊìæÇµï\é¶
		2.ã@î\ÉLÅ[Ç≈à»â∫ÇÃÉGÉâÅ[ï\é¶Ç™çsÇÌÇÍÇÈÅB
			"À∞¿∞ ¥◊∞            "	0x0001
			"ª∞–Ω¿ ¿ﬁ›æ›         "	0x0002
			"ª∞–Ω¿ ¿›◊∏          "	0x0004
			"∑≈≤ Ãß› ¥◊∞         "	0x0008
			"Rx”∞¿∞ ¥◊∞          "	0x0010
			"ƒﬁ◊—À≠∞Ωﬁ ¥◊∞       "	0x0020
			"√ﬁ›πﬁ› Ãß› ¥◊∞      "	0x0040
			"∫≥±¬ À≠∞Ωﬁ ¿ﬁ›æ›    "	0x0080
		3.ÉXÉgÉbÉvÉLÅ[ñîÇÕÉLÅ[ë“ÇøÉ^ÉCÉÄÉIÅ[ÉoÅ[Ç≈èIóπ
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/07/09]
	author		:[åKå¥î¸ãI]
*************************************************************************/
void ServiceCallOperation(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	count;		/* ÉGÉâÅ[êî */
	UBYTE	pos;		/* éQè∆èÍèä */
	UBYTE	i;			/* Ÿ∞Ãﬂ */

	pos		= 0;
	SearchServiceCallRight( &pos );
	while (1) {
	count	= 0;
		/* ÉGÉâÅ[åèêîéÊìæ */
		for( i = 0; i < OPR_LIFE_ERROR_MAX; i++ ){
			if(((SYB_PrinterLifeMonitor.ErrorStatus >> i) & 0x0001) != 0x0000 ){
				count++;
			}
		}
		/* è„íiï\é¶ */
		CMN_StringCopy(FunctionDisplayBufferHigh, D2W_SF_ServiceCallCount);
		FunctionDisplayBufferHigh[18] = ChangeNumberToASC_Code((UBYTE)count);
		DisplayStringHigh(0, FunctionDisplayBufferHigh);
		CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
		if( count != 0 ){
			CMN_StringCopy(FunctionDisplayBufferLow, (D2W_SF_HeatTrouble + (OPR_WORDING_LEN * pos)));
		}
		DisplayStringLow(0, FunctionDisplayBufferLow);

		/* ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[Å^âEñÓàÛÉLÅ[*/
			SearchServiceCallRight( &pos );
			break;
		case LEFT_ARROW:	/* ç∂ñÓàÛÉLÅ[ */
			SearchServiceCallLeft( &pos );
			break;
		case STOP:			/* í‚é~ÉLÅ[ */
		case KEY_TIME_UP:
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÉTÅ[ÉrÉXÉRÅ[ÉãåüçıÅiâEñÓàÛÅj]
	function	:[
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/07/09]
	author		:[åKå¥î¸ãI]
*************************************************************************/
void 	SearchServiceCallRight(
				UBYTE	*Pos)
{
	UBYTE	i;
	UBYTE	position;

	position	= *Pos;
	for( i = 0; i < OPR_LIFE_ERROR_MAX; i++ ){
		if( position+1 >= OPR_LIFE_ERROR_MAX ){
			position	= 0;
		}
		else{
			position++;
		}
		if(((SYB_PrinterLifeMonitor.ErrorStatus >> position) & 0x0001) != 0x0000){
			break;
		}
	}
	*Pos	= position;
}

/*************************************************************************
	module		:[ÉTÅ[ÉrÉXÉRÅ[ÉãåüçıÅiç∂ñÓàÛÅj]
	function	:[
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/07/09]
	author		:[åKå¥î¸ãI]
*************************************************************************/
void 	SearchServiceCallLeft(
				UBYTE	*Pos)
{
	UBYTE	i;
	UBYTE	position;

	position	= *Pos;
	for( i = 0; i < OPR_LIFE_ERROR_MAX; i++ ){
		if( position == 0 ){
			position	= OPR_LIFE_ERROR_MAX - 1;
		}
		else{
			position--;
		}
		if(((SYB_PrinterLifeMonitor.ErrorStatus >> position) & 0x0001) != 0x0000){
			break;
		}
	}
	*Pos	= position;
}
#endif /* (PRO_PRINT_TYPE == LED) END */

/*************************************************************************
	module		:[ÉtÉ@ÉìÉNÉVÉáÉìÉäÉXÉgÅEÉRÅ[Éã]
	function	:[
		1.ã@î\ÉäÉXÉgÇÃàÛéöÇçsÇ§
	]
	return		:[Ç»Çµ]
	common		:[]
	condition	:[]
	comment		:[PRG-*8]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[95/05/22]
	author		:[ç]å˚]
*************************************************************************/
void FunctionListPrintOperation(void)
{
	FinalListPrintOperation(LST_FUNCTION_LIST);
}

/*************************************************************************
	module		:[ÉTÅ[ÉrÉXÅEÉtÉ@ÉìÉNÉVÉáÉìÅiÉeÉXÉgÉtÉ@ÉìÉNÉVÉáÉìÅj]
	function	:[
		1.ÉTÅ[ÉrÉXÅEÉtÉ@ÉìÉNÉVÉáÉìÇÃíÜÇÃÉeÉXÉgÉtÉ@ÉìÉNÉVÉáÉìÇÃçÄñ⁄ÇÃã@î\Çé¿çsÇ∑ÇÈ
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG-*9]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[95/05/22]
	author		:[ç]å˚]
*************************************************************************/
void ServiceFunctionSetting(void)
{
	BYTE	fnc_number;
	UBYTE	keytype;

	/* èâä˙ï\é¶ */
	FlashDisplayStringLow(D2W_ProgramEnter);	/* "            ∑…≥/æØƒ " */
	fnc_number = 0;

	while (keytype != ENTER) {
		/** ï\é¶èàóù */
		DisplayStringHigh(0, D2W_SF_LifeMonitor + (OPR_WORDING_LEN * fnc_number));

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keytype = GetInputKeyType();

		switch (keytype) { /**éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóù */

		case STOP:
			/** èIóπ */
			return;

		case FUNCTION: /* ÅÑÅ@ÉLÅ[*/
			/** çÄñ⁄ÇêiÇﬂÇÈ */
			fnc_number++;
#if defined (KEISATSU) /* åxé@FAX 05/10/05 êŒã¥ê≥òa */
			if (fnc_number == 2) { /* çœÉXÉ^ÉìÉvÇÕÇ»Ç¢ */
				fnc_number = 3;
			}
#endif

#if (PRO_KEYPANEL == PANEL_HINOKI)
			/* ÇgÇhÇmÇnÇjÇhÇÕå¥çeîrèoÉeÉXÉgÇÕóLÇËÇ‹ÇπÇÒ by O.Kimoto 1999/02/09 */
			if (fnc_number > 3) { /*êiÇﬂÇ∑Ç¨ÇΩèÍçáÇ‡Ç∆Ç…ñﬂÇ∑*/
				fnc_number = 0;
			}
#elif (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 
			/* (F250Ç…ÇÕçœÇ›ÉXÉ^ÉìÉvÇ∆å¥çeîrèoÉeÉXÉgÇÕÇ†ÇËÇ‹ÇπÇÒÅB) by SMuratec L.Z.W 2003/11/11 */
  #if (1)	/* ÉtÉ@ÉìÉNÉVÉáÉìÇmÇèÇÃïœçX by Y.Kano 2003/12/26 */
			if (fnc_number > 3) { /*êiÇﬂÇ∑Ç¨ÇΩèÍçáÇ‡Ç∆Ç…ñﬂÇ∑*/
  #else
**			if (fnc_number > 2) { /*êiÇﬂÇ∑Ç¨ÇΩèÍçáÇ‡Ç∆Ç…ñﬂÇ∑*/
  #endif
				fnc_number = 0;
			}
#else
			if (fnc_number > 4) { /*êiÇﬂÇ∑Ç¨ÇΩèÍçáÇ‡Ç∆Ç…ñﬂÇ∑*/
				fnc_number = 0;
			}
#endif

			break;
		case LEFT_ARROW:/* ÅÉÅ@ÉLÅ[ */
			/** çÄñ⁄ÇñﬂÇ∑ */
			fnc_number--;
#if defined (KEISATSU) /* åxé@FAX 05/10/05 êŒã¥ê≥òa */
			if (fnc_number == 2) { /* çœÉXÉ^ÉìÉvÇÕÇ»Ç¢ */
				fnc_number = 1;
			}
#endif
#if (PRO_KEYPANEL == PANEL_HINOKI)
			/* ÇgÇhÇmÇnÇjÇhÇÕå¥çeîrèoÉeÉXÉgÇÕóLÇËÇ‹ÇπÇÒ by O.Kimoto 1999/02/09 */
			if (fnc_number < 0) {
				fnc_number = 3;
			}
#elif (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 
			/* (F250Ç…ÇÕçœÇ›ÉXÉ^ÉìÉvÇ∆å¥çeîrèoÉeÉXÉgÇÕÇ†ÇËÇ‹ÇπÇÒÅB) by SMuratec L.Z.W 2003/11/11 */
			if (fnc_number < 0) {
  #if (1)			/* ÉtÉ@ÉìÉNÉVÉáÉìÇmÇèÇÃïœçX by Y.Kano 2003/12/26 */
				fnc_number = 3;
  #else
**				fnc_number = 2;
  #endif
			}
#else
			if (fnc_number < 0) {
				fnc_number = 4;
			}
#endif
			break;
		case ENTER:
			break;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}

#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L) /* || (PRO_KEYPANEL == PANEL_HINOKI) ÇgÇhÇmÇnÇjÇhÇÕå¥çeîrèoÉeÉXÉgÇÕóLÇËÇ‹ÇπÇÒ by O.Kimoto 1999/02/09 */
	switch (fnc_number) {
	case 0:		/* ÉâÉCÉtÉÇÉjÉ^Å[ */
		SF_InnerStatusOperation();
		break;
	case 1:		/* ÉeÉXÉgÉpÉ^Å[ÉìÉvÉäÉìÉg */
		SF_TestPatternOperation();
		break;
	case 2:		/* ÉXÉ^ÉìÉvÉeÉXÉg */
		SF_StampTest();
		break;
	case 3:		/* å¥çeîrèoÉeÉXÉg */
		SF_DocumentFeedOutTest();
		break;
	case 4:		/* ÉVÉFÅ[ÉfÉBÉìÉOéÊÇËçûÇ› */
		SF_ShadingOperation();
		break;
	default:
		NackBuzzer();
		break;
	}
#elif (PRO_KEYPANEL == PANEL_HINOKI) 
	/* ÇgÇhÇmÇnÇjÇhÇÕå¥çeîrèoÉeÉXÉgÇÕóLÇËÇ‹ÇπÇÒ by O.Kimoto 1999/02/09 */
	switch (fnc_number) {
	case 0:		/* ÉâÉCÉtÉÇÉjÉ^Å[ */
		SF_InnerStatusOperation();
		break;
	case 1:		/* ÉeÉXÉgÉpÉ^Å[ÉìÉvÉäÉìÉg */
		SF_TestPatternOperation();
		break;
	case 2:		/* ÉXÉ^ÉìÉvÉeÉXÉg */
		SF_StampTest();
		break;
	case 3:		/* ÉVÉFÅ[ÉfÉBÉìÉOéÊÇËçûÇ› */
		SF_ShadingOperation();
		break;
	default:
		NackBuzzer();
		break;
	}
#elif (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 
	/* (F250Ç…ÇÕçœÇ›ÉXÉ^ÉìÉvÇ∆å¥çeîrèoÉeÉXÉgÇÕÇ†ÇËÇ‹ÇπÇÒÅB) by SMuratec L.Z.W 2003/11/11 */
	switch (fnc_number) {
	case 0:		/* ÉâÉCÉtÉÇÉjÉ^Å[ */
		SF_InnerStatusOperation();
		break;
	case 1:		/* ÉeÉXÉgÉpÉ^Å[ÉìÉvÉäÉìÉg */
		SF_TestPatternOperation();
		break;
	case 2:		/* PS1,PB4ÉXÉåÉbÉVÉáÉãÉhê›íË  by Y.kano 2003/12/26 */
		SF_PS1_PB4_ThresholdSet();
		break;
	case 3:		/* ÉVÉFÅ[ÉfÉBÉìÉOéÊÇËçûÇ› */
		SF_ShadingOperation();
		break;
	default:
		NackBuzzer();
		break;
	}
#else
	switch (fnc_number) {
	case 0: /* ÉâÉCÉtÉÇÉjÉ^Å[ */
		SF_InnerStatusOperation();
		break;
	case 1: /* ÉâÉCÉtÉÇÉjÉ^Å[ÉNÉäÉA */
		SF_LifeMonitorClear();
		break;
	case 2: /* ÉeÉXÉgÉpÉ^Å[ÉìÉvÉäÉìÉg */
		SF_TestPatternOperation();
		break;
	case 3: /* ÉXÉ^ÉìÉvÉeÉXÉg */
		SF_StampTest();
		break;
	case 4: /* ÉVÉFÅ[ÉfÉBÉìÉOéÊÇËçûÇ› */
		SF_ShadingOperation();
		break;
	default:
		NackBuzzer();
		break;
	}
#endif
}

/*************************************************************************
	module		:[ÉeÉXÉgÉtÉ@ÉìÉNÉVÉáÉìÅBÉâÉCÉtÉÇÉjÉ^Å[]
	function	:[
		1.ã@äÌì‡ïîèÛë‘ÇÃï\é¶ÇçsÇ§ÅB
		,Å@Ç`ÅFÇqÇnÇlÉoÅ[ÉWÉáÉì
		,Å@ÇaÅFì«Ç›Ç∆ÇËñáêî
		,Å@ÇbÅFàÛéöñáêî
		,Å@ÇcÅFëóêMñáêî
		,Å@ÇdÅFÉhÉâÉÄåä∑âÒêî			Å©Å@à«ÇÊÇËí«â¡Å@1996/06/25Å@Eguchi
		,Å@ÇeÅFÉhÉâÉÄéıñΩÉJÉEÉìÉ^		Å©Å@à«ÇÊÇËí«â¡Å@1996/06/25Å@Eguchi
		,Å@ÇfÅFÉgÉiÅ[åä∑âÒêî			Å©Å@É|ÉvÉâÇÊÇËí«â¡Å@1997/05/28Å@by K.Watanabe
		,Å@ÇgÅFÉgÉiÅ[éıñΩÉJÉEÉìÉ^		Å©Å@É|ÉvÉâÇÊÇËí«â¡Å@1997/05/28Å@by K.Watanabe
		,Å@ÇhÅFíËíÖã@åä∑âÒêî			Å©Å@É|ÉvÉâÇÊÇËí«â¡Å@1997/05/28Å@by K.Watanabe
		,Å@ÇiÅFíËíÖã@éıñΩÉJÉEÉìÉ^		Å©Å@É|ÉvÉâÇÊÇËí«â¡Å@1997/05/28Å@by K.Watanabe
		,Å@ÇjÅFì]é ÉçÅ[ÉâÅ[åä∑âÒêî		Å©Å@É|ÉvÉâÇÊÇËí«â¡Å@1997/05/28Å@by K.Watanabe
		,Å@ÇkÅFì]é ÉçÅ[ÉâÅ[éıñΩÉJÉEÉìÉ^	Å©Å@É|ÉvÉâÇÊÇËí«â¡Å@1997/05/28Å@by K.Watanabe
	]
	return		:[]
	common		:[SYB_LifeMonitor]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/07]
	author		:[èºåG,ç]å˚,ìnï”àÍèÕ]
*************************************************************************/
void SF_InnerStatusOperation(void)
{
	UBYTE	i;
	UBYTE	key;
	UBYTE	keytype;
	UDWORD	data;	/* UWORD -> UDWORD By M.Tachibana 1997/12/09 */
#if (PRO_PRINT_TYPE == THERMAL) /* By H.Fujimura 1999/01/06 */
	TIME_DATA_t	install_time;
#endif

	CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');

	DisplayStringHigh(0, D2W_SF_LifeMonitor);
	ClearDisplayLow(); /* 1996/02/28 Eguchi */

	while( 1 ) {
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
#if (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2)  /* By H.Fujimura 1999/01/06 */
		case AST:	/** ÇbÇoÇtÉoÅ[ÉWÉáÉì */
			CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
			CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
			CMN_StringCopy(FunctionDisplayBufferHigh, D2W_SF_CPU_Revision);
			CMN_StringCopy(FunctionDisplayBufferLow, CPU_Revision);
			DisplayStringHigh(0, FunctionDisplayBufferHigh);
			DisplayStringLow(0, FunctionDisplayBufferLow);
			break;
		case NUMBER:
			if (key == TEN_0_KEY) {		/** ÇqÇnÇlÉoÅ[ÉWÉáÉì */
				CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
				CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
				CMN_StringCopy(FunctionDisplayBufferHigh, D2W_SF_ROM_Revision);
				CMN_StringCopy(FunctionDisplayBufferLow, ROM_Revision);
				DisplayStringHigh(0, FunctionDisplayBufferHigh);
				DisplayStringLow(0, FunctionDisplayBufferLow);
			}
			else {
				NackBuzzer();
			}
			break;
#endif
		case ONETOUCH:
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
			if (key == ONETOUCH_01_KEY) {	/** ÉçÉÄÉoÅ[ÉWÉáÉìï\é¶ */
				DisplayStringHigh(0, D2W_SF_BoardNumber);
				ClearDisplayLow();

				while (1) {
					OPR_GetKey(KEY_WAIT_ONE_MINUTE);
					key = GetInputKeyCode();
					CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
					FunctionDisplayBufferLow[0] = key;
					FunctionDisplayBufferLow[1] = ':';
					if (key == STOP_KEY) {
						DisplayStringHigh(0, D2W_SF_LifeMonitor);
						ClearDisplayLow();
						break;
					}
					else if (key == TEN_AST_KEY) {
						CMN_StringCopy(&FunctionDisplayBufferLow[2], CPU_Revision);
						DisplayStringLow(0, FunctionDisplayBufferLow);
					}
					else if (key == TEN_0_KEY) {
						CMN_StringCopy(&FunctionDisplayBufferLow[2], ROM_Revision);
						DisplayStringLow(0, FunctionDisplayBufferLow);
					}
					else if ((key >= TEN_1_KEY) && (key <= TEN_8_KEY)) {
						if (SYB_OptionROM_Revision[(UBYTE)(key - TEN_0_KEY)][0] != NULL) {
							/* SYB_OptionROM_RevisionÇ™WORDÇÃïœêîÇÃÇΩÇﬂÇ…ÅACMN_StringCopy()Ç™égópèoóàÇ»Ç¢ÇÃÇ≈ÅA
							** ÇÌÇ¥Ç∆forÉãÅ[ÉvÇ≈ÉRÉsÅ[ÇµÇ‹Ç∑
							** íçÅjWORDÇÃïœêîÇÃÉ|ÉCÉìÉ^Å[ÇBYTEÇÃÉ|ÉCÉìÉ^Å[Ç…ÉLÉÉÉXÉgÇ∑ÇÈéûÇ…ÅAWORDÇÃïœêîÇ™
							** Å@Å@äÔêîî‘ínÇ…äÑÇËìñÇƒÇÁÇÍÇƒÇ¢ÇÈÇ∆ÅAÉäÉZÉbÉgÇ™Ç©Ç©Ç¡ÇƒÇµÇ‹Ç§ÇÃÇ≈ÅAÉLÉÉÉXÉgÇÕèoóàÇ‹ÇπÇÒ
							*/
							/*CMN_StringCopy(&FunctionDisplayBufferLow[2], &SYB_OptionROM_Revision[(UBYTE)(key - 0x30)]);*/
							for (i = 0; i < OPTION_ROM_REVISION_WORD_MAX; i++) {
#if (0)	/* By M.Tachibana 1997/07/07 */
								FunctionDisplayBufferLow[i + 2] = (UBYTE)SYB_OptionROM_Revision[(UBYTE)(key - 0x30)][i];
#endif
								FunctionDisplayBufferLow[i * 2 + 2] = (UBYTE)(SYB_OptionROM_Revision[(UBYTE)(key - 0x30)][i] >> 8);
								FunctionDisplayBufferLow[i * 2 + 3] = (UBYTE)SYB_OptionROM_Revision[(UBYTE)(key - 0x30)][i];
							}
							DisplayStringLow(0, FunctionDisplayBufferLow);
						}
						else {
							NackBuzzer();
						}
					}
					/* ägí£ÇqÇnÇlÉoÅ[ÉWÉáÉìï\é¶í«â¡ by K.Watanabe 1998/02/27 */
					else if ((key >= ONETOUCH_01_KEY) && (key <= (ONETOUCH_01_KEY + (SYS_EXT_ROM_MAX - 1)))) {
						if (SYB_ExtRomRevision[(UBYTE)(key - ONETOUCH_01_KEY)][0] != NULL) {
							CMN_StringCopy(&FunctionDisplayBufferLow[2],
										   SYB_ExtRomRevision[(UBYTE)(key - ONETOUCH_01_KEY)]);
							DisplayStringLow(0, FunctionDisplayBufferLow);
						}
						else {
							NackBuzzer();
						}
					}
					else {
						NackBuzzer();
					}
				}
			}
			else if (ONETOUCH_02_KEY <= key && key <= ONETOUCH_12_KEY) {
				switch (key) {
				case ONETOUCH_02_KEY:	/** ì«Ç›éÊÇËñáêî */
					data = SYB_LifeMonitor.ScanCount;
					break;
				case ONETOUCH_03_KEY:	/** ÉgÅ[É^ÉãàÛéöñáêî */
					data = SYB_LifeMonitor.PrintCount;
					break;
				case ONETOUCH_04_KEY:	/** ëóêMñáêî */
					data = SYB_LifeMonitor.TransmitCount;
					break;
				case ONETOUCH_05_KEY:	/** ÉhÉâÉÄåä∑âÒêî */
					data = (UDWORD)SYB_PrinterLifeMonitor.DrumReplaceCount;
					break;
				case ONETOUCH_06_KEY:	/** ÉhÉâÉÄéıñΩÉJÉEÉìÉ^Å[ */
					data = SYB_PrinterLifeMonitor.DrumLifeCount;
					break;
				case ONETOUCH_07_KEY:	/** ÉgÉiÅ[åä∑âÒêî */
					data = (UDWORD)SYB_PrinterLifeMonitor.TonerReplaceCount;
					break;
				case ONETOUCH_08_KEY:	/** ÉgÉiÅ[éıñΩÉJÉEÉìÉ^Å[ */
					data = (UDWORD)SYB_PrinterLifeMonitor.TonerLifeCount;
					break;
				case ONETOUCH_09_KEY:	/** íËíÖã@åä∑âÒêî */
					data = (UDWORD)SYB_PrinterLifeMonitor.FuserReplaceCount;
					break;
				case ONETOUCH_10_KEY:	/** íËíÖã@éıñΩÉJÉEÉìÉ^Å[ */
					data = SYB_PrinterLifeMonitor.FuserLifeCount;
					break;
				case ONETOUCH_11_KEY:	/** ì]é ÉçÅ[ÉâÅ[åä∑âÒêî */
					data = (UDWORD)SYB_PrinterLifeMonitor.TransferReplaceCount;
					break;
				case ONETOUCH_12_KEY:	/** ì]é ÉçÅ[ÉâÅ[éıñΩÉJÉEÉìÉ^Å[ */
					data = SYB_PrinterLifeMonitor.TransferLifeCount;
					break;
				default:
					break;
				}
				CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
				CMN_UnsignedLongToASC(FunctionDisplayBufferLow, data, 6, '0');	/* Int -> Long : 5 -> 6 By M.Tachibana 1997/12/09 */

				DisplayStringHigh(0, D2W_SF_LifeReadingPage + OPR_WORDING_LEN * (UBYTE)(key - ONETOUCH_02_KEY));
				DisplayStringLow(0, FunctionDisplayBufferLow);
			}
			else {
				NackBuzzer();
			}
#endif	/* (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L) */
#if (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2)  /* By H.Fujimura 1999/01/06 */
			if (ONETOUCH_01_KEY <= key && key <= ONETOUCH_06_KEY) {
				CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
				CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
				switch (key) {
				case ONETOUCH_01_KEY:	/** ÇqÇnÇlÉoÅ[ÉWÉáÉì */
					CMN_StringCopy(FunctionDisplayBufferHigh, D2W_SF_ROM_Revision);
					CMN_StringCopy(FunctionDisplayBufferLow, ROM_Revision);
					break;
 #if (PRO_PRINT_TYPE == THERMAL) /* By H.Fujimura 1999/01/06 */
				case ONETOUCH_02_KEY:	/** ÉVÉäÉAÉãî‘çÜ */
					CMN_StringCopy(FunctionDisplayBufferHigh, D2W_SF_SerialNumber);
					CMN_StringCopy(FunctionDisplayBufferLow, SYB_ConsumerOrder.SerialNumber);
					break;
				case ONETOUCH_03_KEY:	/** ê›íuì˙ */
					CMN_StringCopy(FunctionDisplayBufferHigh, D2W_SF_Date);
					CMN_LongTimeToBCD((TIME_DATA_t *)&install_time, SYB_ConsumerOrder.InstallDate);
					FunctionDisplayBufferLow[0] = '\'';
					FunctionDisplayBufferLow[1] = (UBYTE)(((install_time.Year & 0xF0) >> 4) + 0x30);
					FunctionDisplayBufferLow[2] = (UBYTE)((install_time.Year & 0x0F) + 0x30);
					FunctionDisplayBufferLow[3] = ' ';
					FunctionDisplayBufferLow[4] = (UBYTE)(((install_time.Month & 0xF0) >> 4) + 0x30);
					FunctionDisplayBufferLow[5] = (UBYTE)((install_time.Month & 0x0F) + 0x30);
					FunctionDisplayBufferLow[6] = '/';
					FunctionDisplayBufferLow[7] = (UBYTE)(((install_time.Date & 0xF0) >> 4) + 0x30);
					FunctionDisplayBufferLow[8] = (UBYTE)((install_time.Date & 0x0F) + 0x30);
					break;
				case ONETOUCH_04_KEY:	/** ì«Ç›éÊÇËñáêî */
					CMN_StringCopy(FunctionDisplayBufferHigh, D2W_SF_LifeReadingPage);	/* "÷–ƒÿ œ≤Ω≥           " */
					CMN_UnsignedLongToASC(FunctionDisplayBufferLow, SYB_LifeMonitor.ScanCount, 6, '0');
					break;
				case ONETOUCH_05_KEY:	/** ÉgÅ[É^ÉãàÛéöñáêî */
					CMN_StringCopy(FunctionDisplayBufferHigh, D2W_SF_LifePrintingPage);	/* "≤›ºﬁ œ≤Ω≥           " */
					CMN_UnsignedLongToASC(FunctionDisplayBufferLow, SYB_LifeMonitor.PrintCount, 6, '0');
					break;
				case ONETOUCH_06_KEY:	/** ëóêMñáêî */
					CMN_StringCopy(FunctionDisplayBufferHigh, D2W_SF_LifeTxPage);		/* "ø≥º› œ≤Ω≥           " */
					CMN_UnsignedLongToASC(FunctionDisplayBufferLow, SYB_LifeMonitor.TransmitCount, 6, '0');
					break;
 #else
				case ONETOUCH_02_KEY:	/** ì«Ç›éÊÇËñáêî */
					CMN_StringCopy(FunctionDisplayBufferHigh, D2W_SF_LifeReadingPage);	/* "÷–ƒÿ œ≤Ω≥           " */
					CMN_UnsignedLongToASC(FunctionDisplayBufferLow, SYB_LifeMonitor.ScanCount, 6, '0');
					break;
				case ONETOUCH_03_KEY:	/** ÉgÅ[É^ÉãàÛéöñáêî */
					CMN_StringCopy(FunctionDisplayBufferHigh, D2W_SF_LifePrintingPage);	/* "≤›ºﬁ œ≤Ω≥           " */
					CMN_UnsignedLongToASC(FunctionDisplayBufferLow, SYB_LifeMonitor.PrintCount, 6, '0');
					break;
				case ONETOUCH_04_KEY:	/** ëóêMñáêî */
					CMN_StringCopy(FunctionDisplayBufferHigh, D2W_SF_LifeTxPage);		/* "ø≥º› œ≤Ω≥           " */
					CMN_UnsignedLongToASC(FunctionDisplayBufferLow, SYB_LifeMonitor.TransmitCount, 6, '0');
					break;
 #endif
				}
				DisplayStringHigh(0, FunctionDisplayBufferHigh);
				DisplayStringLow(0, FunctionDisplayBufferLow);
			}
			else {
				NackBuzzer();
			}
#endif	/* (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2)  */
#if (PRO_KEYPANEL == PANEL_ANZU_L)
			if (key == ONETOUCH_A_KEY) {	/** ÉçÉÄÉoÅ[ÉWÉáÉìï\é¶ */
 #if (PRO_MULTI_LINE == ENABLE) || (PRO_PC_PRINT == ENABLE)
				DisplayStringHigh(0, D2W_SF_BoardNumber);
				ClearDisplayLow();

				while (1) {
					OPR_GetKey(KEY_WAIT_ONE_MINUTE);
					key = GetInputKeyCode();
					CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
					FunctionDisplayBufferLow[0] = key;
					FunctionDisplayBufferLow[1] = ':';
					if (key == STOP_KEY) {
						DisplayStringHigh(0, D2W_SF_LifeMonitor);
						ClearDisplayLow();
						break;
					}
					switch (key) {
					case TEN_AST_KEY:
						CMN_StringCopy(&FunctionDisplayBufferLow[2], CPU_Revision);
						DisplayStringLow(0, FunctionDisplayBufferLow);
						break;
					case TEN_0_KEY:
						CMN_StringCopy(&FunctionDisplayBufferLow[2], ROM_Revision);
						DisplayStringLow(0, FunctionDisplayBufferLow);
						break;
					case TEN_1_KEY:
					case TEN_2_KEY:
					case TEN_3_KEY:
					case TEN_4_KEY:
					case TEN_5_KEY:
					case TEN_6_KEY:
					case TEN_7_KEY:
					case TEN_8_KEY:
						if (SYB_OptionROM_Revision[(UBYTE)(key - 0x30)][0] != 0) {
							DisplayStringLow(0, FunctionDisplayBufferLow);
							DisplayStringLow(2, SYB_OptionROM_Revision[(UBYTE)(key - 0x30)]);
						}
						else {
							NackBuzzer();
						}
						break;
	#if (PRO_DIALUP_INTERNET_FAX == ENABLE) /* 1998/08/20 Eguchi */
					case TEN_9_KEY: /*≤›¿∞»ØƒFAXÅB¥›ºﬁ›Œﬁ∞ƒﬁÃß∞—≥™± ﬁ∞ºﬁÆ›ï\é¶*/
						if (SYB_INF_DeviceExist == TRUE) {
							DisplayChar(20 , 'S');
							DisplayChar(21 , ':');
							DisplayChar(29 , 'H');
							DisplayChar(30 , ':');
							DisplayStringLow(2 , INF_EngineSystemParam.SW_Rev);
							DisplayStringLow(11 , INF_EngineSystemParam.HW_Rev);
							/* SW_Rev ÇÃï∂éöóÒÇ™7ï∂éöÇí¥Ç¶ÇΩÇÁçÏÇËë÷Ç¶ÇÈ*/
							/* HW_Rev ÇÃï∂éöóÒÇ™9ï∂éöÇí¥Ç¶ÇΩÇÁçÏÇËë÷Ç¶ÇÈ*/
						}
						else {
							NackBuzzer();
						}
						break;
	#endif
					default:
						NackBuzzer();
						break;
					}
				}
 #else
				DisplayStringHigh(0, ROM_Revision);
				ClearDisplayLow();
 #endif	/* (PRO_MULTI_LINE == ENABLE) || (PRO_PC_PRINT == ENABLE) */
			}
			else if (ONETOUCH_B_KEY <= key && key <= ONETOUCH_F_KEY) {
				switch (key) {
				case ONETOUCH_B_KEY:	/** ì«Ç›éÊÇËñáêî */
					data = SYB_LifeMonitor.ScanCount;
					break;
				case ONETOUCH_C_KEY:	/** ÉgÅ[É^ÉãàÛéöñáêî */
					data = SYB_LifeMonitor.PrintCount;
					break;
				case ONETOUCH_D_KEY:	/** ëóêMñáêî */
					data = SYB_LifeMonitor.TransmitCount;
					break;
				case ONETOUCH_E_KEY:	/** ÉhÉâÉÄåä∑âÒêî *//* à«ÇÊÇËí«â¡1996/06/25 Eguchi */
					data = SYB_LifeMonitor.DrumReplaceCount;
					break;
				case ONETOUCH_F_KEY:	/** ÉhÉâÉÄéıñΩÉJÉEÉìÉ^Å[ *//* à«ÇÊÇËí«â¡1996/06/25 Eguchi */
					data = SYB_LifeMonitor.DrumLifeCount;
					break;
				default:
					break;
				}
				CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
				CMN_UnsignedLongToASC(FunctionDisplayBufferLow, data, 6, '0');	/* Int -> Long : 5 -> 6 By M.Tachibana 1997/12/09 */

				DisplayStringHigh(0, D2W_SF_LifeReadingPage + OPR_WORDING_LEN * (UBYTE)(key - ONETOUCH_B_KEY));
				DisplayStringLow(0, FunctionDisplayBufferLow);
			}
			else {
				NackBuzzer();
			}
#endif	/* (PRO_KEYPANEL == PANEL_ANZU_L) */
			break;
		case STOP:
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[(çHèÍÉtÉ@ÉìÉNÉVÉáÉì)ÉâÉCÉtÉÇÉjÉ^Å[ÉNÉäÉA]
	function	:[
		1.ÉâÉCÉtÉÇÉjÉ^Å[ÉfÅ[É^ÇÃÉNÉäÉA
		2.ÉWÉÉÅ[ÉiÉãä÷åWÇÃÉfÅ[É^ÇÃÉNÉäÉA
	]
	return		:[Ç»Ç¢]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[96/03/05 ]
	author		:[èºåG]
*************************************************************************/
void SF_LifeMonitorClear(void)
{
	ClearDisplayLow();

#if (PRO_KEYPANEL == PANEL_POPLAR_B) && !defined(JPN)  /* lifemonitorbythonda1998/06/01 */
	if (SYB_LifeMonitorPasscode != 0x0000) {
		if (LifeMonitorPasscodeOperation() == NG) {
			NackBuzzer();
			return;
		}
	}
#endif

	/* ÉNÉäÉAämîFÉIÉyÉåÅ[ÉVÉáÉì */
	if (ConfirmKeyInputOperation(D2W_SF_LifeMonitorClear, D2W_CheckProgramEnter, ENTER, FUNCTION) == CONFIRM_EXEC) {
		CMN_ClearLifeMonitorData();			/** ÉâÉCÉtÉÇÉjÉ^Å[ÉNÉäÉA */
#if (PRO_PRINT_TYPE == LED)	/* By M.Tachibana 1997/04/24 */
		CMN_ClearPrinterLifeMonitorData();	/** ÉvÉäÉìÉ^ÉâÉCÉtÉÇÉjÉ^Å[ÉNÉäÉA */
#endif
		CMN_ClearFaxComErrorMonitorData();	/** í êMÉGÉâÅ[ÉÇÉjÉ^Å[ÉNÉäÉA By M.Tachibana 1997/06/23 */
		CMN_ClearJournalData();				/** ÉWÉÉÅ[ÉiÉãÉfÅ[É^ÉNÉäÉA */
#if (PRO_NUMBER_DISPLAY == ENABLE) /* By H.Fujimura 1999/02/10 */
		CMN_ND_EraseAllHistory();	/* ÉiÉìÉoÅ[ÉfÉBÉXÉvÉåÉCíÖêMóöóè¡ãé */
#endif
		ChildDisplayStringLow(D2W_ClearComplete);		/* " **  ∏ÿ± ∂›ÿÆ≥  **  " */
	}
}

/*************************************************************************
	module		:[ÉeÉXÉgÉtÉ@ÉìÉNÉVÉáÉìÅFÉpÉ^Å[ÉìÉvÉäÉìÉg]
	function	:[
		1.ÉeÉXÉgÉpÉ^Å[ÉìÇÃÉvÉäÉìÉgÇé¿çs
		2.ÉLÅ[ì¸óÕÇ∆ÉvÉäÉìÉgÇ≥ÇÍÇÈÉpÉ^Å[ÉìÇÃëŒâûä÷åW
		,	ONETOUCH_A_KEY	-> äiéqÉpÉ^Å[ÉìÅiÉ`ÉFÉbÉJÅ[ÉtÉâÉbÉO)
		,	ONETOUCH_B_KEY	-> è°ñ⁄ÉpÉ^Å[Éì
		,	ONETOUCH_C_KEY	-> ÉâÉCÉìÉpÉ^Å[Éì	** 97/07/18 Add by M.Kuwahara **
		3.ÉXÉgÉbÉvÉLÅ[Ç™âüÇ≥ÇÍÇÈÇ‹Ç≈ÉvÉäÉìÉgÇµë±ÇØÇÈ.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/27]
	author		:[ç]å˚,ìnï”àÍèÕ]
*************************************************************************/
void SF_TestPatternOperation(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	status;
	UBYTE	pattern;
	UBYTE	test_enable_key_max;

	status = 0;
	pattern = ' ';
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L) || (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 
	test_enable_key_max = ONETOUCH_03_KEY;	/* 01 - 03 */
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
	test_enable_key_max = ONETOUCH_B_KEY;	/* A - B */
#endif

	if (CheckPrintOperationEnable() == FALSE) {
		return;
	}
	while(1) {
		DisplayPatternPrint(pattern, status);

#if (PRO_PAPER_TYPE == CUT_PAPER) && defined(STOCKHM2) /* Added by SMuratec óõ 2005/03/02/ */
		OPR_GetKey(KEY_WAIT_ONE_SECOND);
#else
		OPR_GetKey(KEY_WAIT_FOREVER);
#endif /* (PRO_PAPER_TYPE == CUT_PAPER) && defined(STOCKHM2) */
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case ONETOUCH:
			if (key <= test_enable_key_max) {
				if (CheckPrintOperationEnable()) {
					SYS_DocumentPrintItem = LST_PATTERN_PRINT;
					SYS_DocumentPrintNo   = LST_PATTERN1 + CMN_OnetouchCodeToOffset(key);
					OperationMessageToMain.Message = MSG_LIST_PRINT;
					snd_msg(mbxno.MAN_Task, &OperationMessageToMain);
					MainTaskExecWait();
					status = 1;
					pattern = key;
				}
			}
			else {
				NackBuzzer();
			}
			break;
		case STOP:
			if (SYS_MachineStatus[SYS_MACHINE_STATUS] & SYS_LIST_PRINT) {	/** Ãﬂÿ›ƒíÜÇÃéûÇÕÅAàÛç¸í‚é~óvãÅÇÇæÇ∑ */
				SYS_MachineStatus[SYS_STOP_SWITCH_STATUS] |= SYS_STOP_LIST_PRINT;
				status = 0;
				pattern = ' ';
			}
			else {	/** Ãﬂÿ›ƒíÜÇ≈Ç»Ç¢éûÇÕÅA√ΩƒÇèIÇ¶ÇÈ */
				return;
			}
			break;
		case NO_EFFECT:
			break;
#if (PRO_PAPER_TYPE == CUT_PAPER) && defined(STOCKHM2) /* Added by SMuratec óõ 2005/03/02/ */
		case KEY_TIME_UP:
			if (!(SYS_MachineStatus[SYS_MACHINE_STATUS] & SYS_LIST_PRINT)) {
				status = 0;
				pattern = ' ';
			}
			break;
#endif /* (PRO_PAPER_TYPE == CUT_PAPER) && defined(STOCKHM2) */
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÉeÉXÉgÉpÉ^Å[ÉìÉvÉäÉìÉgíÜï\é¶]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/27]
	author		:[ç]å˚]
*************************************************************************/
void DisplayPatternPrint(UBYTE pattern, UBYTE status)
{
	if (CheckChildErrorDisplayReq() == TRUE) {
		DisplayChildError();
		return;
	}
	if (CheckChildDisplay() == TRUE) {
		return;
	}

	/* è„íiï\é¶ [Pattern           A ]*/
	CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
	CMN_StringCopy(FunctionDisplayBufferHigh, D2W_SF_Pattern);
	FunctionDisplayBufferHigh[18] = pattern;
	DisplayStringHigh(0, FunctionDisplayBufferHigh);

	/* â∫íiï\é¶ */
	if (status == 0) { /* ÉvÉäÉìÉgíÜÇ≈Ç»Ç¢ */
		ClearDisplayLow();
	}
	else { /* ÉvÉäÉìÉgíÜ */
		DisplayStringLow(0 , D2W_Printing);
	}
}

#if (PRO_KEYPANEL != PANEL_SATSUKI2) && (PRO_KEYPANEL != PANEL_STOCKHM2)	/* Add by Y.Kano 2003/12/26 */
/*************************************************************************
	module		:[ÉeÉXÉgÉtÉ@ÉìÉNÉVÉáÉìÅFÉXÉ^ÉìÉvÉeÉXÉg]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/27]
	author		:[ç]å˚]
*************************************************************************/
void SF_StampTest(void)
{
	UBYTE	keytype;

	DisplayStringHigh(0, D2W_SF_StampTest);
	ClearDisplayLow();

	while (1) {
		OPR_GetKey(KEY_WAIT_FOREVER);
		keytype = GetInputKeyType();

		switch (keytype) {
		case START:
			if ((SYS_MachineStatus[SYS_MACHINE_STATUS] & SYS_FEED_OUT)	/* îrèoíÜ */
#if (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 
			/* å¥çeÇ»ÇµèÛë‘Ç≈ÉXÉ^Å[ÉgÉLÅ[ÇâüÇ∑Ç∆ÉãÅ[ÉvÇ∑ÇÈëŒçÙ ÉJÉoÅ[ÉIÅ[ÉvÉìÅAå¥çeÇ»ÇµÇÃéûÇÕ
			** ÉIÉyÉåÅ[ÉVÉáÉìÇ≈ÇÕÇ∂Ç´Ç‹Ç∑ÅB2002/11/28 T.Takagi
			 */
			|| (!QueryCloseInterLock4Scan())					/* ÉJÉoÅ[ÉIÅ[ÉvÉì */
			|| (!QueryDs1On())									/* å¥çeÇ»Çµ */
			|| (!QueryDs2On())
#endif
			){
				NackBuzzer();
			}
			else {
				/*OperationMessageToMain.Item = FROM_OPERATION; 1996/07/08 Eguchi */
				OperationMessageToMain.Message = MSG_SERV_STAMP_TEST;
				snd_msg(mbxno.MAN_Task , &OperationMessageToMain);
				MainTaskExecWait();
			}
			break;
		case STOP:
			if (SYS_MachineStatus[SYS_MACHINE_STATUS] & SYS_FEED_OUT) {/* îrèoíÜ */
				NackBuzzer();
			}
			else {
				return;
			}
			break;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}
#endif

/*************************************************************************
	module		:[ÉeÉXÉgÉtÉ@ÉìÉNÉVÉáÉìÅFå¥çeîrèoÉeÉXÉg]
	function	:[
		1.
	]
	return		:[Ç»Çµ]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/05/27]
	author		:[ìnï”àÍèÕ]
*************************************************************************/
void SF_DocumentFeedOutTest(void)
{
	UBYTE	is_loop_end;

	ClearDisplayLow();

	is_loop_end = FALSE;
	while (is_loop_end != TRUE) {
		OPR_GetKey(KEY_WAIT_FOREVER);
		switch (GetInputKeyType()) {
		case START:
			if (!(SYS_MachineStatus[SYS_MACHINE_STATUS] & SYS_FEED_OUT)	/* îrèoíÜÇ≈Ç»Ç¢éû */
			 && CMN_CheckDocumentOnFeeder()) {	/* Ç`ÇcÇeÇ…å¥çeÇ™ÉZÉbÉgÇ≥ÇÍÇƒÇ¢ÇÈ */
				OperationMessageToMain.Message = MSG_SERV_FEED_OUT_DOC;
				snd_msg(mbxno.MAN_Task, &OperationMessageToMain);
				MainTaskExecWait();
			}
			else {															/* îrèoíÜÇÃéû */
				NackBuzzer();
			}
			break;
		case STOP:
			if (!(SYS_MachineStatus[SYS_MACHINE_STATUS] & SYS_FEED_OUT)) {	/* îrèoíÜÇ≈Ç»Ç¢éû */
				is_loop_end = TRUE;
			}
			else {															/* îrèoíÜÇÃéû */
				NackBuzzer();
			}
			break;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[(ÉeÉXÉgÉtÉ@ÉìÉNÉVÉáÉì)ÉVÉFÅ[ÉfÉBÉìÉOÉfÅ[É^éÊÇËçûÇ›]
	function	:[
		ÉVÉFÅ[ÉfÉBÉìÉOÉfÅ[É^ÇÃéÊÇËçûÇ›ÇçsÇ§
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[
		POPLAR_B FBSédólÇí«â¡ T.Nose 1997/01/28
	]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[96/03/13]
	author		:[èºåG]
*************************************************************************/
void SF_ShadingOperation(void)
{
/* Added by SMuratec K.W.Q 2003/09/27 */
#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 
	UBYTE	keytype;
	WORD	SamplePosition;				/* Shading Data ÇÉTÉìÉvÉãÇ∑ÇÈÉâÉCÉìêî */
	BOOL	PaperFlag;
#endif

	UBYTE is_scanner_error = FALSE;
	UBYTE is_mirror_fix = FALSE;

#if (PRO_FBS == ENABLE)
	if (SYS_MachineStatus[SYS_SCANNER_STATUS] & SYS_SCANNER_MIRROR_BUSY) {	/** É~ÉâÅ[Ç™égópíÜ */
		NackBuzzer();	/** NackÉuÉUÅ[Ç≈èIóπ */
		return;
	}
#endif

	DisplayStringHigh(0, D2W_SF_Shading);
	ClearDisplayLow();

/* Added by SMuratec K.W.Q 2003/09/27 */
#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 
	PaperFlag = TRUE;

	if (QueryCloseInterLock4Scan()) {
		if (DOC_POS_SCANNING == QueryDocPosition()) {
			NackBuzzer();	/** NackÉuÉUÅ[Ç≈èIóπ */
			return;
		}
	}
	
/*	DVT: Modify by SMuratec K.W.Q 2004/10/26 */
#if defined(STOCKHM2)
	while(!QueryDs2On()) {
		/** ï\é¶èàóù */
		DisplayStringLow(0,D2W_ShadingWord );
		
		OPR_GetKey(20);
		keytype = GetInputKeyType();
		
		if (keytype == STOP){
			PaperFlag = FALSE;
			return;
		}
		else if (keytype == ENTER){
			PaperFlag = FALSE;
			break;
		}
		else{
			PaperFlag = TRUE;
		}
	}
#else
	/* Modify by SMuratec K.W.Q 2003/10/27 */
	if (SYS_CheckerMode == CHECKER_MAIN_TEST){
		if (QueryDs2On()){
			PaperFlag = TRUE;
		}
		else{
			PaperFlag = FALSE;
		}
	}
	else{
		while(!QueryDs2On()) {
			/** ï\é¶èàóù */
			DisplayStringLow(0,D2W_ShadingWord );
			
			OPR_GetKey(20);
			keytype = GetInputKeyType();
			
			if (keytype == STOP){
				PaperFlag = FALSE;
				return;
			}
			else if (keytype == ENTER){
				PaperFlag = FALSE;
				break;
			}
			else{
				PaperFlag = TRUE;
			}
		}
	}
#endif
	
	if (PaperFlag){	
		wai_tsk(300); /* 200->300ïœçX SMuratec K.W.Q 2003/10/22 */
		
		SamplePosition = 0;

		SetupTxMotor(FEEDER_DOC_OUT);
		StartTxMotor();
		
#if (1) /* ïœçX by SMuratec K.W.Q 2003/10/22 */
		wai_tsk(120); /* 1cmmÇ≠ÇÁÇ¢êiÇﬁ*/
		StopTxMotor();
#else
		while (1){
			if (QueryCloseInterLock4Scan()) {
				
				if (DOC_POS_SCANNING == QueryDocPosition()) {
					if (++SamplePosition > SAMPLE_LINE_COUNT) {
						StopTxMotor();
						break;
					}
				}
			}			
		}
#endif
	}
	
	DisplayStringHigh(0, D2W_SF_Shading);
	ClearDisplayLow();
#endif

#if (PRO_IMAGE_PROCESSOR ==	IMAGE_PROCESSOR_LC82103)
	if (SYB_MaintenanceSwitch[MNT_SW_C1] & SCN_SHADING_METHOD_SCANDOC) {
		OperationMessageToMain.Item = FROM_OPERATION;
		OperationMessageToMain.Message = MSG_SERV_SHADING_START;
		OperationMessageToMain.SubMessage1 = 0;
		OperationMessageToMain.SubMessage2 = 0;
		snd_msg( mbxno.MAN_Task, &OperationMessageToMain );
		MainTaskExecWait();
	} else {
 #if (PRO_RED_SCAN == ENABLE)	/* éÈêFå¥çeì«Ç›éÊÇË 2002/03/11 T.Takagi */
  #if defined(HINOKI3)		/* éÈêFÉVÉFÅ[ÉfÉBÉìÉOÉfÅ[É^éÊçûÇ›å„ÅAí èÌÇÃÉVÉFÅ[ÉfÉBÉìÉOéÊçûÇ›Ç‡çsÇ¡ÇƒÇ¢ÇΩÇÃÇ≈êÿÇËï™ÇØÇ‹Ç∑ÅBby Y.Kano 2005/01/24 */
		if (CHK_UNI_RedScanModeEnable()) {
			MakeShadingDataForRedScan();
			LampOff();
		}
		else {
			MakeShadingData();
			LampOff();
		}
  #else
		if (CHK_UNI_RedScanModeEnable()) {
			MakeShadingDataForRedScan();
			LampOff();
		}
  #endif
 #endif		
 #if !defined(HINOKI3)
		MakeShadingData();
		LampOff();
 #endif
		ChildDisplaySetCompleted(D2W_SF_Shading);
	}
	
 #if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2)		/* Added by SMuratec K.W.Q 2003/09/27 */
	/*	Added by SMuratec K.W.Q	2003/09/26	*/
	if (PaperFlag){
		SetupTxMotor(FEEDER_DOC_OUT);
		StartTxMotor();

		while (1){
		
		/*ÉVÉFÅ[ÉfÉBÉìÉOèCê≥*//* Modify by SMuratec K.W.Q 2003/11/10 */
		/* ÉVÉFÅ[ÉfÉBÉìÉOÇ≈ÅAéÜÇÃîrèoíÜÇ…ÉJÉoÅ[ÇäJÇØÇƒéÜÇéÊÇËèoÇ∑Ç∆ÅAÉJÉoÅ[Çï¬Çﬂ
			ÇƒÇ‡ÉÇÅ[É^Å[Ç™âÒÇ¡ÇΩÇ‹Ç‹Ç…Ç»ÇËÅAÉãÅ[ÉvÇµÇ‹Ç∑ÅB*/
		/*	if (QueryCloseInterLock4Scan()) {	*/

			if (DOC_POS_NO_DOCUMENT == QueryDocPosition()
				|| (SYS_MachineStatus[SYS_COVER_STATUS] & SYS_COVER_PRINTER_OPEN)
				|| (SYS_MachineStatus[SYS_COVER_STATUS] & SYS_COVER_SCANNER_OPEN)) {
				wai_tsk(10);
				
				StopTxMotor();
				break;
			}
			
		/*	}*/
		}
	}
 #endif


#else
 #if (PRO_FBS == ENABLE)	/* ICHOUópÇ…í«â¡  1996/10/11 s.takeuchi */
	if (SYB_MaintenanceSwitch[MNT_SW_A8] & CURRENT_POSITION_SHADING) {
		is_mirror_fix = TRUE;
	}

	/* Ç`ÇcÇeÇ…å¥çeÇÉZÉbÉgÇµÇΩéûÅAÇ`ÇcÇeë§Ç≈É~ÉâÅ[Ç™é~Ç‹ÇÁÇ»Ç≠Ç»ÇÈåè T.Nose 1997/12/17 */
	DEBUG_OperationExitFlag = 0;		/* ÉVÉFÅ[ÉfÉBÉìÉOÉIÉyÉåÅ[ÉVÉáÉìèIóπÉtÉâÉOÉäÉZÉbÉg */

	while (1) {
		/** MAN_Task()ÇâÓÇµÇƒÅAÉ~ÉâÅ[ÉLÉÉÉäÉbÉWÇADFì«Ç›éÊÇËà íuÇ÷à⁄ìÆÇ≥ÇπÇÈ */
		if (!is_mirror_fix) {
			OperationMessageToMain.Item = FROM_OPERATION;
			OperationMessageToMain.Message = MSG_SERV_SHADING_START;
			OperationMessageToMain.SubMessage1 = 0;
			OperationMessageToMain.SubMessage2 = 0;
			snd_msg( mbxno.MAN_Task, &OperationMessageToMain );
			MainTaskExecWait();

			/** É~ÉâÅ[ÉLÉÉÉäÉbÉWÇÃà⁄ìÆèIóπÇë“Ç¬ */
			while (!SYS_IsMirrorScanReady) {
				wai_tsk( 10 );		/* 100msë“Ç¬ */
				if (SYS_MachineStatus[SYS_SCANNER_STATUS] & SYS_SCANNER_MIRROR_ERROR) {
					is_scanner_error = TRUE;
					break;
				}

				/* Ç`ÇcÇeÇ…å¥çeÇÉZÉbÉgÇµÇΩéûÅAÇ`ÇcÇeë§Ç≈É~ÉâÅ[Ç™é~Ç‹ÇÁÇ»Ç≠Ç»ÇÈåè
				** T.Nose 1997/12/20
				*/
				if ((SYB_MaintenanceSwitch[MNT_SW_C0] & MIRROR_MOVE_FORCE_END)
				 && (DEBUG_OperationExitFlag == 1)) {
					is_scanner_error = TRUE;
					break;
				}
			}
		}
 #else
		SYS_MachineStatus[SYS_RESOURCE_STATUS] |= SYS_SCANNER_BUSY;	/** ÉâÉìÉvÉ`ÉFÉbÉNÉGÉâÅ[ëŒçÙ **/
 #endif
		if (!is_scanner_error) {
			if (CMN_ShadingExecute()) {		/** ÉVÉFÅ[ÉfÉBÉìÉOéÊÇËçûèàóùÇ™ÇnÇjÇÃéû */
				LampOff();
				ChildDisplaySetCompleted(D2W_SF_Shading);
			}
			else {		/**	ÇmÇfÇÃéû	*/
				SYS_MachineStatus[SYS_SCANNER_STATUS] |= SYS_SCANNER_LAMP_ERROR;
				LampOff();
			}
		}

 #if (PRO_FBS == ENABLE)	/* ICHOUópÇ…í«â¡  1996/10/11 s.takeuchi */
		/*	É~ÉâÅ[ÉLÉÉÉäÉbÉWÇë“ã@à íuÇ÷ñﬂÇ∑ÉÅÉbÉZÅ[ÉWÇÉZÉbÉgÇ∑ÇÈ
		**	íAÇµÅAÉ~ÉâÅ[ÉGÉâÅ[ÇÃéûÇÕñﬂÇ≥Ç»Ç¢
		*/
		if (!is_mirror_fix) {
			if (!(SYS_MachineStatus[SYS_SCANNER_STATUS] & SYS_SCANNER_MIRROR_ERROR)) {
				OperationMessageToMain.Item = FROM_OPERATION;
				OperationMessageToMain.Message = MSG_SERV_SHADING_END;
				OperationMessageToMain.SubMessage1 = 0;
				OperationMessageToMain.SubMessage2 = 0;
				snd_msg( mbxno.MAN_Task, &OperationMessageToMain );
				MainTaskExecWait();
			}
		}
 #else
		SYS_MachineStatus[SYS_RESOURCE_STATUS] &= ~SYS_SCANNER_BUSY;	/** ÉâÉìÉvÉ`ÉFÉbÉNÉGÉâÅ[ëŒçÙ **/
 #endif
 #if (PRO_FBS == ENABLE)	/* í«â¡ 1997/06/16 Y.Matsukuma */
		return;
	}
 #endif

#endif
}

#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 	/* Add by Y.kano 2003/12/26 */
/*************************************************************************
	module		:[(ÉeÉXÉgÉtÉ@ÉìÉNÉVÉáÉì)PS1ÅAPB4ÉXÉåÉbÉVÉáÉãÉhê›íË]
	function	:[
		PS1,PB4ÇÃËáílÇÃê›íË
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/12/26]
	author		:[â¡î[]
*************************************************************************/
void SF_PS1_PB4_ThresholdSet(void)
{
	UBYTE	key;
	UBYTE	keytype;

	OPR_PS2_Adjust_Flg = TRUE;		/* PS2í≤êÆíÜÉtÉâÉOON by Y.Kano 2003/12/04 */

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_PleaseNonPaper);	/* "∑€∏º ¶ ƒÿ…øﬁ≤√∏¿ﬁª≤ " */

	/* â∫íiï\é¶ */
	FlashDisplayStringLow(D2W_EnterStop);		/* "          æØƒ/ΩƒØÃﬂ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case ENTER:
			PS1_PB4_ThresholdSet();	/* PS1,PB4ÅiãLò^éÜñ≥ÇµÅjËáílê›íË */
			OPR_PS2_Adjust_Flg = FALSE;							/* PS2í≤êÆíÜÉtÉâÉOOFF */
			return;
		case STOP:
		case KEY_TIME_UP:
			OPR_PS2_Adjust_Flg = FALSE;							/* PS2í≤êÆíÜÉtÉâÉOOFF */
			return;

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÇoÇrÇPÅAÇoÇaÇSÅiãLò^éÜñ≥ÇµÅjËáílê›íË]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/12/18]
	author		:[â¡î[]
*************************************************************************/
void PS1_PB4_ThresholdSet(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	result;

	result = OK;

	SYB_MachineParameter[M_PARA_SW_J3] = (UBYTE)AD_PS1();		/* ÇoÇrÇPÅiãLò^éÜñ≥ÇµÅjÇÃÇ`ÇcíléÊçûÇ›ÅBby Y.Kano 2003/12/18 */
	SYB_MachineParameter[M_PARA_SW_J5] = (UBYTE)AD_PB4();		/* ÇoÇaÇSÅiãLò^éÜñ≥ÇµÅjÇÃÇ`ÇcíléÊçûÇ›ÅBby Y.Kano 2003/12/18 */

	if (SYB_MachineParameter[M_PARA_SW_J3] < 0x33) {
		if (SYB_MachineParameter[M_PARA_SW_J5] < 0x33) {
			/* è„íiï\é¶ */
			DisplayStringHigh(0,D2W_SF_PS1_PB4_Error);			/* "PS1,PB4 ∂∏∆›º√∏¿ﬁª≤ " */
			NackBuzzer();	/* ÉiÉbÉNâπñ¬ìÆ */
			result = NG;
		}
		else {
			DisplayStringHigh(0,D2W_SF_PS1_Error);				/* "PS1 ∂∏∆›º√∏¿ﬁª≤     " */
			NackBuzzer();	/* ÉiÉbÉNâπñ¬ìÆ */
			result = NG;
		}
	}
	else if (SYB_MachineParameter[M_PARA_SW_J5] < 0x33) {
		DisplayStringHigh(0,D2W_SF_PB4_Error);				/* "PB4 ∂∏∆›º√∏¿ﬁª≤     " */
		NackBuzzer();		/* ÉiÉbÉNâπñ¬ìÆ */
		result = NG;
	}

	if (result) {
		/* ÇoÇrÇPÇÃËáílÉZÉbÉg */
		SYB_MachineParameter[M_PARA_SW_J6] = (SYB_MachineParameter[M_PARA_SW_J3] - 0x19);

		/* ÇoÇaÇSÇÃËáílÉZÉbÉg */
		SYB_MachineParameter[M_PARA_SW_J7] = (SYB_MachineParameter[M_PARA_SW_J5] - 0x19);

		/*-----------*/
		/** âÊñ ï\é¶ */
		/*-----------*/
		/* è„íiï\é¶ */
		DisplayStringHigh(0,D2W_SF_PS1_PB4_Threshold);	/* "PS1,PB4 º∑≤¡ æØ√≤   " */
		/* â∫íiï\é¶ */
		ChildDisplayStringLow(D2W_SetComplete);		/* " **  æØƒ  ∂›ÿÆ≥  ** " */

		EndBuzzer();	/* èIóπâπñ¬ìÆ */
		return;
	}
	else {
		/* â∫íiï\é¶ */
		FlashDisplayStringLow(D2W_Stop);				/* "              ΩƒØÃﬂ " */

		while(1) {

			/** ÉLÅ[éÊÇËçûÇ› */
			OPR_GetKey(KEY_WAIT_ONE_MINUTE);
			key = GetInputKeyCode();
			keytype = GetInputKeyType();

			/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
			switch (keytype) {
			case STOP:
			case KEY_TIME_UP:
				return;

			case NO_EFFECT:
				break;

			default:
				NackBuzzer();
				break;
			}
		}
	}
}
#endif	/* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */


/*************************************************************************
	module		:[ÉÅÉÇÉäÅ[(DIP)ÉXÉCÉbÉ`ÉäÉXÉgÅEÉRÅ[Éã]
	function	:[
		1.ÉÅÉÇÉäÉXÉCÉbÉ`ÅEÉ}ÉVÉìÉpÉâÉÅÅ[É^Å[ÇÃÉäÉXÉgÇÉvÉäÉìÉgÇ∑ÇÈ
	]
	return		:[Ç»Çµ]
	common		:[]
	condition	:[]
	comment		:[PRG*A]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[95/05/22]
	author		:[ç]å˚]
*************************************************************************/
void PrintMemorySwList(void)
{
	FinalListPrintOperation(LST_MEM_SW);
}

/*************************************************************************
	module		:[çHèÍÉtÉ@ÉìÉNÉVÉáÉì]
	function	:[
		1.	çHèÍÉ`ÉFÉbÉNópÇÃÉIÉyÉåÅ[ÉVÉáÉìÇçsÇ§
		,	Ç`ÅFçHèÍÉtÉ@ÉìÉNÉVÉáÉìÉäÉXÉg
		,	ÇaÅFÇkÇdÇcÉeÉXÉg
		,	ÇbÅFÇkÇbÇcÉeÉXÉg
		,	ÇcÅFÉpÉlÉãÉLÅ[ÉeÉXÉg
		,	ÇdÅFÇrÇqÇ`ÇlÉ`ÉFÉbÉN
		,	ÇeÅFÇcÇqÇ`ÇlÉ`ÉFÉbÉN -> OPR_RAM.CÇ…à⁄ìÆÇ≥ÇπÇΩ 1996/07/22 Eguchi
		,	ÇfÅFÇqÇsÇbÉeÉXÉg	 -> OPR_RAM.CÇ…à⁄ìÆÇ≥ÇπÇΩ 1996/07/22 Eguchi
		,	ÇgÅFÇqÇrÇQÇRÇQÇbÉeÉXÉg

	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B
				  Ç◊ÇΩÇ◊ÇΩÇ…Ç©Ç¶ÇΩ]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1995/06/13]
	author		:[ç]å˚,ìnï”àÍèÕ]
*************************************************************************/
void FactoryFunctionMode(void)
{
	UBYTE	key;		/* ∑∞ì¸óÕ√ﬁ∞¿ */
	UBYTE	keytype;

	while (1) {
		DisplayStringHigh(0, D2W_SF_FactoryFunction);
		ClearDisplayLow();

		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key     = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case STOP:
		case KEY_TIME_UP:
			return;
		case ONETOUCH:
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
			switch (key) {
			case ONETOUCH_01_KEY:
				PrintFactoryFunctionList();	/* çHèÍÉtÉ@ÉìÉNÉVÉáÉìÉäÉXÉg */
				return;
			case ONETOUCH_02_KEY:
				SF_All_LED_Test();			/* ÇkÇdÇcÉeÉXÉg				*/
				break;
			case ONETOUCH_03_KEY:
				SF_LCD_Test();				/* ÇkÇbÇcÉeÉXÉg				*/
				break;
			case ONETOUCH_04_KEY:
				SF_PanelKeyTest();			/* ÉpÉlÉãÉLÅ[ÉeÉXÉg			*/
				break;
			case ONETOUCH_05_KEY:
				SF_SRAM_Check();			/* ÇrÇqÇ`ÇlÉeÉXÉg			*/
				return;
			case ONETOUCH_06_KEY:
				SF_DRAM_Check();			/* ÇcÇqÇ`ÇlÉeÉXÉg			*/
				return;
			case ONETOUCH_07_KEY:
				SF_RTCTestFunction();		/* ÇqÇsÇbÉeÉXÉgÉÇÅ[Éh		*/
				return;
			case ONETOUCH_08_KEY:
				SF_RS232CTestFunction();	/* ÇqÇrÇQÇRÇQÇbÉeÉXÉg		*/
				return;
#if (0)		/* É`ÉFÉbÉJÅ[ÇÃÇ› 97/09/10 By M.Kuwahara */
//			case ONETOUCH_09_KEY:
//				SF_CassetteCheck();			/* ÉJÉZÉbÉgÉeÉXÉg			*/
//				break;
#endif
			default:
				NackBuzzer();
				break;
			}
#endif	/* (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L) */
#if (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2)/* By H.Fujimura 1999/01/06 */
			switch (key) {
			case ONETOUCH_01_KEY:
				PrintFactoryFunctionList();	/* çHèÍÉtÉ@ÉìÉNÉVÉáÉìÉäÉXÉg */
				return;
			case ONETOUCH_02_KEY:
				SF_All_LED_Test();			/* ÇkÇdÇcÉeÉXÉg				*/
				break;
			case ONETOUCH_03_KEY:
				SF_LCD_Test();				/* ÇkÇbÇcÉeÉXÉg				*/
				break;
			case ONETOUCH_04_KEY:
				IsSingleKeyOperation = FALSE;	/* íPàÍÉIÉyÉåÅ[ÉVÉáÉìñ≥å¯ */
				SF_PanelKeyTest();			/* ÉpÉlÉãÉLÅ[ÉeÉXÉg			*/
				IsSingleKeyOperation = TRUE;	/* íPàÍÉIÉyÉåÅ[ÉVÉáÉìóLå¯ */
				break;
			case ONETOUCH_05_KEY:
				SF_SRAM_Check();			/* ÇrÇqÇ`ÇlÉeÉXÉg			*/
				return;
			case ONETOUCH_06_KEY:
				SF_DRAM_Check();			/* ÇcÇqÇ`ÇlÉeÉXÉg			*/
				return;
			case ONETOUCH_07_KEY:
				SF_RTCTestFunction();		/* ÇqÇsÇbÉeÉXÉgÉÇÅ[Éh		*/
				return;
 #if (PRO_CLASS1 == ENABLE) /* added by H.Hirao 1999/02/09 */
			case ONETOUCH_08_KEY:
				SF_RS232CTestFunction();	/* ÇqÇrÇQÇRÇQÇbÉeÉXÉg		*/
				return;
 #endif
 #if (PRO_KEYPANEL == PANEL_SATSUKI2)		/* ÇoÇrÇQí≤êÆÉÇÅ[Éh by Y.Kano 2003/10/17 */
 			case ONETOUCH_09_KEY:
				SF_PS2AdjustFunction();		/* ÇoÇrÇQí≤êÆÉÇÅ[Éh			*/
				return;
 			case ONETOUCH_10_KEY:				/* ÇoÇrÇPÅAÇoÇaÇSämîFÉÇÅ[Éh by Y.kano 2003/12/18 */
				SF_PS1_PB4_CheckFunction();		/* ÇoÇrÇPÅAÇoÇaÇSämîFÉÇÅ[Éh	*/
				return;
 #elif (PRO_PAPER_AD_SENSOR_INIT == ENABLE)		/* ÇoÇrÇPÅAÇoÇrÇQÅAÇoÇaÇSËáílê›íËÉÇÅ[Éh by Y.Kano 2004/10/06 */
 			case ONETOUCH_09_KEY:
				SF_PS1_PS2_PB4_AdjustFunction();		/* ÇoÇrÇPÅAÇoÇrÇQÅAÇoÇaÇSËáílê›íËÉÇÅ[Éh	*/
				return;
 #endif
 #if defined (KEISATSU) /* åxé@FAX 05/12/13 êŒã¥ê≥òa */
 			case ONETOUCH_09_KEY:
 				SF_CopyOnetouchA_ToAll(); /* ÉèÉìÉ^ÉbÉ`AÇÃì‡óeÇÇ∑Ç◊ÇƒÇÃÉèÉìÉ^ÉbÉ`ÅAíZèkÇ…ÉRÉsÅ[Ç∑ÇÈ */
 				return;
 			case ONETOUCH_10_KEY:
				SF_TonalTestWithVariableAtt(OPT_MDM_TONAL_1080HZ, 0xFF, D2W_SF_Transmit1100HzTone); /* 1100HzÉgÅ[ÉiÉãÉeÉXÉg */
				return;
 			case ONETOUCH_11_KEY:
				SF_TonalTestWithVariableAtt(OPT_MDM_TONAL_V29_2400_9600, OPT_MDM_PIX_W1_B0, D2W_SF_TransmitV29Data); /* V29ÉgÅ[ÉiÉãÉeÉXÉg */
				return;
 #endif
			default:
				NackBuzzer();
				break;
			}
#endif	/* (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) */
#if (PRO_KEYPANEL == PANEL_STOCKHM2)  /* DVT : Modify end by SMuratec âƒ 2004/11/08 */
			switch (key) {
			case ONETOUCH_01_KEY:
				PrintFactoryFunctionList();	/* çHèÍÉtÉ@ÉìÉNÉVÉáÉìÉäÉXÉg */
				return;
			case ONETOUCH_02_KEY:
				SF_LED_Test();				/* ÇkÇdÇcÉeÉXÉg				*/
				break;
			case ONETOUCH_03_KEY:
				SF_LCD_Test();				/* ÇkÇbÇcÉeÉXÉg				*/
				break;
			case ONETOUCH_04_KEY:
				IsSingleKeyOperation = FALSE;	/* íPàÍÉIÉyÉåÅ[ÉVÉáÉìñ≥å¯ */
				SF_PanelKeyTest();			/* ÉpÉlÉãÉLÅ[ÉeÉXÉg			*/
				IsSingleKeyOperation = TRUE;	/* íPàÍÉIÉyÉåÅ[ÉVÉáÉìóLå¯ */
				break;
			case ONETOUCH_05_KEY:
				SF_SRAM_Check();			/* ÇrÇqÇ`ÇlÉeÉXÉg			*/
				return;
			case ONETOUCH_06_KEY:
				SF_DRAM_Check();			/* ÇcÇqÇ`ÇlÉeÉXÉg			*/
				return;
			case ONETOUCH_07_KEY:
				SF_RTCTestFunction();		/* ÇqÇsÇbÉeÉXÉgÉÇÅ[Éh		*/
				return;
			default:
				NackBuzzer();
				break;
			}
#endif	/* (PRO_KEYPANEL == PANEL_STOCKHM2)  */
/* DVT : Modify end by SMuratec âƒ 2004/11/08 */

#if (PRO_KEYPANEL == PANEL_ANZU_L)
			switch (key) {
			case ONETOUCH_A_KEY:
				PrintFactoryFunctionList();	/* çHèÍÉtÉ@ÉìÉNÉVÉáÉìÉäÉXÉg */
				return;
			case ONETOUCH_B_KEY:
				SF_All_LED_Test();			/* ÇkÇdÇcÉeÉXÉg				*/
				return;
			case ONETOUCH_C_KEY:
				SF_LCD_Test();				/* ÇkÇbÇcÉeÉXÉg				*/
				return;
			case ONETOUCH_D_KEY:
				SF_PanelKeyTest();			/* ÉpÉlÉãÉLÅ[ÉeÉXÉg			*/
				return;
			case ONETOUCH_E_KEY:
				SF_SRAM_Check();			/* ÇrÇqÇ`ÇlÉeÉXÉg			*/
				return;
			case ONETOUCH_F_KEY:
				SF_DRAM_Check();			/* ÇcÇqÇ`ÇlÉeÉXÉg			*/
				return;
			case ONETOUCH_G_KEY:
				SF_RTCTestFunction();		/* ÇqÇsÇbÉeÉXÉgÉÇÅ[Éh		*/
				return;
			case ONETOUCH_H_KEY:
				SF_RS232CTestFunction();	/* ÇqÇrÇQÇRÇQÇbÉeÉXÉg		*/
				return;

			default:
				NackBuzzer();
				break;
			}
#endif	/* (PRO_KEYPANEL == PANEL_ANZU_L) */
			break;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[çHèÍÉtÉ@ÉìÉNÉVÉáÉìÉäÉXÉgÉvÉäÉìÉg]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-A]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1995/06/13]
	author		:[ç]å˚]
*************************************************************************/
void PrintFactoryFunctionList(void)
{
	FinalListPrintOperation(LST_FACT_MENU);
}

/*************************************************************************
	module		:[ÇkÇdÇcÉeÉXÉgÅiëSì_ìîÅAëSè¡ìîÇÃÇ›Åj]
	function	:[
		1.ëSÇkÇdÇcÇÃì_ìîÅ^è¡ìîÇêÿÇËë÷Ç¶ÇÈ
		2.ÇrÇsÇ`ÇqÇsÉLÅ[ÇâüÇ∑Ç≤Ç∆Ç…ëSÇkÇdÇcÇ™ì_ìîÅAè¡ìîÇ∑ÇÈ
		3.ÉXÉgÉbÉvÉLÅ[Ç≈èIóπÇ∑ÇÈÅB
		4.ÉeÉXÉgÇ…ì¸ÇÈëOÇ…ÇkÇdÇcÇÃì_ìîèÛë‘ÇëﬁîÇ∑ÇÈ
		5.ÉeÉXÉgèIóπéûÇÕÇkÇdÇcÇÃì_ìîèÛë‘ÇÉeÉXÉgëOÇÃèÛë‘Ç…ñﬂÇÈ
		6.ÉLÅ[ë“ÇøÇÕâiãvÇ‹ÇøÇ…Ç∑ÇÈ
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-B]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/03/08]
	author		:[èºåG,åKå¥]
*************************************************************************/
void SF_All_LED_Test(void)
{
	UBYTE	keytype;
	UBYTE	port1;
	UBYTE	port2;
	UBYTE	port3;
	UBYTE	type;

	SYS_MachineStatus[SYS_MACHINE_STATUS_RESERVE]	|= SYS_LED_TEST;	/* “≤›Çí Ç¡ÇƒÇ‡LEDÇ™ïœÇÌÇÁÇ»Ç¢ÇÊÇ§Ç…Ω√∞¿ΩON */

	ClearDisplayHigh();						/* è„íiï\é¶ÉNÉäÉA */
	DisplayStringHigh(0 ,D2W_SF_LEDTest );	/* è„íiï\é¶ */

	port1 = SYS_LED1_PortStatus;
	port2 = SYS_LED2_PortStatus;
	port3 = SYS_LCDC_PortStatus;

	type	= 1;
	AllLedOn();		/**	ëSÇkÇdÇcì_ìî	*/
	while (1) {
		OPR_GetKey(KEY_WAIT_FOREVER);	/* ÉLÅ[éÊÇËçûÇ› */
		keytype = GetInputKeyType();
		switch (keytype) {
		case START:
 #if defined(HINOKI3) /* ÇkÇdÇcêßå‰ïœçX by Y.Kano 2004/12/27 */
			if( type == 0x01 ){
				AllLedOn();		/** óŒëSÇkÇdÇcì_ìî	*/
				AlarmLedOff();
			}
			else if ( type == 0x02 ) {
				AllLedOff();	/**	ëSÇkÇdÇcè¡ìî	*/
				AlarmLedOn();		/** ÉAÉâÅ[ÉÄÇkÇdÇcì_ìî	*/
			}
			else if ( type == 0x03 ){
				AllLedOn();		/** ëSÇkÇdÇcì_ìî	*/
			}
			else {
				AllLedOff();	/**	ëSÇkÇdÇcè¡ìî	*/
			}
			type++;
			if ( type == 0x05) {
				type = 0x01;
			}

 #else
			type ^= 0x01;
			if( type == 0x00 ){
				AllLedOff();	/**	ëSÇkÇdÇcè¡ìî	*/
			}else{
				AllLedOn();		/** ëSÇkÇdÇcì_ìî	*/
			}
 #endif
			break;
		case LEFT_ARROW:
			break;
		case STOP:
#if (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2)  /* By H.Fujimura 1999/01/06 */
			SYS_MachineStatus[SYS_MACHINE_STATUS_RESERVE]	&= ~SYS_LED_TEST;	/* ÇkÇdÇcïœçXópÉXÉeÅ[É^ÉXÇnÇeÇe */
			UpdateLED();
#else
 #if (PRO_CPU == SH7043)
			outpw(LED1_PORT,(UWORD)port1);	/**	ÇkÇdÇcÇå≥Ç…ñﬂÇ∑	*/
			outpw(LED2_PORT,(UWORD)port2);
			outpw(LCDC_PORT,(UWORD)port3);
 #endif
			SYS_LED1_PortStatus	= port1;	/** ÇkÇdÇcÉ|Å[ÉgÇå≥Ç…ñﬂÇ∑ */
			SYS_LED2_PortStatus	= port2;
			SYS_LCDC_PortStatus	= port3;
			SYS_MachineStatus[SYS_MACHINE_STATUS_RESERVE]	&= ~SYS_LED_TEST;	/* ÇkÇdÇcïœçXópÉXÉeÅ[É^ÉXÇnÇeÇe */
#endif
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}
/*************************************************************************
	module		:[ÇkÇdÇcÉeÉXÉg]
	function	:[
		1.ëSÇkÇdÇcÇÃì_ìîÅ^è¡ìîÇêÿÇËë÷Ç¶ÇÈ
		2.ã@î\ÉLÅ[Ç≈ëSÇkÇdÇcÇ™ì_ìîÇ∑ÇÈ
		3.ç∂ÉJÅ[É\ÉãÉLÅ[Ç≈ëSÇkÇdÇcÇè¡ìîÇ∑ÇÈÅB
		4.ÉXÉgÉbÉvÉLÅ[Ç≈èIóπÇ∑ÇÈÅB
		5.ÉeÉXÉgÇ…ì¸ÇÈëOÇ…ÇkÇdÇcÇÃì_ìîèÛë‘ÇëﬁîÇ∑ÇÈ
		6.ÉeÉXÉgèIóπéûÇÕÇkÇdÇcÇÃì_ìîèÛë‘ÇÉeÉXÉgëOÇÃèÛë‘Ç…ñﬂÇÈ
		7.ÉLÅ[ë“ÇøÇÕâiãvÇ‹ÇøÇ…Ç∑ÇÈ
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-B]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/03/08]
	author		:[èºåG,åKå¥]
*************************************************************************/
void SF_LED_Test(void)
{
	UBYTE	keytype;
	UWORD	port1;
	UWORD	port2;
	UWORD	port3;
	UBYTE	is_LED;			/* LED ON/OffÃ◊∏ﬁ */
	UBYTE	loop;			/* ì_ìîîzóÒî‘çÜ */
#if (PRO_KEYPANEL == PANEL_STOCKHM2)	/* DVT:Added by SMuratec âƒ 2004/10/11 */	
	int i;
#endif

	SYS_MachineStatus[SYS_MACHINE_STATUS_RESERVE]	|= SYS_LED_TEST;	/* “≤›Çí Ç¡ÇƒÇ‡LEDÇ™ïœÇÌÇÁÇ»Ç¢ÇÊÇ§Ç…Ω√∞¿ΩON */

	ClearDisplayHigh();						/* è„íiï\é¶ÉNÉäÉA */
	DisplayStringHigh(0 ,D2W_SF_LEDTest );	/* è„íiï\é¶ */

	port1 = SYS_LED1_PortStatus;
	port2 = SYS_LED2_PortStatus;
	port3 = SYS_LCDC_PortStatus;

	AllLedOff();	/**	ëSÇkÇdÇcè¡ìî	*/
	keytype	= (UBYTE)NO_EFFECT;
	is_LED	= 0;
	loop	= 0;

	while ( keytype != STOP ) {
		OPR_GetKey(KEY_WAIT_ONE_SECOND);
		keytype = GetInputKeyType();
		switch (keytype) {
		case START:
#if (PRO_KEYPANEL == PANEL_STOCKHM2)	/* DVT:Modify by SMuratec âƒ 2004/10/11 */	
			is_LED++;
			if( is_LED>4 )
			is_LED = 1;
#else			
			if( loop != 0 ){			/* ì_ìîÇ™äJénÇ≥ÇÍÇƒÇ¢ÇÈéû */
				NackBuzzer();
			}
			else{	
				is_LED	= 1;
			}
#endif	/* (PRO_KEYPANEL == PANEL_STOCKHM2) */
			break;
		case STOP:
#if (PRO_CPU == SH7043)
 #if (PRO_CPU_VERSION == SH7043_R)	/*  By O.Kimoto 1998/09/08 */
			outpw(LED1_PORT,(UWORD)port1);	/**	ÇkÇdÇcÇå≥Ç…ñﬂÇ∑	*/
			outpw(LED2_PORT,(UWORD)port2);
			outpw(LCDC_PORT,(UWORD)port3);
 #else
 			/* Ç±Ç±Ç…ÇÕÅAÇgÇhÇmÇnÇjÇhópÇãLèqÇµÇƒÇ≠ÇæÇ≥Ç¢ÅB */
 #endif
#endif
			SYS_LED1_PortStatus	= port1;	/** ÇkÇdÇcÉ|Å[ÉgÇå≥Ç…ñﬂÇ∑ */
			SYS_LED2_PortStatus	= port2;
			SYS_LCDC_PortStatus	= port3;
			SYS_MachineStatus[SYS_MACHINE_STATUS_RESERVE]	&= ~SYS_LED_TEST;	/* ÇkÇdÇcïœçXópÉXÉeÅ[É^ÉXÇnÇeÇe */
			return;
	 	case KEY_TIME_UP:
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
		if( is_LED != 0 ){			/* ì_ìîÇÃéû */
			OrderLedOn( LedArea[loop].Port, LedArea[loop].LedType );
			if( loop < 14 ){		/* ì_ìîìríÜ */
				loop++;
			}
		}
#elif (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) /* For HINOKI By O.Kimoto 1998/09/08 */
		if( is_LED != 0 ){			/* ì_ìîÇÃéû */
			OrderLedOn( LedArea[loop].Port, LedArea[loop].LedType );
			if( loop < 14 ){		/* ì_ìîìríÜ */
				loop++;
			}
		}
#elif (PRO_KEYPANEL == PANEL_STOCKHM2)	/* DVT:Modify by SMuratec âƒ 2004/10/8 */
		if( is_LED == 1 ){	/* óŒìîì_ìî */
			CMN_DisableInterrupt();
			SYS_LED1_PortStatus = 0xff;
			SYS_LED1_PortStatus &= ~ALARM_LED;
			SYS_LED3_PortStatus = 0x01;
			IO__PEDR &= ~IO_BIT_LEWR3;
			CMN_EnableInterrupt();
		}
		if( is_LED == 2 ){	/* ê‘ìîì_ìî */
			OrderLedOn( LedArea[0].Port, LedArea[0].LedType );
		}
		if( is_LED == 3 ){ /* ê‘óŒì_ìî*/
			AllLedOn();
		}
		if( is_LED == 4 ){
			AllLedOff();
		}
#else	/* (PRO_KEYPANEL == PANEL_ANZU_L) */
		if( is_LED != 0 ){			/* ì_ìîÇÃéû */
			OrderLedOn( LedArea[loop].Port, LedArea[loop].LedType );
			if( loop < 17 ){		/* ì_ìîìríÜ */
				loop++;
			}
		}
#endif
	}
}

/*************************************************************************
	module		:[ÇkÇbÇcÉeÉXÉgÅiçHèÍÉtÉ@ÉìÉNÉVÉáÉì)]
	function	:[
		1.àÍâÒñ⁄ÇÃÉXÉ^Å[ÉgÉLÅ[Ç≈ëSçïï\é¶
		2.ìÒâÒñ⁄ÇÃÉXÉ^Å[ÉgÉLÅ[Ç≈ëSîíï\é¶
		3.éOâÒñ⁄ÇÃÉXÉ^Å[ÉgÉLÅ[Ç≈ÉLÉÉÉâÉNÉ^ï\é¶
		4.ÉXÉgÉbÉvÇ≈èIóπÇ∑ÇÈÅB
		5.ÉLÅ[ë“ÇøÇÕâiãvÇ‹ÇøÇ…Ç∑ÇÈ
		6.éOâÒñ⁄à»ç~ÇÃÉXÉ^Å[ÉgÉLÅ[ÇÕå¯Ç©Ç»Ç¢
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-C]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/03/08]
	author		:[èºåG,ç]å˚,åKå¥]
*************************************************************************/
void SF_LCD_Test(void)
{
	UBYTE	keytype;		/* ì¸óÕ∑∞√ﬁ∞¿ */
	UBYTE	set_no;			/* èàóùî‘çÜ */
	UBYTE	loop;			/* Ÿ∞Ãﬂ */
	UBYTE	i;

	/* èâä˙âÊñ  */
	CMN_StringCopy(FunctionDisplayBufferHigh,D2W_SF_LCDTest);
	CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
	set_no	= 0;
	while (1) {
		/* ï\é¶ */
		DisplayStringHigh(0, FunctionDisplayBufferHigh);
		DisplayStringLow(0,  FunctionDisplayBufferLow);

		OPR_GetKey(KEY_WAIT_FOREVER);	/* ÉLÅ[éÊÇËçûÇ› */
		keytype = GetInputKeyType();

#if (PRO_KEYPANEL == PANEL_ANZU_L)
		switch ( keytype ) {
		case START:
			if( set_no == 0 ){
				CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, 0xFF);
				CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, 0xFF);
				set_no++;
			}
			else{
				CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
				CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
				set_no--;
			}
			break;
		case STOP:
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
#else
		switch ( keytype ) {
		case START:
			if( set_no	< 3 ){
				set_no++;
			}
			else{
				NackBuzzer();
			}
			break;
		case STOP:
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
		switch( set_no ){
		case	1:
			/* ëSçïï\é¶ópÇÃÉoÉbÉtÉ@ÇÉZÉbÉg */
			CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, 0xFF);
			CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, 0xFF);
			break;
		case	2:
			/* ëSîíï\é¶ópÇÃÉoÉbÉtÉ@ÇÉZÉbÉg */
			CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
			CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
			break;
		case	3:
#if defined(STOCKHM2) || defined(HINOKI3)	/* DVT : mod by SMuratec C.P 2004/10/11 */ /* Add by Y.Kano 2004/12/22 */
			for( loop = 0; loop < 7; loop++ ){
				FunctionDisplayBufferHigh[loop]	= 'A' + loop;
			}
			for( loop = 0; loop < 8; loop++ ){
				FunctionDisplayBufferLow[loop]	= '1' + loop;
			}
#else
			/* è„íiÇ… 'A Å` T',â∫íiÇ… 'U Å` Z,a Å` n'ÇÉZÉbÉg */
			for( loop = 0; loop < OPR_DISPLAY_MAX; loop++ ){
				FunctionDisplayBufferHigh[loop]	= 'A' + loop;
			}
			i	= 0;
			for( loop = 0; loop < OPR_DISPLAY_MAX; loop++ ){
				if( loop == (26 - OPR_DISPLAY_MAX )){ 	/* è¨ï∂éöÇÃäJén∫∞ƒﬁÇæØƒ */
					i	+= 6;
				}
				FunctionDisplayBufferLow[loop]	= 'A' + OPR_DISPLAY_MAX + i;
				i++;
			}
#endif
			break;
		default:
			break;
		}
#endif
	}
}

/*************************************************************************
	module		:[ëÂï™ópÉpÉlÉãÉ`ÉFÉbÉJÅ[]
	function	:[
		1.ê≥ÇµÇ¢èáî‘Ç≈ÉLÅ[ÇâüÇµÇƒçsÇ≠ÉeÉXÉgÅB
		2.èáî‘í ÇËÇ…ÉLÅ[ÇâüÇ≥Ç»Ç¢Ç∆ÉiÉbÉNÉuÉUÅ[Ç≈ÇÕÇ∂Ç©ÇÍÇÈÅB
		  ê≥ÇµÇ≠'a'Ç‹Ç≈âüÇ≥ÇÍÇΩÇÁèIóπÅB
		3.âüÇ≥ÇÍÇΩÉLÅ[ÇÕåÎÇ¡ÇƒÇ¢ÇƒÇ‡ï\é¶Ç∑ÇÈ
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/07/12]
	author		:[èºåG,ìnï”àÍèÕ,åKå¥]
*************************************************************************/
void SF_PanelKeyTest(void)
{
#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Added by SMuratec L.Z.W 2003/09/10 */
	UBYTE	prog;
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
	UBYTE	i;
	UBYTE   stop;
	UBYTE	key;
	UBYTE	keytype;

	DisplayStringHigh(0, D2W_SF_PanelTest);
	i = 0;
	stop = 0;

	while(1) {
		OPR_GetKey(KEY_WAIT_FOREVER);		/* ÉLÅ[éÊÇËçûÇ› */
		key = GetInputKeyCode();
		keytype = GetInputKeyType();
		CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
		switch (keytype) {
		case	SINGLE:
#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Added by SMuratec L.Z.W 2003/10/23 */
			if (key == MEMORY_TX_KEY) { /* ÉÅÉÇÉäëóêMÉLÅ[âüâ∫Ç≈ÅAï\é¶ÇÕÉÅÉÇÉäÉ\ÉEÉVÉìÇ…Ç∑ÇÈ */
				/** ï\é¶èàóù */
				ClearDisplayLow();
				DisplayStringLow(0 , D2W_SF_MemoryTx);
				break;
			}
			else if (key == AUTO_RX_KEY) { /* é©ìÆéÛêMÉLÅ[âüâ∫Ç≈ÅAï\é¶ÇÕÉWÉÖÉVÉìÇ…Ç∑ÇÈ */
				/** ï\é¶èàóù */
				ClearDisplayLow();
				DisplayStringLow(0 , D2W_SF_Receive);
				break;
			}
#endif /* (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
		case	HOOK:
		case	HOLD:
		case 	FUNCTION:
		case	LEFT_ARROW:
		case	ENTER:
		case	REVIEW:
		case	CLEAR:
		case	DIALMARK:
		case	BROADCAST:
		case	SPECIAL:
		case	GROUP:
		case	SPEED:
		case	STOP:
		case	START:
		case	COPY:
		case	COPY_FAX:
		case	REDIAL:
		case	REDUCTION:
#if (PRO_KEYPANEL == PANEL_POPLAR_B)
		case	MAGNIFICATION:
#endif
#if (PRO_KEYPANEL == PANEL_POPLAR_L)
		case	TONE:			/* í«â¡ 97/11/29 T.Fukumoto */
#endif
		case	BOOK_DOC_SIZE:
		case	COPY_RESET:
#if (PRO_KEYPANEL != PANEL_POPLAR_B)
		case	FLASH:
#endif
#if defined(HINOKI3)	/* ONETOUCH_30_KEYÇ™ÉvÉåÉtÉBÉbÉNÉXÉLÅ[Ç…ïœÇÌÇ¡ÇΩÇÃÇ≈ by K.Watanabe 2004/10/26 */
		case MERCURY:
#endif
			DisplayStringLow(0 , D2W_SF_Receive + (OPR_WORDING_LEN * (key - 1)));
			break;
#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Added by SMuratec L.Z.W 2003/09/10 */
		case	COMM_REPORT:
			DisplayStringLow(0 , D2W_SetCommunicationResult);
			break;
		case	CMD_LIST:
#if 1 /* (í êMä«óùÉLÅ[âüâ∫Ç≈ÅA"ÉcÉEÉVÉìÉJÉJÉìÉä"Çï\é¶Ç∑ÇÈ) Modified by SMuratec L.Z.W 2003/10/23 */
		  	for ( prog = 0;prog < OPR_WORDING_LEN; prog++ )
		  	{
				if (D2W_SetReportMode[prog] != ' ') break;
			}
			CMN_StringCopy(FunctionDisplayBufferLow, &D2W_SetReportMode[prog]);
			DisplayStringLow(0 , FunctionDisplayBufferLow);
			break;
#else
			DisplayStringLow(0 , D2W_PrintCommands);
			break;
#endif
		case	TCH_LIST:
			DisplayStringLow(0 , D2W_PrintOneTouch);
			break;
		case	SPD_LIST:
			DisplayStringLow(0 , D2W_PrintSpeedDial);
			break;
		case	VOLUME:
#if 1 /* (âπó í≤êÆÉLÅ[âüâ∫Ç≈ÅA"ÉIÉìÉäÉáÉE"Çï\é¶Ç∑ÇÈ) Modified by SMuratec L.Z.W 2003/10/23 */
			CMN_StringCopy(FunctionDisplayBufferLow, &D2W_BuzzerVolume[15]);
			DisplayStringLow(0 , FunctionDisplayBufferLow);
			break;
#else
			DisplayStringLow(0 , D2W_BuzzerVolume);
			break;
#endif
#if 0 /* (ï∂éöÉLÅ[âüâ∫Ç≈ÅA"”ºﬁ"Çï\é¶Ç∑ÇÈ) Modified by SMuratec L.Z.W 2003/10/23 */
		case	TONE:
		  	for ( prog = 0;prog < OPR_WORDING_LEN; prog++ )
		  	{
				if (D2W_Tone[prog] != ' ') break;
			}
			CMN_StringCopy(FunctionDisplayBufferLow, &D2W_Tone[prog]);
			DisplayStringLow(0 , FunctionDisplayBufferLow);
			break;
#else
		case	CHARACTER:
			DisplayStringLow(0 , D2W_Character);
			break;
#endif
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
		case	SHARP:
		case	AST:
		case	NUMBER:
			FunctionDisplayBufferLow[0] = key;
			break;
		case	ONETOUCH:
			SetOnetouchCode(&FunctionDisplayBufferLow[0], key, OPR_SET_ONETOUCH_CODE);
			break;
		case	PROGRAM:
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
			FunctionDisplayBufferLow[0] = OPR_PROGRAM_MARK_LEFT;
			CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[1], (UBYTE)(key - ONETOUCH_73_KEY + OPR_PRG_NUMBER_MIN), 2, '0');
			FunctionDisplayBufferLow[3] = OPR_PROGRAM_MARK_RIGHT;
#endif
#if (PRO_KEYPANEL == PANEL_HINOKI) /* By H.Fujimura 1999/01/06 */
 #if defined(HINOKI3)	/* by K.Watanabe 2004/10/18 */
  #if defined (KEISATSU) /* åxé@FAX 05/11/26 êŒã¥ê≥òa */
			switch (key) {
			case ONETOUCH_27_KEY:
				DisplayStringLow(0, D2W_SF_KeidenKanyu);
				break;
			case ONETOUCH_28_KEY:
				DisplayStringLow(0, D2W_SF_IsseiKobetsu);
				break;
			case ONETOUCH_29_KEY:
				DisplayStringLow(0, D2W_SF_S_OnOff);
				break;
			case ONETOUCH_30_KEY:
				DisplayStringLow(0, D2W_SF_KyotsuSenyo);
				break;
			default:
				FunctionDisplayBufferLow[0] = OPR_PROGRAM_MARK;
				CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[1], (UBYTE)(key - ONETOUCH_25_KEY + OPR_PRG_NUMBER_MIN), 1, '0');
				break;
			}
  #else
			FunctionDisplayBufferLow[0] = OPR_PROGRAM_MARK;
			CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[1], (UBYTE)(key - ONETOUCH_25_KEY + OPR_PRG_NUMBER_MIN), 1, '0');
  #endif
 #else
			FunctionDisplayBufferLow[0] = OPR_PROGRAM_MARK_LEFT;
			CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[1], (UBYTE)(key - ONETOUCH_25_KEY + OPR_PRG_NUMBER_MIN), 2, '0');
			FunctionDisplayBufferLow[3] = OPR_PROGRAM_MARK_RIGHT;
 #endif
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
			FunctionDisplayBufferLow[0] = OPR_PROGRAM_MARK;
			CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[1], (UBYTE)(key - PROGRAM_P01 + OPR_PRG_NUMBER_MIN), 2, '0');
#endif
			break;
		}
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
		if ((key >= TEN_SHARP_KEY) && (key <= ONETOUCH_80_KEY)) {
#endif
#if (PRO_KEYPANEL == PANEL_HINOKI) /* By H.Fujimura 1999/01/06 */
 #if defined (KEISATSU) /* åxé@FAX 05/11/26 êŒã¥ê≥òa */
		if ((key >= TEN_SHARP_KEY) && (key <= ONETOUCH_26_KEY)) {
 #else
		if ((key >= TEN_SHARP_KEY) && (key <= ONETOUCH_30_KEY)) {
 #endif
#endif
#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Added by SMuratec L.Z.W 2003/09/16 */
		if ((key >= TEN_SHARP_KEY) && (key <= ONETOUCH_20_KEY)) {
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
		if ((key >= TEN_SHARP_KEY) && (key <= PROGRAM_P12)) {
#endif
			/** ï\é¶èàóù */
			ClearDisplayLow();
			DisplayStringLow(0, FunctionDisplayBufferLow);
		}

#if (PRO_KEYPANEL == PANEL_ANZU_L)	/* ïœçXÇµÇ‹ÇµÇΩ 1997/10/01 Y.Matsukuma */
	/* ÉAÉìÉYÇÕèáî‘ä÷åWÇ»Çµ */
		if (key == STOP_KEY) {
			if (stop != 0) {
				return;
			}
			else {
				stop++;
			}
		}
		else {
			stop = 0;
		}
#else	/* É|ÉvÉâÇÕÇ±ÇÍ */
		if (key == KeyArea[i]) {			/* ì¸óÕÇnÇjÇÃéû */
#if (PRO_KEYPANEL == PANEL_STOCKHM2) /* Modify by SMuratec L.Z.W 2004/10/08 */
			if (key == ONETOUCH_20_KEY) {			/* ëSÉLÅ[èIóπ */
#elif defined(HINOKI3)		/* Add by Y.Kano 2004/12/25 */
 #if (PRO_PREFIX_KEY == ENABLE) /* åxé@FAX 05/11/26 êŒã¥ê≥òa */
			if (key == MERCURY_KEY) {			/* ëSÉLÅ[èIóπ */
 #else
			if (key == ONETOUCH_30_KEY) {			/* ëSÉLÅ[èIóπ */
 #endif
#else
			if (key == START_KEY) {			/* ëSÉLÅ[èIóπ */
#endif
				wai_tsk( 200 );
				AckBuzzer();
				wai_tsk( 20 );
				AckBuzzer();
				wai_tsk( 20 );
				AckBuzzer();
				ClearDisplayLow();
				DisplayStringLow(0 , D2W_SF_OK);
				OPR_GetKey(KEY_WAIT_2_SECOND);		/* ÉLÅ[éÊÇËçûÇ› */
				key = GetInputKeyCode();
				keytype = GetInputKeyType();
				switch (keytype) {
					case STOP:
						break;
					default:
						return;
				}
				i = 0;
				stop = 1;
			}
			else {
			/*	AckBuzzer();	By M.Tachibana 1997/06/17 */
				i++;
				stop = 0;
           	}
		}
		else{
			if (key == STOP_KEY) {
				if (stop != 0) {
					return;
				}
				else {
					stop++;
				}
			}
			else {
				stop = 0;
			}
			NackBuzzer();
		}
#endif
	}
}

/*************************************************************************
	module		:[çHèÍÉtÉ@ÉìÉNÉVÉáÉìÅFÇqÇsÇbï]âøÉeÉXÉgÉÇÅ[Éh]
	function	:[
		1.ÇqÇsÇbÇÃí≤êÆÇçsÇ§
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-G]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[95/05/20]
	author		:[ç]å˚,ìnï”àÍèÕ]
*************************************************************************/
void SF_RTCTestFunction(void)
{
	UBYTE keytype;

	DisplayStringHigh(0, D2W_SF_RTCTest);
	ClearDisplayLow();

	if (!CheckRTC_TestEnable()) {	/* RTCÉeÉXÉgÇ™ïsâ¬î\Ç»éû */
		NackBuzzer();
		DisplayStringLow(0, D2W_SF_NG);	/* "NG                  " */

		while (keytype != STOP) {	/* ÉXÉgÉbÉvÉLÅ[Ç™âüÇ≥ÇÍÇÈÇ‹Ç≈åãâ ï\é¶ÇÇµÇ‹Ç∑ */
			OPR_GetKey(KEY_WAIT_FOREVER);
			keytype = GetInputKeyType();
			if ((keytype != STOP) && (keytype != NO_EFFECT)) {
				NackBuzzer();
			}
		}

		/* ì¡Ç…ñ‚ëËÇÕñ≥Ç¢Ç∆évÇ¢Ç‹Ç∑Ç™ÅAàÍâûèIóπéûÇÃå`ÇçáÇÌÇπÇƒÇ®Ç´Ç‹Ç∑ */
		RTCTestEnd();
		return;
	}
	else {							/* RTCÉeÉXÉgÇ™â¬î\Ç»éû */
		DisplayStringLow(0, D2W_SF_OK);	/* "OK                  " */
	}

	/* RTCÉeÉXÉgÉXÉ^Å[Ég */
	RTCTestStart();

	while (1) {
		OPR_GetKey(KEY_WAIT_FOREVER);
		keytype = GetInputKeyType();

		switch (keytype) {
		case STOP:
			/* TEST èIóπ */
			RTCTestEnd();
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[çHèÍÉtÉ@ÉìÉNÉVÉáÉìÅFÇqÇrÇQÇRÇQÇbÉeÉXÉg]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/03/11]
	author		:[èºåG,ìnï”àÍèÕ]
*************************************************************************/
void SF_RS232CTestFunction(void)
{
#if (PRO_CLASS1 == ENABLE)
	UBYTE	hex_code;			/* RS232C√Ωƒ√ﬁ∞¿ */
	UBYTE	key;
	UBYTE	keytype;
	MESSAGE_t *WaitData;			/* “Øæ∞ºﬁ */
	MESSAGE_t *wait_sub;			/* “Øæ∞ºﬁë“îïœêî */


	if (SYS_RS232C_Exist == 0) { /* RS232CäÓî’Ç™Ç»Ç¢ 1996/03/12 Eguchi */
		NackBuzzer();
		return;
	}

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	DisplayStringHigh(0, D2W_SF_RS232CTest);	/* "RS232C Test         " */
	ClearDisplayLow();

	while (1) {

		hex_code = 0;

		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case STOP:
			return;
		case ONETOUCH:
 #if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L) || (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 
			switch (key) {
			case ONETOUCH_01_KEY:	/* ê‹ÇËï‘Çµ */
				hex_code = 'A';
				break;
			case ONETOUCH_02_KEY:	/* ëóêM */
				hex_code = 0x01;
				break;
			case ONETOUCH_03_KEY:	/* éÛêM */
				hex_code = 0x02;
				break;
			default:
				NackBuzzer();
				break;
			}
 #endif
 #if (PRO_KEYPANEL == PANEL_ANZU_L)
			switch (key) {
			case ONETOUCH_A_KEY:	/* ê‹ÇËï‘Çµ */
				hex_code = 'A';
				break;
			case ONETOUCH_B_KEY:	/* ëóêM */
				hex_code = 0x01;
				break;
			case ONETOUCH_C_KEY:	/* éÛêM */
				hex_code = 0x02;
				break;
			default:
				NackBuzzer();
				break;
			}
 #endif
			ClearDisplayLow();
			break;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}

		CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');

		if (hex_code != 0) {
			/*OperationMessageToMain.Item = FROM_OPERATION; 1996/07/08 Eguchi */
			OperationMessageToMain.Message = MSG_SERV_RS232C_TEST;
			OperationMessageToMain.SubMessage1 = hex_code;
			snd_msg( mbxno.MAN_Task, &OperationMessageToMain );
			MainTaskExecWait();
			for (;;) {
				rcv_msg( mbxno.OPR_Task, &WaitData );
				wait_sub = WaitData;
				if ( wait_sub->Item == FROM_MAIN && wait_sub->Message == CL1_RS232C_TEST_END ) {
					break;
				}
			}

			if ( wait_sub->SubMessage1 != CHECK_OK ) {
				DisplayStringLow(0, D2W_SF_NG);
			}
			else {
				DisplayStringLow(0, D2W_SF_OK);
			}
		}
	}
#else
	NackBuzzer();
#endif
}

#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2)		/* ÇoÇrÇQí≤êÆÉÇÅ[Éh by Y.Kano 2003/10/17 */
/*************************************************************************
	module		:[çHèÍÉtÉ@ÉìÉNÉVÉáÉìÅFÇoÇrÇQí≤êÆÉÇÅ[Éh]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/10/17]
	author		:[â¡î[]
*************************************************************************/
void SF_PS2AdjustFunction(void)
{
	UBYTE	result;
	UBYTE	key;
	UBYTE	keytype;

	result = FALSE;

#if defined(SATSUKI2) || defined(STOCKHM2)	/* Add by Y.Kano 2003/12/04 */
	OPR_PS2_Adjust_Flg = TRUE;		/* PS2í≤êÆíÜÉtÉâÉOON by Y.Kano 2003/12/04 */
#endif

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0,D2W_SF_PS2AdjustMode);	/* "PS2 ¡Æ≥æ≤ ”∞ƒﬁ      " */

	/* â∫íiï\é¶ */
	FlashDisplayStringLow(D2W_EnterStop);		/* "          æØƒ/ΩƒØÃﬂ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case ENTER:
			result = PS2VolumueAdjustStanby();		/* PS2É{ÉäÉÖÅ[ÉÄí≤êÆèÄîı */
			break;
		case STOP:
		case KEY_TIME_UP:
			OPR_PS2_Adjust_Flg = FALSE;			/* PS2í≤êÆíÜÉtÉâÉOOFFÇ™î≤ÇØÇƒÇÈÅBO.Oshima 2003/12/14 */
			return;

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
		if (result == TRUE) {
			return;
		}
	}
}
/*************************************************************************
	module		:[ÇoÇrÇQí≤êÆèÄîı]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/10/17]
	author		:[â¡î[]
*************************************************************************/
UBYTE PS2VolumueAdjustStanby(void)
{
	UBYTE	result;
	UBYTE	key;
	UBYTE	keytype;

	result = FALSE;

#if(1) /* ñﬂÇµÇ‹Ç∑ÅBÉZÉìÉTÅ[í≤êÆëOÇ»ÇÃÇ…ÉZÉìÉTÅ[ÇÃílÇéQè∆Ç∑ÇÈÇÃÇÕïœÅBO.Oshima 2003/12/14 */
	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_ReplaceRxPaper);	/* "∑€∏º ¶ Œ∑≠≥ º√∏¿ﬁª≤ " */

#else
/*------------< í«â¡ by Y.kano 2003/12/04 >-------------*/

	if ((!QueryPs1On()) && (!QueryPs2On())) {
		/*-----------*/
		/** âÊñ ï\é¶ */
		/*-----------*/
		/* è„íiï\é¶ */
		DisplayStringHigh(0, D2W_ReplaceRxPaper);	/* "∑€∏º ¶ Œ∑≠≥ º√∏¿ﬁª≤ " */
	}

	while(1) {
		if ((QueryPs1On()) && (QueryPs2On())) {
			/*-----------*/
			/** âÊñ ï\é¶ */
			/*-----------*/
			/* è„íiï\é¶ */
			DisplayStringHigh(0,D2W_SF_PS2AdjustMode);	/* "PS2 ¡Æ≥æ≤ ”∞ƒﬁ      " */
			break;
		}
	}
	result = FALSE;
/*------------------------------------------------------*/
#endif

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case ENTER:
			result = PS2VolumueAdjust();		/* PS2É{ÉäÉÖÅ[ÉÄí≤êÆ */
			break;
		case STOP:
		case KEY_TIME_UP:
			result = TRUE;
			break;

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
		if (result == TRUE) {
			OPR_PS2_Adjust_Flg = FALSE;		/* PS2í≤êÆíÜÉtÉâÉOOFF by Y.Kano 2003/12/04 */
			return(OK);
		}
	}
}

/*************************************************************************
	module		:[ÇoÇrÇQí≤êÆ]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/10/17]
	author		:[â¡î[]
*************************************************************************/
UBYTE PS2VolumueAdjust(void)
{
	UBYTE	key;
	UBYTE	keytype;

	PS2Volumue = 0;

#if (0)		/* PS1,PB4ämîFÉÇÅ[ÉhÇ≈Ç`Å^ÇcílÇÃéÊçûÇ›ÇçsÇ¢Ç‹Ç∑ÅBby Y.kano 2003/12/18 */
 #if defined(SATSUKI2)	/* ÇoÇaÇSÉZÉìÉTÅ[ÉeÉXÉgóp by Y.Kano 2003/12/12 */
	SYB_MachineParameter[M_PARA_SW_J5] = AD_PB4();		/* ÇoÇaÇSÇÃÇ`ÇcíléÊçûÇ›ÅBby Y.Kano 2003/10/31 */
	SYB_MachineParameter[M_PARA_SW_J4] = AD_PS1();		/* ÇoÇrÇPÇÃÇ`ÇcíléÊçûÇ›ÅBby Y.Kano 2003/10/31 */
 #endif
#endif
	while(1) {

		if ((UWORD)AD_PS2() >= ((UWORD)SYB_PS2LimitValue)) {
			/* è„íiï\é¶ */
			DisplayStringHigh(0, D2W_PS2VolumueFullLight_1);	/* "PS2 ¶ –∑ﬁ Õ ª≤¿ﬁ≤πﬁ›" */
			DisplayStringLow(0, D2W_PS2VolumueFullLight_2);		/* "œ‹º√∏¿ﬁª≤           " */
		}
		else {
			if (((UWORD)AD_PS2() >= 0x0000) && ((UWORD)AD_PS2() <= 0x000e)) {	/* 00hÅ`0Eh(0.0Å`0.3V) */
				PS2Volumue = VOLUMUE_0;		/* ç∂ñÓàÛÇPÉPï\é¶ 		*/
			}
			else if (((UWORD)AD_PS2() >= 0x000f) && ((UWORD)AD_PS2() <= 0x0017)) {	/* 0FhÅ`17h */
				PS2Volumue = VOLUMUE_OK;		/* ÉZÉbÉgÉJÉìÉäÉáÉEï\é¶ */
			}
			else if (((UWORD)AD_PS2() >= 0x0018) && ((UWORD)AD_PS2() <= 0x0027)) {	/* 18hÅ`27h(0.46Å`0.8V) */
				PS2Volumue = VOLUMUE_1;		/* âEñÓàÛÇPÉPï\é¶ 		*/
			}
			else if (((UWORD)AD_PS2() >= 0x0028) && ((UWORD)AD_PS2() <= 0x0037)) {	/* 28hÅ`37h(0.8Å`1.12V) */
				PS2Volumue = VOLUMUE_2;		/* âEñÓàÛÇQÉPï\é¶ 		*/
			}
			else {		/* 38hÅ`FFH */
				PS2Volumue = VOLUMUE_3;		/* âEñÓàÛÇRÉPï\é¶ 		*/				/* 38hÅ`ffh(1.12Å`5.0V) */
			}
			DisplayPS2Volumue();
		}
		
		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_SECOND);	/* ÉLÅ[ë“ÇøÇPïb */
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case ENTER:
			ChildDisplayStringLow(D2W_PS2_Complete);	/* " **   Complete   ** " */
			return(OK);

		case STOP:
			return(OK);

		case KEY_TIME_UP:
			break;

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÇoÇrÇQÉ{ÉäÉÖÅ[ÉÄó ï\é¶]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/10/17]
	author		:[â¡î[]
*************************************************************************/
void DisplayPS2Volumue(void)
{
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_PS2VolumueTitle);		/* "     PS2 Œﬁÿ≠∞—     " */
	CMN_MemorySet(&FunctionDisplayBufferLow[0], 20, ' ');
	FunctionDisplayBufferLow[10]  = 0x2B;		/* + */

	switch (PS2Volumue) {
	case VOLUMUE_0:					/* ç∂ñÓàÛÇPÉPï\é¶	*/
		FunctionDisplayBufferLow[9]  = 0x7F;		/* Å© */
		/* â∫íiï\é¶ */
		DisplayStringLow(0, FunctionDisplayBufferLow);
		break;										
	case VOLUMUE_1:					/* âEñÓàÛÇPÉPï\é¶	*/
		FunctionDisplayBufferLow[11]  = 0x7E;		/* Å® */
		/* â∫íiï\é¶ */
		DisplayStringLow(0, FunctionDisplayBufferLow);
		break;
	case VOLUMUE_2:					/* âEñÓàÛÇQÉPï\é¶	*/
		FunctionDisplayBufferLow[11]  = 0x7E;		/* Å® */
		FunctionDisplayBufferLow[12]  = 0x7E;		/* Å® */
		/* â∫íiï\é¶ */
		DisplayStringLow(0, FunctionDisplayBufferLow);
		break;
	case VOLUMUE_3:					/* âEñÓàÛÇRÉPï\é¶	*/
		FunctionDisplayBufferLow[11]  = 0x7E;		/* Å® */
		FunctionDisplayBufferLow[12]  = 0x7E;		/* Å® */
		FunctionDisplayBufferLow[13]  = 0x7E;		/* Å® */
		/* â∫íiï\é¶ */
		DisplayStringLow(0, FunctionDisplayBufferLow);
		break;
	case VOLUMUE_OK:				/* ÇnÇjï\é¶		*/
		/* â∫íiï\é¶ */
		DisplayStringLow(0, D2W_PS2_OK);
		break;
	default:
		break;
	}
}

/*************************************************************************
	module		:[çHèÍÉtÉ@ÉìÉNÉVÉáÉìÅFÇoÇrÇPÅAÇoÇaÇSämîFÉÇÅ[Éh]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/12/18]
	author		:[â¡î[]
*************************************************************************/
void SF_PS1_PB4_CheckFunction(void)
{
	UBYTE	result;
	UBYTE	key;
	UBYTE	keytype;

	result = FALSE;

#if defined(SATSUKI2) || defined(STOCKHM2)	/* Add by Y.Kano 2003/12/04 */
	OPR_PS2_Adjust_Flg = TRUE;		/* PS2í≤êÆíÜÉtÉâÉOON by Y.Kano 2003/12/04 */
#endif

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0,D2W_SF_PS1_PB4_CheckMode);	/* "PS1,PB4 ∂∏∆›”∞ƒﬁ    " */

	/* â∫íiï\é¶ */
	FlashDisplayStringLow(D2W_EnterStop);		/* "          æØƒ/ΩƒØÃﬂ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case ENTER:
			result = PS1_PB4_Paper_Set_CheckStanby();	/* PS1,PB4ÅiãLò^éÜóLÇËÅjämîFèÄîı */
			break;
		case STOP:
		case KEY_TIME_UP:
			OPR_PS2_Adjust_Flg = FALSE;			/* PS2í≤êÆíÜÉtÉâÉOOFFÇ™î≤ÇØÇƒÇÈÅBO.Oshima 2003/12/14 */
			return;

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
		if (result == TRUE) {
			return;
		}
	}
}
/*************************************************************************
	module		:[ÇoÇrÇPÅAÇoÇaÇSÅiãLò^éÜóLÇËÅjämîFèÄîı]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/12/18]
	author		:[â¡î[]
*************************************************************************/
UBYTE PS1_PB4_Paper_Set_CheckStanby(void)
{
	UBYTE	result;
	UBYTE	key;
	UBYTE	keytype;

	result = FALSE;

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_ReplaceRxPaper);	/* "∑€∏º ¶ Œ∑≠≥ º√∏¿ﬁª≤ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case ENTER:
			result = PS1_PB4_PaperSet_Check();		/* PS1,PB4ÅiãLò^éÜóLÇËÅjämîF */
			break;
		case STOP:
		case KEY_TIME_UP:
			result = TRUE;
			break;

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
		if (result == TRUE) {
			OPR_PS2_Adjust_Flg = FALSE;		/* PS2í≤êÆíÜÉtÉâÉOOFF by Y.Kano 2003/12/04 */
			return(OK);
		}
	}
}

/*************************************************************************
	module		:[ÇoÇrÇPÅAÇoÇaÇSÅiãLò^éÜóLÇËÅjämîF]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/12/18]
	author		:[â¡î[]
*************************************************************************/
UBYTE PS1_PB4_PaperSet_Check(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	result;
	UBYTE	PS1_result;
	UBYTE	PB4_result;

	result = FALSE;

	SYB_MachineParameter[M_PARA_SW_J2] = AD_PS1();		/* ÇoÇrÇPÅiãLò^éÜóLÇËÅjÇÃÇ`ÇcíléÊçûÇ›ÅBby Y.Kano 2003/12/18 */
	SYB_MachineParameter[M_PARA_SW_J4] = AD_PB4();		/* ÇoÇaÇSÅiãLò^éÜóLÇËÅjÇÃÇ`ÇcíléÊçûÇ›ÅBby Y.Kano 2003/12/18 */

	/* ÇoÇrÇPÇÃîªíË */
	if (SYB_MachineParameter[M_PARA_SW_J2] < 0x38) {
		PS1_result = TRUE;		/* ÇoÇrÇPîªíËÇnÇj */
	}
	else {
		PS1_result = FALSE;		/* ÇoÇrÇPîªíËÇmÇf */
	}

	/* ÇoÇaÇSÇÃîªíË */
	if (SYB_MachineParameter[M_PARA_SW_J4] < 0x38) {
		PB4_result = TRUE;		/* ÇoÇaÇSîªíËÇnÇj */
	}
	else {
		PB4_result = FALSE;		/* ÇoÇaÇSîªíËÇmÇf */
	}
	FlashDisplayStringLow(D2W_EnterStop);			/* "          æØƒ/ΩƒØÃﬂ " */

	DisplayPS1_PB4_Set(PS1_result, PB4_result);		/* PS1,PB4ÇÃîªíËåãâ ï\é¶ */

	if ((PS1_result == TRUE) && (PB4_result == TRUE)) {
		EndBuzzer();	/* èIóπâπñ¬ìÆ */
	}
	else {
		NackBuzzer();	/* ÉiÉbÉNâπñ¬ìÆ */
	}

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case ENTER:
			result = PS1_PB4_Paper_Non_CheckStanby();		/* PS1,PB4ÅiãLò^éÜñ≥ÇµÅjämîFèÄîı */
			break;
		case STOP:
		case KEY_TIME_UP:
			OPR_PS2_Adjust_Flg = FALSE;			/* PS2í≤êÆíÜÉtÉâÉOOFFÇ™î≤ÇØÇƒÇÈÅBO.Oshima 2003/12/14 */
			return(OK);

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
		if (result == TRUE) {
			return(OK);
		}
	}
}

/*************************************************************************
	module		:[ÇoÇrÇPÅCÇoÇaÇSÇÃîªíËåãâ ï\é¶]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/12/18]
	author		:[â¡î[]
*************************************************************************/
void DisplayPS1_PB4_Set(UBYTE PS1_result, UBYTE PB4_result)
{
	CMN_MemorySet(&FunctionDisplayBufferHigh[0], 20, ' ');

	/* è„íiï\é¶ */
	FunctionDisplayBufferHigh[0]  = 'P';		/* PS1ï\é¶ */
	FunctionDisplayBufferHigh[1]  = 'S';
	FunctionDisplayBufferHigh[2]  = '1';
	FunctionDisplayBufferHigh[3]  = ':';

	FunctionDisplayBufferHigh[8]  = 'P';		/* PB4ï\é¶ */
	FunctionDisplayBufferHigh[9]  = 'B';
	FunctionDisplayBufferHigh[10]  = '4';
	FunctionDisplayBufferHigh[11]  = ':';

	switch (PS1_result) {
	case TRUE:					/* ÇnÇjï\é¶	*/
		FunctionDisplayBufferHigh[4]  = 'O';		/* OKï\é¶ */
		FunctionDisplayBufferHigh[5]  = 'K';
		break;										
	case FALSE:					/* ÇmÇfï\é¶	*/
		FunctionDisplayBufferHigh[4]  = 'N';		/* NGï\é¶ */
		FunctionDisplayBufferHigh[5]  = 'G';
		break;
	default:
		break;
	}
	switch (PB4_result) {
	case TRUE:					/* ÇnÇjï\é¶	*/
		FunctionDisplayBufferHigh[12]  = 	'O';		/* OKï\é¶ */
		FunctionDisplayBufferHigh[13]  = 	'K';
		break;										
	case FALSE:					/* ÇmÇfï\é¶	*/
		FunctionDisplayBufferHigh[12]  =	 'N';		/* NGï\é¶ */
		FunctionDisplayBufferHigh[13]  =	 'G';
		break;
	default:
		break;
	}
	/* è„íiï\é¶ */
	DisplayStringHigh(0, FunctionDisplayBufferHigh);
}

/*************************************************************************
	module		:[ÇoÇrÇPÅAÇoÇaÇSÅiãLò^éÜñ≥ÇµÅjämîFèÄîı]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/12/18]
	author		:[â¡î[]
*************************************************************************/
UBYTE PS1_PB4_Paper_Non_CheckStanby(void)
{
	UBYTE	result;
	UBYTE	key;
	UBYTE	keytype;

	result = FALSE;

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_PleaseNonPaper);	/* "∑€∏º ¶ ƒÿ…øﬁ≤√∏¿ﬁª≤ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case ENTER:
			result = PS1_PB4_PaperNon_Check();		/* PS1,PB4ÅiãLò^éÜñ≥ÇµÅjämîF */
			break;
		case STOP:
		case KEY_TIME_UP:
			result = TRUE;
			break;

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
		if (result == TRUE) {
			OPR_PS2_Adjust_Flg = FALSE;		/* PS2í≤êÆíÜÉtÉâÉOOFF by Y.Kano 2003/12/04 */
			return(OK);
		}
	}
}

/*************************************************************************
	module		:[ÇoÇrÇPÅAÇoÇaÇSÅiãLò^éÜñ≥ÇµÅjämîF]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/12/18]
	author		:[â¡î[]
*************************************************************************/
UBYTE PS1_PB4_PaperNon_Check(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	PS1_result;
	UBYTE	PB4_result;

	SYB_MachineParameter[M_PARA_SW_J3] = AD_PS1();		/* ÇoÇrÇPÅiãLò^éÜñ≥ÇµÅjÇÃÇ`ÇcíléÊçûÇ›ÅBby Y.Kano 2003/12/18 */
	SYB_MachineParameter[M_PARA_SW_J5] = AD_PB4();		/* ÇoÇaÇSÅiãLò^éÜñ≥ÇµÅjÇÃÇ`ÇcíléÊçûÇ›ÅBby Y.Kano 2003/12/18 */

	/* ÇoÇrÇPÇÃîªíË */
	if (SYB_MachineParameter[M_PARA_SW_J3] > 0xa8) {
		PS1_result = TRUE;		/* ÇoÇrÇPîªíËÇnÇj */
	}
	else {
		PS1_result = FALSE;		/* ÇoÇrÇPîªíËÇmÇf */
	}

	/* ÇoÇaÇSÇÃîªíË */
	if (SYB_MachineParameter[M_PARA_SW_J5] > 0xa8) {
		PB4_result = TRUE;		/* ÇoÇaÇSîªíËÇnÇj */
	}
	else {
		PB4_result = FALSE;		/* ÇoÇaÇSîªíËÇmÇf */
	}
	FlashDisplayStringLow(D2W_Stop);				/* "              ΩƒØÃﬂ " */

	DisplayPS1_PB4_Set(PS1_result, PB4_result);		/* PS1,PB4ÇÃîªíËåãâ ï\é¶ */

	if ((PS1_result == TRUE) && (PB4_result == TRUE)) {
		EndBuzzer();	/* èIóπâπñ¬ìÆ */
	}
	else {
		NackBuzzer();	/* ÉiÉbÉNâπñ¬ìÆ */
	}

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case STOP:
		case KEY_TIME_UP:
			OPR_PS2_Adjust_Flg = FALSE;			/* PS2í≤êÆíÜÉtÉâÉOOFFÇ™î≤ÇØÇƒÇÈÅBO.Oshima 2003/12/14 */
			return(OK);

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
}

#endif	/* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */

#if (PRO_PAPER_AD_SENSOR_INIT == ENABLE)	/* ÇoÇrÇPÅAÇoÇrÇQÅAÇoÇaÇSËáílê›íËÉÇÅ[Éh by Y.Kano 2004/10/06 */
/*************************************************************************
	module		:[çHèÍÉtÉ@ÉìÉNÉVÉáÉìÅFÇoÇrÇPÅAÇoÇrÇQÅAÇoÇaÇSËáílê›íËÉÇÅ[Éh]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2004/10/06]
	author		:[â¡î[]
*************************************************************************/
void SF_PS1_PS2_PB4_AdjustFunction(void)
{
	UBYTE	key;
	UBYTE	keytype;

	OPR_PaperSensor_Adjust_Flg = TRUE;		/* PS1,PS2,PB4ê›íËíÜÉtÉâÉOON */

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0,D2W_SF_PS1_PS2_PB4_AdjustMode);	/* "PS1,PS2,PB4 º∑≤¡æØ√≤" */

	/* â∫íiï\é¶ */
	FlashDisplayStringLow(D2W_EnterStop);		/* "          æØƒ/ΩƒØÃﬂ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case ENTER:
			PS1_PS2_PB4_Paper_Non_Stanby();	/* PS1,PS2,PB4ÅiãLò^éÜñ≥ÇµÅjèÄîı */
			OPR_PaperSensor_Adjust_Flg = FALSE;			/* PS1,PS2,PB4ê›íËíÜÉtÉâÉOOFF */
			return;
			break;
		case STOP:
		case KEY_TIME_UP:
			OPR_PaperSensor_Adjust_Flg = FALSE;			/* PS1,PS2,PB4ê›íËíÜÉtÉâÉOOFF */
			return;

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
}
/*************************************************************************
	module		:[ÇoÇrÇPÅAÇoÇrÇQÅAÇoÇaÇSÅiãLò^éÜñ≥ÇµÅjèÄîı]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/12/18]
	author		:[â¡î[]
*************************************************************************/
void PS1_PS2_PB4_Paper_Non_Stanby(void)
{
	UBYTE	key;
	UBYTE	keytype;

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_PleaseNonPaper);	/* "∑€∏º ¶ ƒÿ…øﬁ≤√∏¿ﬁª≤ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case ENTER:
			PS1_PS2_PB4_SensorThresholdSet();		/* PS1,PS2,PB4Ëáílê›íË */
			return;
		case STOP:
		case KEY_TIME_UP:
			return;
		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÇoÇrÇPÅAÇoÇrÇQÅAÇoÇaÇSËáílê›íË]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/12/18]
	author		:[â¡î[]
*************************************************************************/
void PS1_PS2_PB4_SensorThresholdSet(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	result;

	result = OK;

	SYB_MachineParameter[M_PARA_SW_J4] = (UBYTE)AD_PS1();		/* ÇoÇrÇPÅiãLò^éÜñ≥ÇµÅjÇÃÇ`ÇcíléÊçûÇ›ÅB */
	SYB_MachineParameter[M_PARA_SW_J5] = (UBYTE)AD_PS2();		/* ÇoÇrÇQÅiãLò^éÜñ≥ÇµÅjÇÃÇ`ÇcíléÊçûÇ›ÅB */
	SYB_MachineParameter[M_PARA_SW_J6] = (UBYTE)AD_PB4();		/* ÇoÇaÇSÅiãLò^éÜñ≥ÇµÅjÇÃÇ`ÇcíléÊçûÇ›ÅB */

	if (SYB_MachineParameter[M_PARA_SW_J4] < 0x33) {
		if (SYB_MachineParameter[M_PARA_SW_J5] < 0x33) {
			if (SYB_MachineParameter[M_PARA_SW_J6] < 0x33) {
				/* è„íiï\é¶ */
				DisplayStringHigh(0,D2W_SF_PS1_PS2_PB4_Error);			/* "PS1,PS2,PB4 ƒÿ∫–¡¥◊∞" */
			}
			else {
				/* è„íiï\é¶ */
				DisplayStringHigh(0,D2W_SF_PS1_PS2_Error);				/* "PS1,PS2 ƒÿ∫–¡¥◊∞    " */
			}
		}
		else {
			if (SYB_MachineParameter[M_PARA_SW_J6] < 0x33) {
				DisplayStringHigh(0,D2W_SF_PS1_PB4_Error);				/* "PS1,PB4 ƒÿ∫–¡¥◊∞    " */
			}
			else {
				DisplayStringHigh(0,D2W_SF_PS1_Error);					/* "PS1 ƒÿ∫–¡¥◊∞        " */
			}
		}
		NackBuzzer();	/* ÉiÉbÉNâπñ¬ìÆ */
		result = NG;
	}
	else if (SYB_MachineParameter[M_PARA_SW_J5] < 0x33) {
		if (SYB_MachineParameter[M_PARA_SW_J6] < 0x33) {
			DisplayStringHigh(0,D2W_SF_PS2_PB4_Error);				/* "PS2,PB4 ƒÿ∫–¡¥◊∞    " */
		}
		else {
			DisplayStringHigh(0,D2W_SF_PS2_Error);					/* "PS2 ƒÿ∫–¡¥◊∞        " */
		}
		NackBuzzer();	/* ÉiÉbÉNâπñ¬ìÆ */
		result = NG;
	}
	else if (SYB_MachineParameter[M_PARA_SW_J6] < 0x33) {
		DisplayStringHigh(0,D2W_SF_PB4_Error);						/* "PB4 ƒÿ∫–¡¥◊∞        " */
		NackBuzzer();	/* ÉiÉbÉNâπñ¬ìÆ */
		result = NG;
	}

	if (result) {
		/* ÇoÇrÇPÇÃËáílÉZÉbÉg */
		SYB_MachineParameter[M_PARA_SW_J1] = (SYB_MachineParameter[M_PARA_SW_J4] - 0x19);

		/* ÇoÇrÇQÇÃËáílÉZÉbÉg */
		SYB_MachineParameter[M_PARA_SW_J2] = (SYB_MachineParameter[M_PARA_SW_J5] - 0x19);

		/* ÇoÇaÇSÇÃËáílÉZÉbÉg */
		SYB_MachineParameter[M_PARA_SW_J3] = (SYB_MachineParameter[M_PARA_SW_J6] - 0x19);

		/*-----------*/
		/** âÊñ ï\é¶ */
		/*-----------*/
		/* è„íiï\é¶ */
		DisplayStringHigh(0,D2W_SF_PS1_PS2_PB4_AdjustMode);	/* "PS1,PS2,PB4 º∑≤¡æØ√≤" */
		/* â∫íiï\é¶ */
		DisplayStringLow(0,D2W_SetComplete);		/* " **  æØƒ  ∂›ÿÆ≥  ** " */
/*		ChildDisplayStringLow(D2W_SetComplete);*/		/* " **  æØƒ  ∂›ÿÆ≥  ** " */

		EndBuzzer();	/* èIóπâπñ¬ìÆ */
		wai_tsk(100);
	}
	else {
		NackBuzzer();	/* ÉiÉbÉNâπñ¬ìÆ */

		/* â∫íiï\é¶ */
		FlashDisplayStringLow(D2W_Stop);				/* "              ΩƒØÃﬂ " */

		while(1) {

			/** ÉLÅ[éÊÇËçûÇ› */
			OPR_GetKey(KEY_WAIT_ONE_MINUTE);
			key = GetInputKeyCode();
			keytype = GetInputKeyType();

			/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
			switch (keytype) {
			case STOP:
			case KEY_TIME_UP:
				return;

			case NO_EFFECT:
				break;

			default:
				NackBuzzer();
				break;
			}
		}
	}
	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_SensorTest);		/* "æ›ª∞√Ωƒ             " */
	/* â∫íiï\é¶ */
	FlashDisplayStringLow(D2W_EnterStop);		/* "          æØƒ/ΩƒØÃﬂ " */

	while(1) {
		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case ENTER:
			PS1_PS2_PB4_Paper_Set_Stanby();		/* PS1,PS2,PB4ÅiãLò^éÜóLÇËÅjèÄîı */
			return;
		case STOP:
		case KEY_TIME_UP:
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}


/*************************************************************************
	module		:[ÇoÇrÇPÅAÇoÇrÇQÅAÇoÇaÇSÅiãLò^éÜóLÇËÅjèÄîı]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/12/18]
	author		:[â¡î[]
*************************************************************************/
void PS1_PS2_PB4_Paper_Set_Stanby(void)
{
	UBYTE	key;
	UBYTE	keytype;

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_ReplaceRxPaper);	/* "∑€∏º ¶ Œ∑≠≥ º√∏¿ﬁª≤ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case ENTER:
			PS1_PS2_PB4_SensorTest();		/* PS1,PS2,PB4ÅiãLò^éÜóLÇËÅjÉZÉìÉTÅ[ÉeÉXÉg */
			return;
		case STOP:
		case KEY_TIME_UP:
			return;
		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÇoÇrÇPÅAÇoÇaÇSÅiãLò^éÜóLÇËÅjämîF]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/12/18]
	author		:[â¡î[]
*************************************************************************/
void PS1_PS2_PB4_SensorTest(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	PS1_result;
	UBYTE	PS2_result;
	UBYTE	PB4_result;

	SYB_MachineParameter[M_PARA_SW_J4] = (UBYTE)AD_PS1();		/* ÇoÇrÇPÅiãLò^éÜóLÇËÅjÇÃÇ`ÇcíléÊçûÇ›ÅB */
	SYB_MachineParameter[M_PARA_SW_J5] = (UBYTE)AD_PS2();		/* ÇoÇrÇQÅiãLò^éÜóLÇËÅjÇÃÇ`ÇcíléÊçûÇ›ÅB */
	SYB_MachineParameter[M_PARA_SW_J6] = (UBYTE)AD_PB4();		/* ÇoÇaÇSÅiãLò^éÜóLÇËÅjÇÃÇ`ÇcíléÊçûÇ›ÅB */

	/* ÇoÇrÇPÇÃîªíË */
	if (SYB_MachineParameter[M_PARA_SW_J4] < SYB_MachineParameter[M_PARA_SW_J1]) {
		PS1_result = TRUE;		/* ÇoÇrÇPîªíËÇnÇj */
	}
	else {
		PS1_result = FALSE;		/* ÇoÇrÇPîªíËÇmÇf */
		/* ÇoÇrÇPÇÃËáílÇ…ÉfÉtÉHÉãÉgílÇÉZÉbÉg */
		SYB_MachineParameter[M_PARA_SW_J1] = 0xCD;
	}

	/* ÇoÇrÇQÇÃîªíË */
	if (SYB_MachineParameter[M_PARA_SW_J5] < SYB_MachineParameter[M_PARA_SW_J2]) {
		PS2_result = TRUE;		/* ÇoÇrÇQîªíËÇnÇj */
	}
	else {
		PS2_result = FALSE;		/* ÇoÇrÇQîªíËÇmÇf */
		/* ÇoÇrÇQÇÃËáílÇ…ÉfÉtÉHÉãÉgílÇÉZÉbÉg */
		SYB_MachineParameter[M_PARA_SW_J2] = 0xAD;
	}

	/* ÇoÇaÇSÇÃîªíË */
	if (SYB_MachineParameter[M_PARA_SW_J6] < SYB_MachineParameter[M_PARA_SW_J3]) {
		PB4_result = TRUE;		/* ÇoÇaÇSîªíËÇnÇj */
	}
	else {
		PB4_result = FALSE;		/* ÇoÇaÇSîªíËÇmÇf */
		/* ÇoÇrÇRÇÃËáílÇ…ÉfÉtÉHÉãÉgílÇÉZÉbÉg */
		SYB_MachineParameter[M_PARA_SW_J3] = 0xC9;
	}

	FlashDisplayStringLow(D2W_EnterStop);			/* "          æØƒ/ΩƒØÃﬂ " */

	DisplayPS1_PS2_PB4_Result(PS1_result, PS2_result, PB4_result);		/* PS1,PS2,PB4ÇÃîªíËåãâ ï\é¶ */

	if ((PS1_result == TRUE) && (PS2_result == TRUE) && (PB4_result == TRUE)) {
		EndBuzzer();	/* èIóπâπñ¬ìÆ */
	}
	else {
		NackBuzzer();	/* ÉiÉbÉNâπñ¬ìÆ */
	}

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case STOP:
		case KEY_TIME_UP:
			return;

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÇoÇrÇPÅCÇoÇrÇQÅAÇoÇaÇSÇÃîªíËåãâ ï\é¶]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/12/18]
	author		:[â¡î[]
*************************************************************************/
void DisplayPS1_PS2_PB4_Result(UBYTE PS1_result,  UBYTE PS2_result, UBYTE PB4_result)
{
	CMN_MemorySet(&FunctionDisplayBufferHigh[0], 20, ' ');

	/* è„íiï\é¶ */
	FunctionDisplayBufferHigh[0]  = 'P';		/* PS1ï\é¶ */
	FunctionDisplayBufferHigh[1]  = 'S';
	FunctionDisplayBufferHigh[2]  = '1';
	FunctionDisplayBufferHigh[3]  = ':';

	FunctionDisplayBufferHigh[7]  = 'P';		/* PS2ï\é¶ */
	FunctionDisplayBufferHigh[8]  = 'S';
	FunctionDisplayBufferHigh[9]  = '2';
	FunctionDisplayBufferHigh[10]  = ':';

	FunctionDisplayBufferHigh[14]  = 'P';		/* PB4ï\é¶ */
	FunctionDisplayBufferHigh[15]  = 'B';
	FunctionDisplayBufferHigh[16]  = '4';
	FunctionDisplayBufferHigh[17]  = ':';

	switch (PS1_result) {
	case TRUE:					/* ÇnÇjï\é¶	*/
		FunctionDisplayBufferHigh[4]  = 'O';		/* OKï\é¶ */
		FunctionDisplayBufferHigh[5]  = 'K';
		break;										
	case FALSE:					/* ÇmÇfï\é¶	*/
		FunctionDisplayBufferHigh[4]  = 'N';		/* NGï\é¶ */
		FunctionDisplayBufferHigh[5]  = 'G';
		break;
	default:
		break;
	}
	switch (PS2_result) {
	case TRUE:					/* ÇnÇjï\é¶	*/
		FunctionDisplayBufferHigh[11]  = 'O';		/* OKï\é¶ */
		FunctionDisplayBufferHigh[12]  = 'K';
		break;										
	case FALSE:					/* ÇmÇfï\é¶	*/
		FunctionDisplayBufferHigh[11]  = 'N';		/* NGï\é¶ */
		FunctionDisplayBufferHigh[12]  = 'G';
		break;
	default:
		break;
	}
	switch (PB4_result) {
	case TRUE:					/* ÇnÇjï\é¶	*/
		FunctionDisplayBufferHigh[18]  = 	'O';		/* OKï\é¶ */
		FunctionDisplayBufferHigh[19]  = 	'K';
		break;										
	case FALSE:					/* ÇmÇfï\é¶	*/
		FunctionDisplayBufferHigh[18]  =	 'N';		/* NGï\é¶ */
		FunctionDisplayBufferHigh[19]  =	 'G';
		break;
	default:
		break;
	}
	/* è„íiï\é¶ */
	DisplayStringHigh(0, FunctionDisplayBufferHigh);
}
#endif

/*************************************************************************
	module		:[ëÂï™ópÇqÇrÇQÇRÇQÇbÉ`ÉFÉbÉJÅ[]
	function	:[
		1.ê‹ÇËï‘ÇµÉeÉXÉgÇÃÇ›Çé¿çs
		2.ÇnÇjÇÃéûÅAÉsÉbÅAÉsÉbÅAÉsÉbÅEÅEÅEÅEÅEÇ∆ìdåπÇêÿÇÈÇ‹Ç≈ñ¬ÇËë±ÇØÇÈÅB
		  ÇmÇfÇÃéûÅAÉsÅ[Å[Å[Å[Å[Å[Å[ÅEÅEÅEÅEÅEÇ∆ìdåπÇêÿÇÈÇ‹Ç≈ñ¬ÇËë±ÇØÇÈÅB
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*B-H]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/07/15]
	author		:[èºåG]
*************************************************************************/
#if (0)
//void SF_RS232CTestFunction(void)
//{
//#if (PRO_CLASS1 == ENABLE)
//	UBYTE	hex_code;	/* RS232C√Ωƒ√ﬁ∞¿ */
//	MESSAGE_t *WaitData;	/* “Øæ∞ºﬁ */
//	MESSAGE_t *wait_sub;	/* “Øæ∞ºﬁë“îïœêî */
//
//	if (SYS_RS232C_Exist == 0) { /* RS232CäÓî’Ç™Ç»Ç¢ 1996/03/12 Eguchi */
//		NackBuzzer();
//		return;
//	}
//
//		hex_code = 'A';
//
//		CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
//
//		if (hex_code != 0) {
//			/*OperationMessageToMain.Item = FROM_OPERATION; 1996/07/08 Eguchi */
//			OperationMessageToMain.Message = MSG_SERV_RS232C_TEST;
//			OperationMessageToMain.SubMessage1 = hex_code;
//			snd_msg( mbxno.MAN_Task, &OperationMessageToMain );
//			MainTaskExecWait();
//			for (;;) {
//				rcv_msg( mbxno.OPR_Task, &WaitData );
//				wait_sub = WaitData;
//				if ( wait_sub->Item == FROM_MAIN && wait_sub->Message == CL1_RS232C_TEST_END ) {
//					break;
//				}
//			}
//
//			if ( wait_sub->SubMessage1 != CHECK_OK ) {
//				while (1) {
//					SpeakerOutBuzzer();							/** ÉXÉsÅ[ÉJÅ[èoóÕÇÉuÉUÅ[ë§Ç…êÿÇËë÷Ç¶ÇÈÅ@*/
//					BuzzerVolumeControl();						/** É{ÉäÉÖÅ[ÉÄÉZÉbÉg */
//					SpeakerMuteOff();							/** ÉXÉsÅ[ÉJÅ[ÇÃÉ~ÉÖÅ[ÉgèÛë‘ÇâèúÇ∑ÇÈ */
//					SCN_SetBuzzerFrequency(SCN_BUZZER_1950HZ);
//					SCN_SetBuzzer(SCN_ENABLE);
//				}
//			}
//			else {
//				while(1) {
//					AckBuzzer();
//					wai_tsk( 20 );
//				}
//			}
//		}
//#else
//	NackBuzzer();
//#endif
//}
#endif

#if (0)			/* É`ÉFÉbÉJÅ[ÇÃÇ› 97/09/10 By M.Kuwahara */
/*************************************************************************
	module		:[ÉJÉZÉbÉgÇPÅ^ÇQÉeÉXÉg]
	function	:[
		1.ÉJÉZÉbÉgÇPÅ^ÇQÇëIë
		2.ÉJÉZÉbÉgÇÃèÛë‘ÇéÊìæ
		3.ÉXÉgÉbÉvÉLÅ[Ç™âüÇ≥ÇÍÇΩÇÁèIóπ
		4.ÉJÉZÉbÉgÇQÇÃéûÅAâ∑ìxÇ‡ï\é¶
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*C]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/06/23]
	author		:[åKå¥î¸ãI]
*************************************************************************/
//void SF_CassetteCheck(void)
//{
//#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L) || (PRO_KEYPANEL == PANEL_HINOKI)
//	UBYTE key;
//	UBYTE keytype;
//	UBYTE cassette;
//
//	/* "∂æØƒ√Ωƒ             " */
//	DisplayStringHigh(0,D2W_SF_CassetteCheck);
//	ClearDisplayLow();
//	cassette	= PRN_NO_CASSETTE;
//	while(1) {
//		OPR_GetKey(KEY_WAIT_FOREVER);
//		key = GetInputKeyCode();
//		keytype = GetInputKeyType();
//		switch (keytype) {
//		case ONETOUCH:
//#if (PRO_KEYPANEL == PANEL_ANZU_L)
//			if ((key >= ONETOUCH_A_KEY) && (key <= ONETOUCH_B_KEY)) {
//				switch (key) {
//				case ONETOUCH_A_KEY:	/* ÉJÉZÉbÉgÇP */
//					cassette	= PRN_1ST_CASSETTE;
//					break;
//				case ONETOUCH_B_KEY:	/* ÉJÉZÉbÉgÇQ */
//					cassette	= PRN_2ND_CASSETTE;
//					break;
//				}
//			}
//#else
//			if ((key >= ONETOUCH_01_KEY) && (key <= ONETOUCH_02_KEY)) {
//				switch (key) {
//				case ONETOUCH_01_KEY:	/* ÉJÉZÉbÉgÇP */
//					cassette	= PRN_1ST_CASSETTE;
//					break;
//				case ONETOUCH_02_KEY:	/* ÉJÉZÉbÉgÇQ */
//					cassette	= PRN_2ND_CASSETTE;
//					break;
//				}
//			}
//#endif
//			else {
//				NackBuzzer();
//				break;
//			}
//			break;
//		case STOP:
//			return;
//		case NO_EFFECT:
//			break;
//		default:
//			NackBuzzer();
//			break;
//		}
//		if( cassette != PRN_NO_CASSETTE ){		/* ÉJÉZÉbÉgÇëIëÇµÇΩÇÁî≤ÇØÇÈ */
//			break;
//		}
//	}
//
//	while( 1 ){									/* ÉJÉZÉbÉgÇÃèÛë‘ï\é¶ */
//		DisplayCassetteCheck( cassette );
//		OPR_GetKey(KEY_WAIT_ONE_SECOND);
//		key = GetInputKeyCode();
//		keytype = GetInputKeyType();
//		switch (keytype) {
//		case STOP:
//			return;
//		case NO_EFFECT:
//		case KEY_TIME_UP:
//			break;
//		default:
//			NackBuzzer();
//			break;
//		}
//	}
//#endif
//}
*************************************************************************
	module		:[ÉJÉZÉbÉgÉeÉXÉgÇÃï\é¶]
		1.ÉJÉZÉbÉgèÛë‘Çï\é¶
			SYS_NO_CASSETTE
			SYS_NO_PAPER
			SYS_NO_UNIT
			SYS_SIDE_COVER_OPEN
			SYS_B4_PAPER
			SYS_A4_PAPER
			SYS_B5R_PAPER
			SYS_A5R_PAPER
			SYS_LT_PAPER
			SYS_LG_PAPER
			SYS_F4_PAPER
		2.ÉJÉZÉbÉgÇQÇÃéûÅAâ∑ìxÇ‡ï\é¶
	function	:[
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*C]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/06/23]
	author		:[åKå¥î¸ãI]
*************************************************************************/
//void	DisplayCassetteCheck(
//				UBYTE cassette )
//{
//#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L) || (PRO_KEYPANEL == PANEL_HINOKI)
//	WORD	temp;		/* â∑ìx */
//
//	CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
//	/* "                20ﬂC" */
//	if( cassette == PRN_1ST_CASSETTE ){
//		temp = PRN_CalculateDispEnvTemp();
//		if (temp >= 0) {
//			CMN_UnsignedIntToASC(&FunctionDisplayBufferHigh[16], temp, 2, '0');
//		}
//		else {
//			FunctionDisplayBufferHigh[15] = '-';
//			CMN_UnsignedIntToASC(&FunctionDisplayBufferHigh[16], (UWORD)(0 - temp), 2, '0');
//		}
//#if defined(JPN)
//		FunctionDisplayBufferHigh[18]	= 0xDF;		/* 'ﬂ' */
//#else
//		FunctionDisplayBufferHigh[18]	= 0xCF;		/* 'ﬂ' */
//#endif
//		FunctionDisplayBufferHigh[19]	= 'C';
//	}
//
//	CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
//	switch(PRN_CheckPaperSize(cassette)){			/* ÉJÉZÉbÉgÇÃèÛë‘ÇéÊìæ */
//	case	SYS_NO_CASSETTE:
//		CMN_StringCopy(FunctionDisplayBufferLow,D2W_SF_CassetteOpen);
//		break;
//    case	SYS_NO_PAPER:
//		CMN_StringCopy(FunctionDisplayBufferLow, D2W_SF_NoPaper);
//		break;
//    case	SYS_NO_UNIT:
//		CMN_StringCopy(FunctionDisplayBufferLow, D2W_SF_NoUnit);
//		break;
//    case	SYS_SIDE_COVER_OPEN:
//		CMN_StringCopy(FunctionDisplayBufferLow, D2W_SF_SideCoverOpen);
//		break;
//    case	SYS_B4_PAPER:
//		CMN_StringCopy(FunctionDisplayBufferLow, D2W_PaperSize_B4);
//		break;
//    case	SYS_A4_PAPER:
//		CMN_StringCopy(FunctionDisplayBufferLow, D2W_PaperSize_A4);
//		break;
//    case	SYS_B5R_PAPER:
//		CMN_StringCopy(FunctionDisplayBufferLow, D2W_PaperSize_B5R);
//		break;
//    case	SYS_A5R_PAPER:
//		CMN_StringCopy(FunctionDisplayBufferLow, D2W_PaperSize_A5R);
//		break;
//    case	SYS_LT_PAPER:
//		CMN_StringCopy(FunctionDisplayBufferLow, D2W_PaperSize_Letter);
//		break;
//    case	SYS_LG_PAPER:
//		CMN_StringCopy(FunctionDisplayBufferLow, D2W_PaperSize_Legal);
//		break;
//    case	SYS_F4_PAPER:
//		CMN_StringCopy(FunctionDisplayBufferLow, D2W_PaperSize_F4);
//		break;
//	}
//	ClearDisplayHigh();
//	DisplayStringHigh(0,FunctionDisplayBufferHigh);
//	ClearDisplayLow();
//	DisplayStringLow(0,FunctionDisplayBufferLow);
//#endif
//}
#endif	/* if(0) */

#if defined (KEISATSU) /* åxé@FAX 05/12/13 êŒã¥ê≥òa */
/**************************************************************************************************/
/**
	@brief		ÉèÉìÉ^ÉbÉ`AÇÃì‡óeÇÇ∑Ç◊ÇƒÇÃÉèÉìÉ^ÉbÉ`ÅAíZèkÇ…ÉRÉsÅ[Ç∑ÇÈ
	
	@li			
	@param		
	@return		Ç»Çµ
	@note		
	@date		2005/12/13 çÏê¨
	@author		êŒã¥ê≥òa
*/
/**************************************************************************************************/
void SF_CopyOnetouchA_ToAll(void)
{
	UBYTE key;
	UBYTE keytype;
	UWORD i;
	
	DisplayStringHigh(0, D2W_SF_CopyOnetouchA_ToAll);	/* "‹›¿Ø¡√ﬁ∞¿ Ã®Ÿ       " */
	FlashDisplayStringLow(D2W_EnterStop);				/* "          æØƒ/ΩƒØÃﬂ " */
	
	while(1) {
		OPR_GetKey(KEY_WAIT_ONE_MINUTE); /** ÉLÅ[éÊÇËçûÇ› */
		key = GetInputKeyCode();
		keytype = GetInputKeyType();
		
		switch (keytype) {
		case ENTER:
			for (i = 1; i < SYS_ONETOUCH_MAX; i++) {
				MemoryMove(&SYB_OnetouchDial[i], &SYB_OnetouchDial[0], sizeof(struct SYS_SpeedDialData_t));
			}
			for (i = 0; i < SYS_SPEED_DIAL_MAX; i++) {
				MemoryMove(&SYB_SpeedDial[i], &SYB_OnetouchDial[0], sizeof(struct SYS_SpeedDialData_t));
			}
			ChildDisplayStringLow(D2W_SetComplete);
			return;
		case STOP:
		case KEY_TIME_UP:
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/**************************************************************************************************/
/**
	@brief		å∏êäó â¬ïœÉgÅ[ÉiÉãÉeÉXÉg
	
	@li			
	@param		
	@return		Ç»Çµ
	@note		
	@date		2005/12/14 çÏê¨
	@author		êŒã¥ê≥òa
*/
/**************************************************************************************************/
void SF_TonalTestWithVariableAtt(
							UWORD kind,		/* ÉeÉXÉgçÄñ⁄ */
							UWORD pattern,	/* PIXÇÃèÍçáÇÃÉpÉ^Å[Éì */
							UBYTE* ptitle)	/* ï\é¶ÉèÅ[ÉfÉBÉìÉO */
{
	UBYTE line;
	UBYTE key;
	UBYTE keytype;
	UBYTE attenuation;
	UBYTE val[3];
	
	line = 0;
	
	DisplayStringHigh(0, ptitle);
	DisplayStringHigh(15, D2W_Keiden);
	FlashDisplayStringLow(D2W_ProgramEnter);	/* "            ∑…≥/æØƒ " */
	
	while(1) {
		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();
		
		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[Å^âEñÓàÛÉLÅ[*/
		case LEFT_ARROW:	/* ç∂ñÓàÛÉLÅ[ */
			if (line == 0) {
				DisplayStringHigh(15, D2W_Kanyu);
				line = 1;
			}
			else {
				DisplayStringHigh(15, D2W_Keiden);
				line = 0;
			}
			break;
		case ENTER:
			goto NEXT;
		case STOP:
		case KEY_TIME_UP:
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
	
NEXT:
	if (line == 0) {
		DisplayStringHigh(0, D2W_Keiden);
	}
	else {
		DisplayStringHigh(0, D2W_Kanyu);
	}
	
	attenuation = 8;
	CMN_UnsignedIntToASC_NULL(val, (UWORD)attenuation, 2, ' ');
	
	ClearDisplayLow();
	DisplayStringLow(18, "dB");
	DisplayStringLow(16, val);
	
	tskno_MDM_FactoryTask == 0xFFFF;
	SYS_FactoryFuncReq = 0;
	SYS_FactoryModem.Item = OPT_MDM_FACTORY_TEST_START;
	SYS_FactoryModem.Kind = 0xFF;
	SYS_FactoryModem.BaudRate = 0xFF;
	SYS_FactoryModem.DataRate = 0xFF;
	SYS_FactoryModem.PIX_Pattern = 0xFF;
	if (tskno_NCU_Task != 0xFFFF) {
		del_tsk(&tskno_NCU_Task);/* Add J.M 1994/05/12 */
	}
	cre_tsk(&tskno_MDM_FactoryTask, TSK_MDM_FACTORYFUNCTIONTASK, 0);
	LineFuncTxMsg.Item = FROM_OPERATION;
	LineFuncTxMsg.Message = FIP_TEST_CMD;
	snd_msg(mbxno.CPY_Task,&LineFuncTxMsg);
	
	if (line == 0) {
		SYS_FactoryModem.Item = SYS_OPT_MDM_KEIDEN_TONAL_TEST;
	}
	else {
		SYS_FactoryModem.Item = SYS_OPT_MDM_TONAL_TEST;
	}
	SYS_FactoryModem.Kind = kind;
	SYS_FactoryModem.PIX_Pattern = pattern;
	
	snd_msg(mbxno.CPY_Task,&LineFuncTxMsg);
	do {
		rcv_msg(mbxno.OPR_Task,&LineFuncRxMsg);
	} while(LineFuncRxMsg->Message != MSG_FIP_RS232C_TEST_END);
	
	MDM_TransmitLevelSet(attenuation);
	
	while (1) {
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();
		
		switch (keytype) {
		case PROGRAM:
			if ((key != OPR_TOP_PROGRAM_KEY) && (key != (OPR_TOP_PROGRAM_KEY + 1))) {
				NackBuzzer();
				continue;
			}
			
			if (key == OPR_TOP_PROGRAM_KEY) { /* ÉvÉçÉOÉâÉÄÉèÉìÉ^ÉbÉ`1 */
				if (attenuation < 15) {
					attenuation++;
				}
				else {
					NackBuzzer();
				}
			}
			else { /* ÉvÉçÉOÉâÉÄÉèÉìÉ^ÉbÉ`2 */
				if (attenuation == 8) {
					attenuation = 15;
				}
				else {
					attenuation = 8;
				}
			}
			MDM_TransmitLevelSet(attenuation);
			
			CMN_UnsignedIntToASC_NULL(val, (UWORD)attenuation, 2, ' ');
			DisplayStringLow(16, val);
			break;
		case STOP:
			goto END;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
	
END:
	SYS_FactoryModem.Kind = OPT_MDM_TONAL_STOP;
	snd_msg(mbxno.CPY_Task,&LineFuncTxMsg);
	do {
		rcv_msg(mbxno.OPR_Task,&LineFuncRxMsg);
	} while(LineFuncRxMsg->Message != MSG_FIP_RS232C_TEST_END);
	
	SYS_FactoryModem.Item = OPT_MDM_FACTORY_TEST_END;
	MDM_TxStopSwFlag = 0;
	if (tskno_MDM_FactoryTask != 0xFFFF) {
		del_tsk(&tskno_MDM_FactoryTask);
	}
	cre_tsk(&tskno_NCU_Task, TSK_NCU_TASK, 0 );
}
#endif

#if (PRO_MODEM == ORANGE3) /* By H.Fujimura 1999/01/06 */
/*************************************************************************
	module		:[âÒê¸ÉeÉXÉg]
	function	:[
		1.âÒê¸Ç‹ÇÌÇËÇÃÉeÉXÉgÇçsÇ§
		2.ÉäÉåÅ[ÉeÉXÉg
		3.ÉgÅ[ÉiÉãÉeÉXÉg
		4.ÇcÇsÇlÇeÉeÉXÉg
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG*C]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/27]
	author		:[ç]å˚,ìnï”àÍèÕ]
*************************************************************************/
void LineFunctionMode(void)
{
	UBYTE	keytype;
	UBYTE	func_number;

	func_number = 0;

	while (1) {

		DisplayStringHigh(0, D2W_SF_PhoneTest + (OPR_WORDING_LEN * func_number));
		ClearDisplayLow();
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keytype = GetInputKeyType();

		switch (keytype) {
		case FUNCTION:
			func_number++;
			if (func_number > 2) {
				func_number = 0;
			}
			break;
		case ENTER:
			/* ÉÅÉCÉìÇ…ÇmÇbÇtÉ^ÉXÉNÇéEÇµÇƒÇ‡ÇÁÇ§Åiì˙ñ{édólÇ≈ÅAƒ∞≈Ÿ√ΩƒÇÃ1300HzÇëóèoÇ∑ÇÈÇ∆íÖêMÇµÇƒÇµÇ‹Ç§ÇΩÇﬂÅj */
			OperationMessageToMain.Message = MSG_SERV_START;
			snd_msg(mbxno.MAN_Task, &OperationMessageToMain);
			MainTaskExecWait();

			if (CHK_LineMonitor()) {
				MonitorSpeakerOn();
			}

			if (func_number == 0) {
				SF_RelayTest();	/* ÉäÉåÅ[ÉeÉXÉg */
			}
			if (func_number == 1) {
				SF_TonalTest();	/* ÉgÅ[ÉiÉãÉeÉXÉg */
			}
			if (func_number == 2) {
				SF_DTMF_Test();	/* ÇcÇsÇlÇeÉeÉXÉg */
			}

			MonitorSpeakerOff();

			/* ÉÅÉCÉìÇ…ÇmÇbÇtÉ^ÉXÉNÇê∂ê¨ÇµÇƒÇ‡ÇÁÇ§ */
			OperationMessageToMain.Message = MSG_SERV_END;
			snd_msg(mbxno.MAN_Task, &OperationMessageToMain);
			MainTaskExecWait();
			return;
		case STOP:
		case KEY_TIME_UP:
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÉäÉåÅ[ÉeÉXÉg]
	function	:[
		1.éwíËÇ≥ÇÍÇΩÉäÉåÅ[ÇÃÇnÇmÅ^ÇnÇeÇeÇçsÇ§ÅB
		2.ÉLÅ[ì¸óÕÇ∆ÉäÉåÅ[ÇÃëŒâûä÷åWÇÕà»â∫ÇÃÇÊÇ§Ç…Ç»ÇÈÅB
		,	ONETOUCH_A_KEY -> CML
		,	ONETOUCH_B_KEY -> H
		,	ONETOUCH_C_KEY -> L
		,	ONETOUCH_D_KEY -> S
		,	ONETOUCH_E_KEY -> DP
		,	ONETOUCH_F_KEY -> C24

		3.çëï Ç…ÇÊÇÈÉäÉåÅ[
		,	USA: CML Åõ
		,		 H	 Åõ	(HÉäÉåÅ[ÇON/OFFÇ∑ÇÈÇ∆LÉäÉåÅ[Ç‡ON/OFFÇ≥ÇÍÇÈ)
		,		 L	 Å~ (LÉäÉåÅ[ÇÕÇ»Ç¢)
		,		 S	 Åõ
		,		 DP	 Å~ (DPÉäÉåÅ[ÇÕÇ»Ç¢ÅBÉpÉãÉXëóèoéûÇÕCMLÉäÉåÅ[Ç™ON/OFFÇ≥ÇÍÇÈ)
		,		 C24 Åõ
		,
		,	GBR: CML Åõ
		,		 H	 Åõ	(HÉäÉåÅ[ÇON/OFFÇ∑ÇÈÇ∆LÉäÉåÅ[Ç‡ON/OFFÇ≥ÇÍÇÈ)
		,		 L	 Å~ (LÉäÉåÅ[ÇÕÇ»Ç¢)
		,		 S	 Åõ
		,		 DP	 Åõ
		,		 C24 Åõ
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/27]
	author		:[ç]å˚,ìnï”àÍèÕ]
************************************************************************/
void SF_RelayTest(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	init_status;

	init_status = SYS_Modem1PortStatus;

	while (1) {
		DisplayRelayTest();
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case ONETOUCH:
			/* éwíËÇ≥ÇÍÇΩÉäÉåÅ[ÇÃÇnÇmÅ^ÇnÇeÇeÇçsÇ§ */
			switch (key) {
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
			case ONETOUCH_01_KEY:	/* CML */
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
			case ONETOUCH_A_KEY:	/* CML */
#endif
				if (CML_RelaySetting()) {
					CML_RelayOff();
				}
				else {
					CML_RelayOn();
				}
				break;
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
			case ONETOUCH_02_KEY:	/*  H  */
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
			case ONETOUCH_B_KEY:	/*  H  */
#endif
				if (H_RelaySetting()) {
					H_RelayOff();
				}
				else {
					H_RelayOn();
				}
				break;
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
			case ONETOUCH_03_KEY:	/*  L  */
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
			case ONETOUCH_C_KEY:	/*  L  */
#endif
/*#if defined(USA) || defined(TWN) 1998/01/21 */
/*#if (PRO_NCU_TYPE == ANZU_USA_TYPE)*/
#if (PRO_NCU_TYPE == ANZU_USA_TYPE)	/* 1998/01/21 */
				NackBuzzer();
#else
				if (L_RelaySetting()) {
					L_RelayOff();
				}
				else {
					L_RelayOn();
				}
#endif
				break;
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
			case ONETOUCH_04_KEY:	/*  S  */
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
			case ONETOUCH_D_KEY:	/*  S  */
#endif
				if (S_RelaySetting()) {
					S_RelayOff();
				}
				else {
					S_RelayOn();
				}
				break;
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
			case ONETOUCH_05_KEY:	/*  DP */
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
			case ONETOUCH_E_KEY:	/*  DP */
#endif
/*#if defined(USA) || defined(TWN) 1998/01/21 */
/*#if (PRO_NCU_TYPE == ANZU_USA_TYPE)*/
#if (PRO_NCU_TYPE == ANZU_GBR_TYPE)	/* 1998/01/21 */
				if (DP_RelaySetting()) {
					DP_RelayOff();
				}
				else {
					DP_RelayOn();
				}
#else
				NackBuzzer();
#endif
				break;
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
			case ONETOUCH_06_KEY:	/* C24 */
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
			case ONETOUCH_F_KEY:	/* C24 */
#endif
				if (CONT24_Setting()) {
					CONT_24V_Off();
				}
				else {
					CONT_24V_On();
				}
				break;
			}
			break;
		case STOP:
			/* ÉäÉåÅ[ÇÇ‡Ç∆ÇÃèÛë‘Ç…ñﬂÇµÇƒèIóπÇ∑ÇÈ */
			SYS_Modem1PortStatus = init_status;
			outp(MODEM1_PORT, SYS_Modem1PortStatus); /*Ç‹Ç∏Ç¢Ç©Ç‡*/
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÉäÉåÅ[ÉeÉXÉgíÜÇÃï\é¶]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/03/23]
	author		:[ç]å˚,ìnï”àÍèÕ]
*************************************************************************/
void DisplayRelayTest(void)
{
	DisplayStringHigh(0, D2W_SF_RelayTest1);	/* [ CML  H  L  S  DP   ] */
	DisplayStringLow(0, D2W_SF_RelayTest2);		/* [ C24                ] */

	if (CML_RelaySetting()) {
		DisplayChar(0, '*');
	}
	if (H_RelaySetting()) {
		DisplayChar(5, '*');
	}
	if (L_RelaySetting()) {
		DisplayChar(8, '*');
	}
	if (S_RelaySetting()) {
		DisplayChar(11, '*');
	}
#if (PRO_NCU_TYPE == ANZU_GBR_TYPE) /* ÇcÇoÉäÉåÅ[ä÷êîÇ≈Ç»Ç∫Ç©ÇbÇlÇkÇÇ›ÇƒÇ¢ÇÈÇΩÇﬂ 1997/10/15 Y.Matsukuma */
	if (DP_RelaySetting()) {
		DisplayChar(14, '*');
	}
#endif
	if (CONT24_Setting()) {
		DisplayChar(20, '*');
	}
}

/*************************************************************************
	module		:[ÉgÅ[ÉiÉãÉeÉXÉg]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/27]
	author		:[ç]å˚]
*************************************************************************/
void SF_TonalTest(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	type;
	UBYTE	tx_signal;	/* 0:ñ≥êMçÜ 1:ÉgÅ[Éì 2:ÇeÇrÇj 3:âÊêMçÜ */
	UBYTE	tx_freq;	/* ÉgÅ[ÉìÅFé¸îgêî , ÇeÇrÇjÅFçïorîíÅAâÊêMçÜÅFåêMÉXÉsÅ[Éh */
	UBYTE	w_b_rate;	/* âÊêMçÜëóèoéûÅAîíçïî‰ó¶ */
	struct ServiceFuncPixData_t PixData;

	tx_signal = tx_freq = w_b_rate = 0;
	tskno_txtask = 0xFFFF; /* TID Initial */

	/* ÉäÉåÅ[ÇÇ–Ç≠ */
	ConnectLine();

	while (1) {
		DisplayTonalTest(tx_signal , tx_freq , w_b_rate);
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case ONETOUCH:
			if ((type = TxSignalType(key)) != 0xFF) {
				if (tx_signal == 2 || tx_signal == 3) { /* PIX/FSKêMçÜëóèoíÜ */
					FskPixStop();
				}
				tx_freq = TxSignalFreq(type , key);
				MDM_ConfigReset();

				if (type == 1) { /* ÉgÅ[Éì */
					MDM_Tone(tx_freq);
				}
				if (type == 2) {
					cre_tsk(&tskno_txtask, TSK_MDM_FSKTXTASK, &tx_freq);
				}
				if (type == 3) {
					w_b_rate = W1_B0;
					PixData.baud_rate = tx_freq;
					PixData.pix_retio = w_b_rate;
					cre_tsk(&tskno_txtask, TSK_MDM_PIXTXTASK, &PixData);
				}
				tx_signal = type;
			}
			else {
				NackBuzzer();
			}
			break;
		case FUNCTION:
			if (tx_signal == 3) { /* PIXëóèoíÜ */
				FskPixStop();
				MDM_ConfigReset();
				tx_signal = 3;
				w_b_rate++;
				if (w_b_rate > W4_B1) {
					w_b_rate = W1_B0;
				}
				PixData.pix_retio = w_b_rate;
				cre_tsk(&tskno_txtask, TSK_MDM_PIXTXTASK, &PixData);
			}
			else {
				NackBuzzer();
			}
			break;
		case STOP:
			if (tx_signal == 2 || tx_signal == 3) { /* FSKëóèoíÜ àΩÇ¢ÇÕ ÇoÇhÇwëóèoíÜ */
				FskPixStop();
				tx_signal = 0;
			}
			else if (tx_signal == 1) {	/* ÉgÅ[ÉìëóèoíÜ */
				MDM_ConfigReset();
				tx_signal = 0;
			}
			else {	/* ñ≥êMçÜèÛë‘ */
				MDM_ConfigReset();
				DisconnectLine();
				return;
			}
			break;

		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÉgÅ[ÉiÉãÉeÉXÉgÅFêMçÜÉ^ÉCÉvîªï ]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/29]
	author		:[ç]å˚,ìnï”àÍèÕ]
*************************************************************************/
UBYTE TxSignalType(UBYTE key)
{
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
	if (key == ONETOUCH_01_KEY) {		/* ONETOUCH_01_KEY                   */
		return (0);	/* ñ≥êMçÜèÛë‘ */
	}
	else if (key <= ONETOUCH_09_KEY) {	/* ONETOUCH_02_KEY - ONETOUCH_09_KEY */
		return (1);
	}
	else if (key <= ONETOUCH_11_KEY) {	/* ONETOUCH_10_KEY - ONETOUCH_11_KEY */
		return (2);
	}
	else if (key <= ONETOUCH_19_KEY) {	/* ONETOUCH_12_KEY - ONETOUCH_19_KEY */
		return (3);
	}
	return (0xFF);
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
	if (key == ONETOUCH_A_KEY) {		/* ONETOUCH_A_KEY                  */
		return (0);	/* ñ≥êMçÜèÛë‘ */
	}
	else if (key <= ONETOUCH_I_KEY) {	/* ONETOUCH_B_KEY - ONETOUCH_I_KEY */
		return (1);
	}
	else if (key <= ONETOUCH_K_KEY) {	/* ONETOUCH_J_KEY - ONETOUCH_K_KEY */
		return (2);
	}
	else if (key <= ONETOUCH_S_KEY) {	/* ONETOUCH_L_KEY - ONETOUCH_S_KEY */
		return (3);
	}
	return (0xFF);
#endif
}

/*************************************************************************
	module		:[ÉgÅ[ÉiÉãÉeÉXÉgÅFêMçÜé¸îgêîîªï ]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/29]
	author		:[ç]å˚,ìnï”àÍèÕ]
*************************************************************************/
UBYTE  TxSignalFreq(UBYTE type, UBYTE key)
{
	UBYTE	freq;

	freq = 0xFF;

	switch (type) {
	case 0:	/* ñ≥êMçÜ */
		break;
	case 1:	/* ÉgÅ[ÉiÉã */
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
		freq = (UBYTE)(TONE_462HZ + (UBYTE)(key - ONETOUCH_02_KEY));
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
		freq = (UBYTE)(TONE_462HZ + (UBYTE)(key - ONETOUCH_B_KEY));
#endif
		break;
	case 2:	/* ÇeÇrÇj */
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
		freq = (UBYTE)(FSK_WHITE + (UBYTE)(key - ONETOUCH_10_KEY));
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
		freq = (UBYTE)(FSK_WHITE + (UBYTE)(key - ONETOUCH_J_KEY));
#endif
		break;
	case 3:	/* ÇoÇhÇw */
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
		freq = (UBYTE)(PIX_2400BPS + (UBYTE)(key - ONETOUCH_12_KEY));
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
		freq = (UBYTE)(PIX_2400BPS + (UBYTE)(key - ONETOUCH_L_KEY));
#endif
		break;
	}
	return (freq);
}

/*************************************************************************
	module		:[ÇeÇrÇjÅ^âÊêMçÜëóèoí‚é~]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/28]
	author		:[ç]å˚]
*************************************************************************/
void FskPixStop(void)
{
	MESSAGE_t *rx_message;

	SYS_PixStopFlag = 1;
	rcv_msg(mbxno.OPR_Task , &rx_message);
	if (tskno_txtask != 0xFFFF) {
		del_tsk(&tskno_txtask);
	}
	SYS_PixStopFlag = 0;
}

/*************************************************************************
	module		:[ÉgÅ[ÉiÉãÉeÉXÉgíÜÇÃï\é¶]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[ÉèÅ[ÉfÉBÉìÉOóeó êﬂñÒÇÃÇΩÇﬂÅAå≈íËÉèÅ[ÉfÉBÉìÉOÇÇ≈Ç´ÇÈÇæÇØÇÕÇ∏Çµé¿çséûÇ…ï\é¶ï∂éöóÒÇçÏê¨
				Å@Ç∑ÇÈÇÊÇ§Ç…Ç∑ÇÈÅBÅ@1996/06/12Å@Eguchi]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/28]
	author		:[ç]å˚]
*************************************************************************/
void DisplayTonalTest(UBYTE tx_signal, UBYTE freq, UBYTE w_b_rate)
{
	UWORD	data;
	UBYTE	pix_rate[4];
	UBYTE	disp_buf[7];

	data = 0;
	CMN_MemorySet(disp_buf, 7, NULL);

	/* è„íiï\é¶ */
	switch (tx_signal) {

	/*-------------*/
	/* ñ≥êMçÜèÛë‘Å@*/
	/*-------------*/
	case 0:	/* ñ≥êMçÜ */
		ClearDisplayHigh(); /* ãÛîí */
		break;

	/*--------------------*/
	/* ÉgÅ[ÉiÉãêMçÜëóèoíÜ */
	/*--------------------*/
	case 1:	/* ÉgÅ[Éì */
		switch (freq) {
		case TONE_462HZ:
			data = 462;
			break;
		case TONE_1080HZ:
			data = 1080;
			break;
		case TONE_1300HZ:
			data = 1300;
			break;
		case TONE_1650HZ:
			data = 1650;
			break;
		case TONE_1700HZ:
			data = 1700;
			break;
		case TONE_1800HZ:
			data = 1800;
			break;
		case TONE_1850HZ:
			data = 1850;
			break;
		case TONE_2100HZ:
			data = 2100;
			break;
		}
		CMN_UnsignedIntToASC(disp_buf, data, 4, ' ');
		disp_buf[4] = 'H';
		disp_buf[5] = 'z';
		ClearDisplayHigh();
		DisplayStringHigh(0, disp_buf);
		break;

	/*----------------------*/
	/* ÇeÇrÇjêMçÜëóèoíÜ		*/
	/*----------------------*/
	case 2:	/* FSK	  */
		ClearDisplayHigh();
		DisplayStringHigh(0 , D2W_SF_FSK);
		if (freq == FSK_WHITE) {
			DisplayStringHigh(4 , D2W_SF_White);
		}
		if (freq == FSK_BLACK) {
			DisplayStringHigh(4 , D2W_SF_Black);
		}
		break;

	/*---------------------*/
	/* âÊêMçÜëóèoíÜ		   */
	/*---------------------*/
	case 3:	/* PIX	  */
		switch (freq) {
		case PIX_2400BPS:
			data = 2400;
			break;
		case PIX_4800BPS:
			data = 4800;
			break;
		case PIX_7200BPS_V29:
		case PIX_7200BPS_V17:
			data = 7200;
			break;
		case PIX_9600BPS_V29:
		case PIX_9600BPS_V17:
			data = 9600;
			break;
		case PIX_12000BPS_V17:
			data = 12000;
			break;
		case PIX_14400BPS_V17:
			data = 14400;
			break;
		}
		CMN_UnsignedIntToASC(disp_buf, data, 5, ' ');

		pix_rate[0] = '1';
		pix_rate[1] = ':';
		pix_rate[2] = '1';
		pix_rate[3] = '\0';

		switch (w_b_rate) {
		case W1_B0: /* [1:0] */
			pix_rate[2] = '0';
			break;
		case W1_B1: /* [1:1] */
			break;
		case W1_B4: /* [1:4] */
			pix_rate[2] = '4';
			break;
		case W0_B1: /* [0:1] */
			pix_rate[0] = '0';
			break;
		case W4_B1: /* [4:1] */
			pix_rate[0] = '4';
			break;
		}
		DisplayStringHigh(0, D2W_SF_Pix);
		DisplayStringHigh(0, disp_buf);
		DisplayStringHigh(17, pix_rate);
	}

	/* â∫íiÉNÉäÉA */
	ClearDisplayLow();
}

/*************************************************************************
	module		:[ÇcÇsÇlÇeÉeÉXÉg]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/27]
	author		:[ç]å˚]
*************************************************************************/
void SF_DTMF_Test(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	dtmf;

	dtmf = 0xFF;

	/* ÉäÉåÅ[ÇÇ–Ç≠ */
	ConnectLine();

	while (1) {

		/* ï\é¶ */
		DisplayTxDTMF(dtmf);

		/* ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case NUMBER:
		case AST:
		case SHARP:
		case ONETOUCH:
			dtmf = DTMF_TypeGet(key);
			if (dtmf != 0xFF) {
				MDM_ConfigReset();
				MDM_DTMF(dtmf);
			}
			else {
				NackBuzzer();
			}

			break;
		case STOP:
			if (dtmf != 0xFF) { /* ÇcÇsÇlÇeëóèoíÜ */
				MDM_ConfigReset();
				dtmf = 0xFF;
			}
			else {
				DisconnectLine();
				return;
			}
			break;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÇcÇsÇlÇeÉeÉXÉgíÜÇÃï\é¶]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/27]
	author		:[ç]å˚]
*************************************************************************/
void DisplayTxDTMF(UBYTE dtmf)
{
	ClearDisplayHigh();
	ClearDisplayLow();

	if (dtmf == 0xFF) {
		DisplayStringHigh(0 , D2W_SF_DTMF);
	}
	if (DTMF_0 <= dtmf && dtmf <= DTMF_9) {
		DisplayStringHigh(0 , D2W_SF_DTMF);
		DisplayChar(5 , dtmf | 0x30);
	}
	if (dtmf == DTMF_SHARP) {
		DisplayStringHigh(0 , D2W_SF_DTMF);
		DisplayChar(5 , '#');
	}
	if (dtmf == DTMF_ASTA) {
		DisplayStringHigh(0 , D2W_SF_DTMF);
		DisplayChar(5 , '*');
	}

	if (ROW_1 <= dtmf && dtmf <= ROW_4) {
		DisplayStringHigh(0, D2W_SF_DTMFRow);
		DisplayChar(5, (UBYTE)((dtmf - ROW_1) + 1) | 0x30);
	}
	if (COL_1 <= dtmf && dtmf <= COL_4) {
		DisplayStringHigh(0, D2W_SF_DTMFColum);
		DisplayChar(5, (UBYTE)((dtmf - COL_1) + 1) | 0x30);
	}
}

/*************************************************************************
	module		:[ÇcÇsÇlÇeÉeÉXÉgÅFëóèoÇcÇsÇlÇeëIë]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/29]
	author		:[ç]å˚,ìnï”àÍèÕ]
*************************************************************************/
UBYTE DTMF_TypeGet(UBYTE key)
{
	UBYTE dtmf;

	dtmf = 0xFF;

	if (TEN_0_KEY <= key && key <= TEN_9_KEY) {
		dtmf = (UBYTE)(key - 0x30);
	}
	else if (key == TEN_SHARP_KEY) {
		dtmf = DTMF_SHARP;
	}
	else if (key == TEN_AST_KEY) {
		dtmf = DTMF_ASTA;
	}
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
	else if (ONETOUCH_01_KEY <= key && key <= ONETOUCH_08_KEY) {
		dtmf = (UBYTE)(ROW_1 + (UBYTE)(key - ONETOUCH_01_KEY));
	}
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
	else if (ONETOUCH_A_KEY <= key && key <= ONETOUCH_H_KEY) {
		dtmf = (UBYTE)(ROW_1 + (UBYTE)(key - ONETOUCH_A_KEY));
	}
#endif
	return (dtmf);
}

/*************************************************************************
	module		:[ÉäÉåÅ[ÇÇ¬Ç»ÇÆ]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/29]
	author		:[ç]å˚]
*************************************************************************/
void ConnectLine(void)
{
/*#if defined(GBR) 1998/01/21 */
#if (PRO_NCU_TYPE == ANZU_GBR_TYPE)
	DP_RelayOn();
	wai_tsk(1);
#endif
	CML_RelayOn();
	wai_tsk(100);
	H_RelayOn();
	L_RelayOn();

}

/*************************************************************************
	module		:[ÉäÉåÅ[ÇÇÕÇ»Ç∑]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/02/29]
	author		:[ç]å˚]
*************************************************************************/
void DisconnectLine(void)
{
	CML_RelayOff();
/*#if defined(GBR) 1998/01/21 */
#if (PRO_NCU_TYPE == ANZU_GBR_TYPE)
	wai_tsk(1);
	DP_RelayOff();
#endif
	H_RelayOff();
	L_RelayOff();
}
#endif	/* (PRO_MODEM != R288F) */

void InvalidServiceFunction(void)
{
	NackBuzzer();
}

/*************************************************************************
	module		:[ÉäÉìÉOÉ}ÉXÉ^Å[ÉpÉ^Å[Éìé©ìÆåüèoã@î\]
	function	:[
		1.ÉäÉìÉOÉ}ÉXÉ^Å[ÉpÉ^Å[ÉìÇÃé©ìÆåüèoÇçsÇ§
		2.ÇsÇdÇkë“ã@Ç≈Ç©Ç¬ÉpÉ^Å[ÉìÇ∆ÇµÇƒÇfÅ^ÇgÇ™ëIëÇ≥ÇÍÇƒÇ¢ÇÈéûÇ…å¿ÇÈ
		3.ÇqÇnÇlÉpÉbÉ`Ç≈ÉäÉìÉOÉ}ÉXÉ^Å[ÉpÉ^Å[Éìé©ìÆåüèoóLå¯Ç™ÉZÉbÉgÇ≥ÇÍÇƒÇ¢ÇÈéûÇ…å¿ÇÈ
		4.äÓñ{ìIÇ…åüèoÉpÉ^Å[ÉìÇÕï\é¶ÇµÇ»Ç¢
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/03/21]
	author		:[ç]å˚]
*************************************************************************/
void TeachingRingPattern(void)
{
#if (PRO_RING_MASTER == ENABLE)
	UBYTE	ring_pattern;
	UBYTE	pattern_display;
	UBYTE	keytype;
	UBYTE	during_teaching;

	#if defined(AUS)	/* DUET 1997/05/21 Y.Murata */
		NackBuzzer();
		return;
	#endif

	pattern_display = 0;
	ring_pattern = CHK_RingMasterPattern();

	if (TeachingOperationEnable == 0) { /* é©ìÆåüèoÉIÉyÉåÅ[ÉVÉáÉìñ≥å¯ */
		NackBuzzer();
		return;
	}

	if ((CMN_PresentReceiveMode() != SYS_TEL_READY) /* ìdòbë“ã@Ç≈Ç»Ç¢ */
	||	(ring_pattern != RING_MASTER_PATTERN_7 && ring_pattern != RING_MASTER_PATTERN_8)) {/* ÉpÉ^Å[ÉìÇ™ÇfÅ^Çgà»äOÇ≈Ç†ÇÈ */
		NackBuzzer();
		return;
	}

	/* è„ÇÃèåèÇ…çXÇ…ÅAÉÅÉÇÉäÅ[ÉXÉCÉbÉ`ê›íËèÛë‘Ç…ÇÊÇÈîªífÇ™ì¸ÇÈÇ©Ç‡ 1996/03/21 Eguchi Ç‹Çæ!!*/


	/*Å@é©ìÆåüèoóvãÅÉtÉâÉOÉZÉbÉg */
	SYS_TeachingModeFlag = 1;
	ring_pattern -= RING_MASTER_PATTERN_7;


	/* âÊñ ï\é¶ */
	if (pattern_display == 0) {/* ÉpÉ^Å[Éìï\é¶ÇµÇ»Ç¢ */
		/* [                    ] */
		/* [Please Wait         ] */
		ClearDisplayHigh();
		DisplayStringLow(0 , D2W_PleaseWaitAMinute);
	}
	else {/* ÉpÉ^Å[Éìï\é¶Ç∑ÇÈ */
		/* ëOâÒÇÃï\é¶ÉpÉ^Å[ÉìÇÃï\é¶ */
		/* [000 000 000 000 000 ] */
		/* [                    ] */
		DisplayTeachingPattern(ring_pattern);
	}

	during_teaching = 1;
	while (during_teaching) {
		OPR_GetKey(KEY_WAIT_ONE_SECOND);
		keytype = GetInputKeyType();
		switch (keytype) {
		case STOP:	/* ÉXÉgÉbÉvÉLÅ[ */
			SYS_TeachingModeFlag = 0; /* é©ìÆåüèoèIóπ */
			during_teaching = 0;
			break;
		case KEY_TIME_UP:
			if (SYS_TeachingModeFlag == 0) {/* é©ìÆåüèoèIóπ */
				during_teaching = 0;
			}
			break;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}

	if (keytype == KEY_TIME_UP) { /* é©ìÆåüèoèIóπ */
		if (pattern_display == 0) { /* åãâ ï\é¶ÇÇµÇ»Ç¢ */
			ChildDisplayStringLow(D2W_SetComplete);
		}
		else { /* åãâ ï\é¶ÇçsÇ§ */
			/* ÉXÉgÉbÉvÉLÅ[Ç™âüÇ≥ÇÍÇÈÇ‹Ç≈åãâ ï\é¶ÇçsÇ§ */
			/* [000 000 000 000 000 ] */
			/* [                    ] */
			DisplayTeachingPattern(ring_pattern);
			while (keytype != STOP) {
				OPR_GetKey(KEY_WAIT_FOREVER);
				keytype = GetInputKeyType();
				if ((keytype != STOP)
				&&	(keytype != NO_EFFECT)) {
					NackBuzzer();
				}
			}
		}
	}

	SYS_RingCounter = 0;
#else
	NackBuzzer();
#endif
}

#if (PRO_RING_MASTER == ENABLE)
void DisplayTeachingPattern(UBYTE pattern)
{
	UBYTE	i;

	for (i = 0; i < 5; i++) { /* ëOîºÇTÇ¬ÇÃÇ› */
		CMN_HexToASC(&FunctionDisplayBufferHigh[i * 4], (UDWORD)SYB_TeachingPattern[pattern].RingMinCycle[i], 3);
	}
	DisplayStringHigh(0, FunctionDisplayBufferHigh);
	ClearDisplayLow();
}
#endif

/*************************************************************************
	module		:[É~ÉâÅ[ÉLÉÉÉäÉbÉWóAëóÉÇÅ[ÉhÉZÉbÉg]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/07/01]
	author		:[ìnï”àÍèÕ]
*************************************************************************/
void SetMirrorCarrigeTransMode(void)
{
	UBYTE	trans_mode;

	trans_mode = SYB_ScannerTransportMode;

	if (SelectData(D2W_SF_MirrorCarrigeModeSet,	/* "–◊∞∑¨ÿØºﬁ’ø≥”∞ƒﬁ:   " */
				   D2W_Off3,					/* "                 OFF" */
				   2,
				   &trans_mode,
				   TRUE,
				   NO_KEYTYPE) == OPR_ENTERED) {	/* SelectData() à¯êîí«â¡ By S.Fukui Oct.1,1997 */
		/* ÉXÉLÉÉÉiégópíÜÇÕÅAê›íËÇã÷é~ÇµÇ‹Ç∑ÅiíAÇµóAëó”∞ƒﬁÇ™ONÇÃéûÇÕÅAΩ∑¨≈égópíÜÇÕONÇ≈Ç∑Åj by K.Watanabe 1997/12/26 */
		if ((SYS_MachineStatus[SYS_RESOURCE_STATUS] & SYS_SCANNER_BUSY)	/* ÉXÉLÉÉÉiégópíÜÇÃéû */
		 && (SYB_ScannerTransportMode == FALSE)) {						/* É~ÉâÅ[ÉLÉÉÉäÉbÉWóAëóÉÇÅ[ÉhÇ™ÇnÇeÇeÇÃéû */
			NackBuzzer();
		}
		else {															/* ÉXÉLÉÉÉiñ¢égópÇ©ÅAóAëóÉÇÅ[ÉhÇ™ÇnÇmÇÃéû */
			/* íçÅjSYB_ScannerTransportModeÇÃON/OFFÇÕÅAÉÅÉCÉìÇ≈çsÇ¢Ç‹Ç∑ */
			if (trans_mode == TRUE) {	/* ONÇ…ÉZÉbÉgÇ≥ÇÍÇΩéû */
				OperationMessageToMain.Message = MSG_FBS_TRANSPORT_SET;
			}
			else {						/* OFFÇ…ÉZÉbÉgÇ≥ÇÍÇΩéû */
				OperationMessageToMain.Message = MSG_FBS_TRANSPORT_RESET;
			}
			snd_msg(mbxno.MAN_Task, &OperationMessageToMain);
			MainTaskExecWait();
		}
	}
}

/*************************************************************************
	module		:[è¡ñ’ïiî≠íçã@î\]
	function	:[
		1.è¡ñ’ïiî≠íçÉfÅ[É^ÇÃìoò^ÅEàÛéöÇçsÇ§ÅB
		2.è¡ñ’ïiî≠íçópéÜÇÃàÛéöÇçsÇ§ÅB
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/09/30]
	author		:[ïüñ{ãMãg]
*************************************************************************/
void ConsumptionArticleOrderFunc(void)
{
#if (PRO_PRINT_TYPE == THERMAL) /* By H.Fujimura 1999/01/06 */
	/** ÉVÉäÉAÉãÇmÇèÅDì¸óÕ */
	DisplayStringHigh(0, D2W_SF_SerialNumber);	/* "ºÿ±ŸNo.             " */
	if (SerialNumberInput() == OK) {
		/* ì¸óÕÉfÅ[É^ÇÉZÉbÉg */
		StoreCharacterInputValue(SYB_ConsumerOrder.SerialNumber, ASC_DATA_TYPE);
	}
#else
	/*----------------------*/
	/** î≠íçÉfÅ[É^ÇÃìoò^	*/
	/*----------------------*/
	if (EnterConsumerOrder() == NG) {
		return;	/* ï“èWíÜÇ…ÉXÉbÉgÉvÉLÅ[Ç™âüÇ≥ÇÍÇΩ */
	}

	/*----------------------*/
	/** î≠íçópéÜÇÃÉvÉäÉìÉg 	*/
	/*----------------------*/
	if (PrintConsumerOrderForm() == NG) {
		return;	/* ï“èWíÜÇ…ÉXÉbÉgÉvÉLÅ[Ç™âüÇ≥ÇÍÇΩ */
	}
#endif
}

/*************************************************************************
	module		:[è¡ñ’ïiî≠íçÉfÅ[É^ìoò^ã@î\]
	function	:[
		1.à»â∫ÇÃçÄñ⁄Çìoò^Ç∑ÇÈÅB
		,î≠íçêÊ ìæà”êÊÉRÅ[Éh
		,î≠íçêÊ é–ñº
		,î≠íçå≥ ìæà”êÊÉRÅ[Éh
		,î≠íçå≥ é–ñº
		,î≠íçå≥ ïîâ€ñº
		,î≠íçå≥ ìdòbî‘çÜ
	]
	return		:[
		OK:ìoò^äÆóπ
		NG:ìoò^íÜé~
	]
	common		:[
		SYB_ConsumerOrder:
	]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/09/30]
	author		:[ïüñ{ãMãg]
*************************************************************************/
UBYTE EnterConsumerOrder(void)
{

#if defined(JPN)	/* äCäOédólÇ≈ÇÕégópÇ≥ÇÍÇ‹ÇπÇÒ By S.Fukui Oct.21,1997 */
	/** î≠íçêÊìæà”êÊÉRÅ[Éhì¸óÕ */
	DisplayStringHigh(0, D2W_SF_ReceiverCustomerCode);	/* "µ∏ÿª∑ ∫∞ƒﬁ          " */
	if (ToCustomerCodeInput() == OK) {
		/* ì¸óÕÉfÅ[É^ÇÉZÉbÉg */
		StoreCharacterInputValue(SYB_ConsumerOrder.ToCustomerCode, ASC_DATA_TYPE);
	}
	else {
		return (NG);
	}
#endif

	/** î≠íçêÊé–ñºì¸óÕ */
	DisplayStringHigh(0, D2W_SF_ReceiverCompany);		/* "µ∏ÿª∑ º¨“≤          " */
	if (ToCompanyNameInput() == OK) {
		/* ì¸óÕÉfÅ[É^ÇÉZÉbÉg */
#if (PRO_JIS_CODE == ENABLE)
		StoreCharacterInputValue(SYB_ConsumerOrder.ToCompany, ASC_JIS_DATA_TYPE);
#else
		StoreCharacterInputValue(SYB_ConsumerOrder.ToCompany, ASC_DATA_TYPE);
#endif
	}
	else {
		return (NG);
	}

#if !defined(US1)	/* orderbythonda1998/11/11 */
	/** î≠íçå≥ìæà”êÊÉRÅ[Éhì¸óÕ */
	DisplayStringHigh(0, D2W_SF_SenderCustomerCode);	/* "µ∏ÿ”ƒ ∫∞ƒﬁ          " */
	if (FromCustomerCodeInput() == OK) {
		/* ì¸óÕÉfÅ[É^ÇÉZÉbÉg */
		StoreCharacterInputValue(SYB_ConsumerOrder.FromCustomerCode, ASC_DATA_TYPE);
	}
	else {
		return (NG);
	}
#endif

	/** î≠íçå≥é–ñºì¸óÕ */
	DisplayStringHigh(0, D2W_SF_SenderCompany);			/* "µ∏ÿ”ƒ º¨“≤          " */
	if (FromCompanyNameInput() == OK) {
		/* ì¸óÕÉfÅ[É^ÇÉZÉbÉg */
#if (PRO_JIS_CODE == ENABLE)
		StoreCharacterInputValue(SYB_ConsumerOrder.FromCompany, ASC_JIS_DATA_TYPE);
#else
		StoreCharacterInputValue(SYB_ConsumerOrder.FromCompany, ASC_DATA_TYPE);
#endif
	}
	else {
		return (NG);
	}

	/** î≠íçå≥ïîâ€ñºì¸óÕ */
	DisplayStringHigh(0, D2W_SF_SenderSection);			/* "µ∏ÿ”ƒ Ãﬁ∂“≤         " */
	if (FromSectionNameInput() == OK) {
		/* ì¸óÕÉfÅ[É^ÇÉZÉbÉg */
#if (PRO_JIS_CODE == ENABLE)
		StoreCharacterInputValue(SYB_ConsumerOrder.FromSection, ASC_JIS_DATA_TYPE);
#else
		StoreCharacterInputValue(SYB_ConsumerOrder.FromSection, ASC_DATA_TYPE);
#endif
	}
	else {
		return (NG);
	}
#if (PRO_KEYPANEL == PANEL_POPLAR_B) && !defined(JPN)
	/** î≠íçå≥ïîâ€ñºÇQì¸óÕ *//* orderbythonda1998/05/18 */
	DisplayStringHigh(0, D2W_SF_SenderSection2);		/* "µ∏ÿ”ƒ Ãﬁ∂“≤2        " */
	if (FromSectionName2Input() == OK) {
		/* ì¸óÕÉfÅ[É^ÇÉZÉbÉg */
 #if (PRO_JIS_CODE == ENABLE)
		StoreCharacterInputValue(SYB_ConsumerOrderFromSection2, ASC_JIS_DATA_TYPE);
 #else
		StoreCharacterInputValue(SYB_ConsumerOrderFromSection2, ASC_DATA_TYPE);
 #endif
	}
	else {
		return (NG);
	}
#endif

	/** î≠íçå≥ìdòbî‘çÜì¸óÕ */
	DisplayStringHigh(0, D2W_SF_SenderTelNumber);		/* "µ∏ÿ”ƒ √ﬁ›‹ ﬁ›∫ﬁ≥    " */
	if (FromCustomerTelNumberInput() == OK) {
		/* ì¸óÕÉfÅ[É^ÇÉZÉbÉg */
		StoreCharacterInputValue(SYB_ConsumerOrder.FromTelNumber, ASC_DATA_TYPE);
	}
	else {
		return (NG);
	}

	/** ÉVÉäÉAÉãÇmÇèÅDì¸óÕ */
	DisplayStringHigh(0, D2W_SF_SerialNumber);	/* "ºÿ±ŸNo.             " */
	if (SerialNumberInput() == OK) {
		/* ì¸óÕÉfÅ[É^ÇÉZÉbÉg */
		StoreCharacterInputValue(SYB_ConsumerOrder.SerialNumber, ASC_DATA_TYPE);
	}
	else {
		return (NG);
	}

#if defined(US1)	/* orderbythonda1998/11/11 */
	/** î≠íçêÊÇeÇÅÇò  ÇmÇèÅDì¸óÕ */
	DisplayStringHigh( 0, D2W_SF_ToCompanyFaxNumber );	/* "Dist. Fax No.             " */
	if ( ToCompanyFaxNumberInput() == OK ) {
		/* ì¸óÕÉfÅ[É^ÇÉZÉbÉg */
		StoreCharacterInputValue( SYB_ToCompanyFaxNumber, ASC_DATA_TYPE );
	}
	else {
		return ( NG );
	}

	/** î≠íçêÊÇsÇÖÇå  ÇmÇèÅDì¸óÕ */
	DisplayStringHigh( 0, D2W_SF_ToCompanyTelNumber );	/* "Dist. Tel No.             " */
	if ( ToCompanyTelNumberInput() == OK ) {
		/* ì¸óÕÉfÅ[É^ÇÉZÉbÉg */
		StoreCharacterInputValue( SYB_ToCompanyTelNumber, ASC_DATA_TYPE );
	}
	else {
		return ( NG );
	}
#endif	/* if defined(US1) */

#if (0)		/* ê›íuì˙ÇÕÇ±Ç±Ç≈ìoò^ÇµÇ»Ç¢ 98/02/27 By M.Kuwahara */
	/** ê›íuì˙ */
//	DisplayStringHigh(0, D2W_SF_Date);			/* "æØ¡Àﬁ               " */
//	if (SetDateInput() == NG) {	/* STOP */
//		return(NG);
//	}
#endif
	return (OK); /* èIóπ */
}

/*************************************************************************
	module		:[î≠íçêÊìæà”êÊÉRÅ[Éhì¸óÕ]
	function	:[
		1.î≠íçêÊìæà”êÊÉRÅ[ÉhÇÃìoò^ÇçsÇ§ÅB
		2.î≠íçêÊìæà”êÊÉRÅ[ÉhÇÕÇPÇOåÖà»ì‡
	]
	return		:[
		OK:ìoò^äÆóπ
		NG:ìoò^íÜé~
	]
	common		:[
		CharacterInput
		SYB_ConsumerOrder.ToCustomerCode
	]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/09/30]
	author		:[ïüñ{ãMãg]
*************************************************************************/
UBYTE ToCustomerCodeInput(void)
{
	/* ì¸óÕçÏã∆ópÉoÉbÉtÉ@ÇÃÉNÉäÉA */
	ClearCharacterInput();

	/* ï∂éöì¸óÕÉÇÅ[Éhèâä˙âª */
	SetCharacterInputMode();

	/* ëOâÒì¸óÕílÇñºëOì¸óÕópÉoÉbÉtÉ@Ç…ìWäJÇ∑ÇÈ */
	SetCharacterInputBuf(SYB_ConsumerOrder.ToCustomerCode);
	CharacterInput.MaxFigure = SYS_ORDER_CODE_MAX - 1;
	CharacterInput.WritePosition = (UBYTE)CMN_StringLength(CharacterInput.Buffer);
	CharacterInput.CursorPosition = CharacterInput.WritePosition;

#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Modify by SMuratec L.Z.W 2003/08/13 */
	if (OPR_InputCharacterOperation(OPR_KANJI_DISABLE)) {
		return(OK);
	}
	else {
		return(NG);
	}
#else /* (PRO_KEYPANEL != PANEL_SATSUKI2) && (PRO_KEYPANEL != PANEL_STOCKHM2) */
	return (NameInput(OPR_KANJI_DISABLE));
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
}

/*************************************************************************
	module		:[î≠íçêÊé–ñºì¸óÕ]
	function	:[
		1.î≠íçêÊé–ñºìoò^ÇçsÇ§ÅB
		2.î≠íçêÊé–ñºÇÕÇRÇOåÖà»ì‡
	]
	return		:[
		OK:ìoò^äÆóπ
		NG:ìoò^íÜé~
	]
	common		:[
		CharacterInput
		SYB_ConsumerOrder.ToCompany
	]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/09/30]
	author		:[ïüñ{ãMãg]
*************************************************************************/
UBYTE ToCompanyNameInput(void)
{
	/* ì¸óÕçÏã∆ópÉoÉbÉtÉ@ÇÃÉNÉäÉA */
	ClearCharacterInput();

	/* ï∂éöì¸óÕÉÇÅ[Éhèâä˙âª */
	SetCharacterInputMode();

	/* ëOâÒì¸óÕílÇñºëOì¸óÕópÉoÉbÉtÉ@Ç…ìWäJÇ∑ÇÈ */
	SetCharacterInputBuf(SYB_ConsumerOrder.ToCompany);
	CharacterInput.MaxFigure = SYS_ORDER_NAME_MAX - 1;
	CharacterInput.WritePosition = (UBYTE)CMN_StringLength(CharacterInput.Buffer);
	CharacterInput.CursorPosition = CharacterInput.WritePosition;

#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Modify by SMuratec L.Z.W 2003/08/13 */
	if (OPR_InputCharacterOperation(OPR_KANJI_ENABLE)) {
		return(OK);
	}
	else {
		return(NG);
	}
#else /* (PRO_KEYPANEL != PANEL_SATSUKI2) && (PRO_KEYPANEL != PANEL_STOCKHM2) */
	return (NameInput(OPR_KANJI_ENABLE));
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
}

/*************************************************************************
	module		:[î≠íçå≥ìæà”êÊÉRÅ[Éhì¸óÕ]
	function	:[
		1.î≠íçå≥ìæà”êÊÉRÅ[ÉhÇÃìoò^ÇçsÇ§ÅB
		2.î≠íçå≥ìæà”êÊÉRÅ[ÉhÇÕÇPÇOåÖà»ì‡
	]
	return		:[
		OK:ìoò^äÆóπ
		NG:ìoò^íÜé~
	]
	common		:[
		CharacterInput
		SYB_ConsumerOrder.FromCustomerCode
	]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/09/30]
	author		:[ïüñ{ãMãg]
*************************************************************************/
UBYTE FromCustomerCodeInput(void)
{
	/* ì¸óÕçÏã∆ópÉoÉbÉtÉ@ÇÃÉNÉäÉA */
	ClearCharacterInput();

	/* ï∂éöì¸óÕÉÇÅ[Éhèâä˙âª */
	SetCharacterInputMode();

	/* ëOâÒì¸óÕílÇñºëOì¸óÕópÉoÉbÉtÉ@Ç…ìWäJÇ∑ÇÈ */
	SetCharacterInputBuf(SYB_ConsumerOrder.FromCustomerCode);
	CharacterInput.MaxFigure = SYS_ORDER_CODE_MAX - 1;
	CharacterInput.WritePosition = (UBYTE)CMN_StringLength(CharacterInput.Buffer);
	CharacterInput.CursorPosition = CharacterInput.WritePosition;

#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Modify by SMuratec L.Z.W 2003/08/13 */
	if (OPR_InputCharacterOperation(OPR_KANJI_DISABLE)) {
		return(OK);
	}
	else {
		return(NG);
	}
#else /* (PRO_KEYPANEL != PANEL_SATSUKI2) && (PRO_KEYPANEL != PANEL_STOCKHM2) */
	return (NameInput(OPR_KANJI_DISABLE));
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
}

/*************************************************************************
	module		:[î≠íçå≥é–ñºì¸óÕ]
	function	:[
		1.î≠íçå≥é–ñºìoò^ÇçsÇ§ÅB
		2.î≠íçå≥é–ñºÇÕÇRÇOåÖà»ì‡
	]
	return		:[
		OK:ìoò^äÆóπ
		NG:ìoò^íÜé~
	]
	common		:[
		CharacterInput
		SYB_ConsumerOrder.FromCompany
	]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/09/30]
	author		:[ïüñ{ãMãg]
*************************************************************************/
UBYTE FromCompanyNameInput(void)
{
	/* ì¸óÕçÏã∆ópÉoÉbÉtÉ@ÇÃÉNÉäÉA */
	ClearCharacterInput();

	/* ï∂éöì¸óÕÉÇÅ[Éhèâä˙âª */
	SetCharacterInputMode();

	/* ëOâÒì¸óÕílÇñºëOì¸óÕópÉoÉbÉtÉ@Ç…ìWäJÇ∑ÇÈ */
	SetCharacterInputBuf(SYB_ConsumerOrder.FromCompany);
	CharacterInput.MaxFigure = SYS_ORDER_NAME_MAX - 1;
	CharacterInput.WritePosition = (UBYTE)CMN_StringLength(CharacterInput.Buffer);
	CharacterInput.CursorPosition = CharacterInput.WritePosition;

#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Modify by SMuratec L.Z.W 2003/08/13 */
	if (OPR_InputCharacterOperation(OPR_KANJI_ENABLE)) {
		return(OK);
	}
	else {
		return(NG);
	}
#else /* (PRO_KEYPANEL != PANEL_SATSUKI2) && (PRO_KEYPANEL != PANEL_STOCKHM2) */
	return (NameInput(OPR_KANJI_ENABLE));
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
}

/*************************************************************************
	module		:[î≠íçå≥ïîâ€ñºì¸óÕ]
	function	:[
		1.î≠íçå≥ïîâ€ñºìoò^ÇçsÇ§ÅB
		2.î≠íçå≥ïîâ€ñºÇÕÇRÇOåÖà»ì‡
	]
	return		:[
		OK:ìoò^äÆóπ
		NG:ìoò^íÜé~
	]
	common		:[
		CharacterInput
		SYB_ConsumerOrder.FromSection
	]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/09/30]
	author		:[ïüñ{ãMãg]
*************************************************************************/
UBYTE FromSectionNameInput(void)
{
	/* ì¸óÕçÏã∆ópÉoÉbÉtÉ@ÇÃÉNÉäÉA */
	ClearCharacterInput();

	/* ï∂éöì¸óÕÉÇÅ[Éhèâä˙âª */
	SetCharacterInputMode();

	/* ëOâÒì¸óÕílÇñºëOì¸óÕópÉoÉbÉtÉ@Ç…ìWäJÇ∑ÇÈ */
	SetCharacterInputBuf(SYB_ConsumerOrder.FromSection);
	CharacterInput.MaxFigure = SYS_ORDER_NAME_MAX - 1;
	CharacterInput.WritePosition = (UBYTE)CMN_StringLength(CharacterInput.Buffer);
	CharacterInput.CursorPosition = CharacterInput.WritePosition;

#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Modify by SMuratec L.Z.W 2003/08/13 */
	if (OPR_InputCharacterOperation(OPR_KANJI_ENABLE)) {
		return(OK);
	}
	else {
		return(NG);
	}
#else /* (PRO_KEYPANEL != PANEL_SATSUKI2) && (PRO_KEYPANEL != PANEL_STOCKHM2) */
	return (NameInput(OPR_KANJI_ENABLE));
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
}

/*************************************************************************
	module		:[î≠íçå≥ïîâ€ñºì¸óÕÇQ]
	function	:[
		1.î≠íçå≥ïîâ€ñºìoò^ÇçsÇ§ÅB
		2.î≠íçå≥ïîâ€ñºÇÕÇRÇOåÖà»ì‡
	]
	return		:[
		OK:ìoò^äÆóπ
		NG:ìoò^íÜé~
	]
	common		:[
		CharacterInput
		SYB_ConsumerOrderFromSection2
	]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1998/05/18]
	author		:[ñ{ëΩíqçK]
*************************************************************************/
#if (PRO_KEYPANEL == PANEL_POPLAR_B) && !defined(JPN)
UBYTE FromSectionName2Input(void)  /* orderbythonda1998/05/18 */
{
	/* ì¸óÕçÏã∆ópÉoÉbÉtÉ@ÇÃÉNÉäÉA */
	ClearCharacterInput();

	/* ï∂éöì¸óÕÉÇÅ[Éhèâä˙âª */
	SetCharacterInputMode();

	/* ëOâÒì¸óÕílÇñºëOì¸óÕópÉoÉbÉtÉ@Ç…ìWäJÇ∑ÇÈ */
	SetCharacterInputBuf(SYB_ConsumerOrderFromSection2);
	CharacterInput.MaxFigure = SYS_ORDER_NAME_MAX - 1;
	CharacterInput.WritePosition = (UBYTE)CMN_StringLength(CharacterInput.Buffer);
	CharacterInput.CursorPosition = CharacterInput.WritePosition;

#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Modify by SMuratec L.Z.W 2003/08/13 */
	if (OPR_InputCharacterOperation(OPR_KANJI_ENABLE)) {
		return(OK);
	}
	else {
		return(NG);
	}
#else /* (PRO_KEYPANEL != PANEL_SATSUKI2) && (PRO_KEYPANEL != PANEL_STOCKHM2) */
	return (NameInput(OPR_KANJI_ENABLE));
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
}
#endif

/*************************************************************************
	module		:[î≠íçå≥ìdòbî‘çÜÇÃì¸óÕ]
	function	:[
		1.î≠íçå≥ìdòbî‘çÜÇÃìoò^ÇçsÇ§
		2.î≠íçå≥ìdòbî‘çÜÇÕÇQÇOåÖà»ì‡
	]
	return		:[
		OK:ìoò^äÆóπ
		NG:ìoò^íÜé~
	]
	common		:[
		CharacterInput
		SYB_ConsumerOrder.FromTelNumber
	]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/09/30]
	author		:[ïüñ{ãMãg]
*************************************************************************/
UBYTE FromCustomerTelNumberInput(void)
{
	UBYTE	key;			/* ∑∞éÊÇËçûÇ›√ﬁ∞¿     */

	/* ì¸óÕçÏã∆ópÉoÉbÉtÉ@ÇÃÉNÉäÉA */
	ClearCharacterInput();
	
	/* ëOâÒì¸óÕílÇêîílì¸óÕópÉoÉbÉtÉ@Ç…ìWäJÇ∑ÇÈ */
	CMN_StringCopy(CharacterInput.Buffer, SYB_ConsumerOrder.FromTelNumber);
	CharacterInput.MaxFigure = SYS_ORDER_DIAL_MAX - 1;
	CharacterInput.WritePosition = (UBYTE)CMN_StringLength(CharacterInput.Buffer);
	CharacterInput.CursorPosition = CharacterInput.WritePosition;

	/** ÉfÅ[É^ì¸óÕ */
	while (1) {

		/** â∫íiÇ…ìoò^èÛãµÇï\é¶ */
		DisplayNumberInput();

		/** ÉLÅ[éÊÇËçûÇ› */
		key = NumberInputKeyGet();

		switch (key) {
		case STOP_KEY:			/* ÉXÉgÉbÉvÉLÅ[ */
			/* èIóπ */
			CursorOff();
			return (NG);
		case SET_KEY:			/* ÉZÉbÉgÉLÅ[	*/
			/* èIóπ */
			CursorOff();
			return (OK);
		case DIAL_MARK_KEY:		/* É_ÉCÉAÉããLçÜÉLÅ[ */
			/* ÉoÉbÉtÉ@ÇÃêÊì™Ç»ÇÁÅ{ÅAÇªÇÍà»äOÇÃèÍçáÅ[ÇÉZÉbÉgÇ∑ÇÈ */
			if ((CharacterInput.Buffer[0] == NULL) || (CharacterInput.CursorPosition == 0)) {
				if (CharacterInput.Buffer[0] == '+') {
					NackBuzzer();
					break;
				}
				else {
					key = '+';
				}
			}
			else {
				key = '-';
			}
			CharacterDataSet_FigureCheck(key);
			break;
		case OPR_NO_KEY:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

#if defined(US1)
/*************************************************************************
	module		:[î≠íçêÊÇeÇÅÇòî‘çÜÇÃì¸óÕ]
	function	:[
		1.î≠íçêÊÇeÇÅÇòî‘çÜÇÃìoò^ÇçsÇ§
		2.î≠íçêÊÇeÇÅÇòî‘çÜÇÕÇPÇSåÖà»ì‡
	]
	return		:[
		OK:ìoò^äÆóπ
		NG:ìoò^íÜé~
	]
	common		:[
		CharacterInput
		SYB_ToCompanyFaxNumber
	]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1998/11/11]
	author		:[ñ{ëΩíqçK]
*************************************************************************/
UBYTE ToCompanyFaxNumberInput(void)		/* orderbythonda1998/11/11 */
{
	UBYTE	key;			/* ∑∞éÊÇËçûÇ›√ﬁ∞¿     */

	/* ì¸óÕçÏã∆ópÉoÉbÉtÉ@ÇÃÉNÉäÉA */
	ClearCharacterInput();
	
	/* ëOâÒì¸óÕílÇêîílì¸óÕópÉoÉbÉtÉ@Ç…ìWäJÇ∑ÇÈ */
	CMN_StringCopy(CharacterInput.Buffer, SYB_ToCompanyFaxNumber);
	CharacterInput.MaxFigure = SYS_ORDER_DIAL2_MAX - 1;
	CharacterInput.WritePosition = (UBYTE)CMN_StringLength(CharacterInput.Buffer);
	CharacterInput.CursorPosition = CharacterInput.WritePosition;

	/** ÉfÅ[É^ì¸óÕ */
	while (1) {

		/** â∫íiÇ…ìoò^èÛãµÇï\é¶ */
		DisplayNumberInput();

		/** ÉLÅ[éÊÇËçûÇ› */
		key = NumberInputKeyGet();

		switch (key) {
		case STOP_KEY:			/* ÉXÉgÉbÉvÉLÅ[ */
			/* èIóπ */
			CursorOff();
			return (NG);
		case SET_KEY:			/* ÉZÉbÉgÉLÅ[	*/
			/* èIóπ */
			CursorOff();
			return (OK);
		case DIAL_MARK_KEY:		/* É_ÉCÉAÉããLçÜÉLÅ[ */
			/* ÉoÉbÉtÉ@ÇÃêÊì™Ç»ÇÁÅ{ÅAÇªÇÍà»äOÇÃèÍçáÅ[ÇÉZÉbÉgÇ∑ÇÈ */
			if ((CharacterInput.Buffer[0] == NULL) || (CharacterInput.CursorPosition == 0)) {
				if (CharacterInput.Buffer[0] == '+') {
					NackBuzzer();
					break;
				}
				else {
					key = '+';
				}
			}
			else {
				key = '-';
			}
			CharacterDataSet_FigureCheck(key);
			break;
		case OPR_NO_KEY:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[î≠íçêÊÇsÇÖÇåî‘çÜÇÃì¸óÕ]
	function	:[
		1.î≠íçêÊÇsÇÖÇåî‘çÜÇÃìoò^ÇçsÇ§
		2.î≠íçêÊÇsÇÖÇåî‘çÜÇÕÇPÇSåÖà»ì‡
	]
	return		:[
		OK:ìoò^äÆóπ
		NG:ìoò^íÜé~
	]
	common		:[
		CharacterInput
		SYB_ToCompanyTelNumber
	]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1998/11/11]
	author		:[ñ{ëΩíqçK]
*************************************************************************/
UBYTE ToCompanyTelNumberInput(void)		/* orderbythonda1998/11/11 */
{
	UBYTE	key;			/* ∑∞éÊÇËçûÇ›√ﬁ∞¿     */

	/* ì¸óÕçÏã∆ópÉoÉbÉtÉ@ÇÃÉNÉäÉA */
	ClearCharacterInput();
	
	/* ëOâÒì¸óÕílÇêîílì¸óÕópÉoÉbÉtÉ@Ç…ìWäJÇ∑ÇÈ */
	CMN_StringCopy(CharacterInput.Buffer, SYB_ToCompanyTelNumber);
	CharacterInput.MaxFigure = SYS_ORDER_DIAL2_MAX - 1;
	CharacterInput.WritePosition = (UBYTE)CMN_StringLength(CharacterInput.Buffer);
	CharacterInput.CursorPosition = CharacterInput.WritePosition;

	/** ÉfÅ[É^ì¸óÕ */
	while (1) {

		/** â∫íiÇ…ìoò^èÛãµÇï\é¶ */
		DisplayNumberInput();

		/** ÉLÅ[éÊÇËçûÇ› */
		key = NumberInputKeyGet();

		switch (key) {
		case STOP_KEY:			/* ÉXÉgÉbÉvÉLÅ[ */
			/* èIóπ */
			CursorOff();
			return (NG);
		case SET_KEY:			/* ÉZÉbÉgÉLÅ[	*/
			/* èIóπ */
			CursorOff();
			return (OK);
		case DIAL_MARK_KEY:		/* É_ÉCÉAÉããLçÜÉLÅ[ */
			/* ÉoÉbÉtÉ@ÇÃêÊì™Ç»ÇÁÅ{ÅAÇªÇÍà»äOÇÃèÍçáÅ[ÇÉZÉbÉgÇ∑ÇÈ */
			if ((CharacterInput.Buffer[0] == NULL) || (CharacterInput.CursorPosition == 0)) {
				if (CharacterInput.Buffer[0] == '+') {
					NackBuzzer();
					break;
				}
				else {
					key = '+';
				}
			}
			else {
				key = '-';
			}
			CharacterDataSet_FigureCheck(key);
			break;
		case OPR_NO_KEY:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}
#endif	/* defined(US1) */

/*************************************************************************
	module		:[ÉVÉäÉAÉãî‘çÜì¸óÕ]
	function	:[
		1.ÉVÉäÉAÉãî‘çÜÇÃìoò^ÇçsÇ§ÅB
		2.ÉVÉäÉAÉãî‘çÜÇÕÇPÇWåÖà»ì‡
	]
	return		:[
		OK:ìoò^äÆóπ
		NG:ìoò^íÜé~
	]
	common		:[
		CharacterInput
		SYB_ConsumerOrder.SerialNumberÅ@Å@Å@Å@Å@Å@Å@Å@Å@
	]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/10/08]
	author		:[åKå¥î¸ãI]
*************************************************************************/
UBYTE SerialNumberInput(void)
{
	/* ì¸óÕçÏã∆ópÉoÉbÉtÉ@ÇÃÉNÉäÉA */
	ClearCharacterInput();

	/* ï∂éöì¸óÕÉÇÅ[Éhèâä˙âª */
	SetCharacterInputMode();
#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* ÉVÉäÉAÉãNoìoò^âÊñ Ç≈ÇÃï∂éöÉÇÅ[ÉhÇÕèâä˙ílÇÉGÉCÉXÉEÇ…ÇµÇ‹Ç∑ÅBAdded by SMuratec L.Z.W 2003/11/28 */
	CharacterInput.Mode = OPR_ALPHAMERIC_MODE;
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */

	/* ëOâÒì¸óÕílÇÉVÉäÉAÉãî‘çÜì¸óÕópÉoÉbÉtÉ@Ç…ìWäJÇ∑ÇÈ */
	SetCharacterInputBuf(SYB_ConsumerOrder.SerialNumber);
	CharacterInput.MaxFigure = SYS_ORDER_SERIAL_MAX - 1;
	CharacterInput.WritePosition = (UBYTE)CMN_StringLength(CharacterInput.Buffer);
	CharacterInput.CursorPosition = CharacterInput.WritePosition;

#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Modify by SMuratec L.Z.W 2003/08/13 */
	if (OPR_InputCharacterOperation(OPR_KANJI_DISABLE)) {
		return(OK);
	}
	else {
		return(NG);
	}
#else /* (PRO_KEYPANEL != PANEL_SATSUKI2) && (PRO_KEYPANEL != PANEL_STOCKHM2) */
	return (NameInput(OPR_KANJI_DISABLE));
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
}

/*************************************************************************
	module		:[ê›íuì˙ÉZÉbÉg]
	function	:[
		1.ê›íuì˙ÇÃÉZÉbÉgÇçsÇ§
	]
	return		:[Ç»Çµ]
	common		:[
		SYB_ConsumerOrder.InstallDate
		CharacterInput
	]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[97/10/08]
	author		:[åKå¥î¸ãI]
*************************************************************************/
#if(0)	/* ÇqÇnÇlóeó çÌå∏ÇÃà◊ by K.Watanabe 1998/04/24 */
//UBYTE SetDateInput(void)
//{
//	UBYTE	key;
//	UBYTE	keytype;
//	UBYTE	old_current[10];
//	TIME_DATA_t current;
//
//	/*-------------------*/
//	/**  èâä˙âªèàóù		 */
//	/*-------------------*/
//	if ( SYB_ConsumerOrder.InstallDate == NULL ) {		/* âΩÇ‡æØƒÇ≥ÇÍÇƒÇ¢Ç»Ç¢éûÇÕåªç›éûä‘ÇæØƒÇµÇƒÇ®Ç≠ */
//		SYB_ConsumerOrder.InstallDate	= SYB_CurrentTime;
//	}
//	ClearCharacterInput();
//	SetLongTimeToCharacterInput(SYB_ConsumerOrder.InstallDate, CALENDER_TYPE);
//	CharacterInput.WritePosition = 5;
//	CharacterInput.LcdDisplayPosition = 11;
//	CharacterInput.Buffer[6] = NULL;		/* îNåéì˙ÇµÇ©ï\é¶ÇµÇ»Ç¢à◊ */
//
//	/* ê›íËëOÇÃÉJÉåÉìÉ_Å[Çë“î */
//	CMN_StringCopyNum(old_current, CharacterInput.Buffer, 6);
//	old_current[6]	= NULL;
//
//	/* ï“èWÅ@*/
//	while (1) {
//		/** ï\é¶èàóù */
//		DisplayTimeInput(CALENDER_DATE_TYPE);
//
//		/** ÉLÅ[ÇÃéÊÇËçûÇ› */
//		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
//		key = GetInputKeyCode();
//		keytype = GetInputKeyType();
//
//		switch (keytype) { /** ì¸óÕÇ≥ÇÍÇΩÉLÅ[Ç…ëŒÇ∑ÇÈèàóù */
//		case NUMBER:	/** êîéöÅi0 - 9) */
//			FixedNumberDataSet(key);
//			break;
//
//		case STOP:			/** ÉXÉgÉbÉvÉLÅ[ */
//		case KEY_TIME_UP:	/** ÇPï™ä‘ÉLÅ[ì¸óÕÇ»Çµ */
//			/** èIóπ */
//			CursorOff();
//			return (NG);
//
//		case FUNCTION:	/**ã@î\ÉLÅ[ */
//			/** ÉJÅ[É\ÉãâEà⁄ìÆ */
//			CursorRightRotation();
//			break;
//
//		case LEFT_ARROW:/** ç∂ÉJÅ[É\ÉãÉLÅ[ */
//			/** ÉJÅ[É\Éãç∂ÉLÅ[*/
//			CursorLeftRotation();
//			break;
//
//		case ENTER:		/** ÉZÉbÉgÉLÅ[ */
//			/** ì¸óÕÉfÅ[É^ÇÃÉ`ÉFÉbÉNÇçsÇ§ */
//			/* ÉJÉåÉìÉ_Å[Ç™ïœçXÇ≥ÇÍÇƒÇ¢ÇÈÇ©É`ÉFÉbÉN  í«â¡ 1997/08/05 Y.Matsukuma */
//			if (CMN_StringCompare(old_current, CharacterInput.Buffer, 6) == STRCMP_EQUAL) {
//				return(OK);	/* çXêVÇ≥ÇÍÇƒÇ¢Ç»ÇØÇÍÇŒÅARTCÇ…ÉZÉbÉgÇµÇ»Ç¢ */
//			}
//			CharacterInput.Buffer[6] = 0x30;	/* ÇmÇtÇkÇkÇÉZÉbÉgÇµÇΩÇ‹Ç‹ÇæÇ∆ÉJÉåÉìÉ_Å[É`ÉFÉbÉNÇ≈ÉGÉâÅ[Ç…Ç»ÇÈà◊ */
//			if (CheckCalenderInput() == OK) {
//				StoreCharacterInputValue(OperationTime.BCD_StringTime, BCD_DATA_TYPE);
//				current.Year   = OperationTime.BCD_StructTime.Year;		/* îN */
//				current.Month  = OperationTime.BCD_StructTime.Month;	/* åé */
//				current.Date   = OperationTime.BCD_StructTime.Date;		/* ì˙ */
//				current.Hour   = OperationTime.BCD_StructTime.Hour;		/* éû */
//				current.Minute = OperationTime.BCD_StructTime.Minute;	/* ï™ */
//				current.Second = 0;										/* ïb */
//				SYB_ConsumerOrder.InstallDate = CMN_BCD_TimeToLong(&current);
//				CursorOff();
//				return (OK);
//			}
//			CharacterInput.Buffer[6] = NULL;
//			CharacterInput.CursorPosition = 0;
//			NackBuzzer();
//			break;
//
//		case NO_EFFECT:
//		case OPR_NO_KEY:
//			break;
//
//		default:
//			NackBuzzer();
//			break;
//		}
//	}
//}
#endif

/*************************************************************************
	module		:[î≠íçópéÜÉäÉXÉg]
	function	:[
		1.î≠íçópéÜÉäÉXÉgÇÃàÛéö
	]
	return		:[
		OK:àÛéöé¿çs
		NG:àÛéöíÜé~
	]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/09/30]
	author		:[ïüñ{ãMãg]
*************************************************************************/
UBYTE PrintConsumerOrderForm(void)
{
	if (ConfirmKeyInputOperation(D2W_SF_PrintOrderForm, D2W_EnterStop, ENTER, STOP) == CONFIRM_EXEC) {
		/* ÉÅÉCÉìÇ…ÉäÉXÉgãNìÆÉÅÉbÉZÅ[ÉWëóêM */
		FinalListPrintOperation(LST_CONSUMERORDER_SHEET);
		return (OK);
	}
	return (NG);
}

/*************************************************************************
	module		:[ã@äÌê›íËÉäÉXÉg]
	function	:[
		1.ã@äÌê›íËÉäÉXÉgÇÃàÛéöÇÃãNìÆÇÇ©ÇØÇÈ
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/07/09]
	author		:[åKå¥î¸ãI]
*************************************************************************/
void ServicePrintSettingList(void)
{
	FinalListPrintOperation(LST_PARAMETER_LIST); /* ÉÅÉCÉìÇ…ÉäÉXÉgãNìÆÉÅÉbÉZÅ[ÉWëóêM */
}

#if (PRO_MULTI_LINE == ENABLE)
/*************************************************************************
	module		:[âÒê¸ÉeÉXÉgÅiÇQâÒédólÅj]
	function	:[
		1.ÉäÉåÅ[ÉeÉXÉg
		2.ÉgÅ[ÉiÉãÉeÉXÉg
		3.ÇcÇsÇlÇeÉeÉXÉg
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/12/10]
	author		:[èºåG]
*************************************************************************/
void MultiLineFunctionMode(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	func_number;
	UBYTE	loop;

	/* ÉfÅ[É^èâä˙âª */
	SYS_FactoryOptModem.Item = OPT_MDM_FACTORY_TEST_START;
	SYS_FactoryOptModem.Kind = 0xff;
	SYS_FactoryOptModem.BaudRate = 0xff;
	SYS_FactoryOptModem.DataRate = 0xff;
	SYS_FactoryOptModem.PIX_Pattern	= 0xff;
	SYS_FactoryOptModem.StackNumber = 0;

	/* ï\é¶ 1997/01/07  Y.Matsukuma */
	DisplayStringLow(0, D2W_SF_BoardNumber);
	ClearDisplayHigh();

	loop = 1;
	while (loop) {
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case NUMBER:
			if ((key >= TEN_1_KEY) && (key <= TEN_8_KEY)) {	/* µÃﬂºÆ›ÇPÅ`µÃﬂºÆ›ÇWÇ™ëIëÇ≥ÇÍÇΩéû */
				if (CHK_OptionLineExist((UBYTE)(key - TEN_1_KEY + 1))) {
					SYS_FactoryOptModem.StackNumber = (UBYTE)(key - TEN_1_KEY);
					loop = 0;
				}
				else {
					NackBuzzer();
				}
			}
			else {
				NackBuzzer();
			}
			break;
		case STOP:
		case KEY_TIME_UP:
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}

/* í«â¡èIóπ */

	func_number = 0;

	while (1) {
		DisplayStringHigh(0, D2W_SF_PhoneTest + (OPR_WORDING_LEN * func_number));
		ClearDisplayLow();
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keytype = GetInputKeyType();

		switch (keytype) {
		case FUNCTION:
			func_number++;
			if (func_number > 2) {
				func_number = 0;
			}
			break;
		case ENTER:
			MAN_OptFactoryFunctionCommand(&SYS_FactoryOptModem);
			MAN_OptionModemStart((UBYTE)(SYS_FactoryOptModem.StackNumber + 1));
			if (func_number == 0) {
				SYS_FactoryOptModem.Item = SYS_OPT_MDM_RELAY_TEST;
				SF_MultiRelayTest();/* ÉäÉåÅ[ÉeÉXÉg */
			}
			if (func_number == 1) {
				SYS_FactoryOptModem.Item = SYS_OPT_MDM_TONAL_TEST;
				SF_MultiTonalTest();/* ÉgÅ[ÉiÉãÉeÉXÉg */
			}
			if (func_number == 2) {
				SYS_FactoryOptModem.Item = SYS_OPT_MDM_DTMF_TEST;
				SF_MultiDTMF_Test();/* ÇcÇsÇlÇeÉeÉXÉg */
			}
			MAN_OptionModemLast((UBYTE)(SYS_FactoryOptModem.StackNumber + 1));
			MAN_OptFactoryFunctionCommand(&SYS_FactoryOptModem);
			return;
		case STOP:
		case KEY_TIME_UP:
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÉäÉåÅ[ÉeÉXÉgÅiÇQâÒê¸édólÅj]
	function	:[
		1.éwíËÇ≥ÇÍÇΩÉäÉåÅ[ÇÃÇnÇmÅ^ÇnÇeÇeÇçsÇ§ÅB
		2.ÉLÅ[ì¸óÕÇ∆ÉäÉåÅ[ÇÃëŒâûä÷åWÇÕà»â∫ÇÃÇÊÇ§Ç…Ç»ÇÈÅB
		,	ONETOUCH_A_KEY -> CML	ON
		,	ONETOUCH_B_KEY -> CML	OFF
		,	ONETOUCH_C_KEY -> H		ON
		,	ONETOUCH_D_KEY -> H		OFF
		,	ONETOUCH_E_KEY -> L		ON
		,	ONETOUCH_F_KEY -> L		OFF
		,	ONETOUCH_G_KEY -> S		ON
		,	ONETOUCH_H_KEY -> S		OFF
		,	ONETOUCH_I_KEY -> DP	ON
		,	ONETOUCH_J_KEY -> DP	OFF
		,	ONETOUCH_K_KEY -> C24	ON
		,	ONETOUCH_L_KEY -> C24	OFF
		,	ONETOUCH_M_KEY -> RI	ON
		,	ONETOUCH_N_KEY -> RI	OFF
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/02/14]
	author		:[èºåG]
*************************************************************************/
void SF_MultiRelayTest(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	kind;

	kind = 0xFF;

	/* ï\é¶ */
	DisplayStringHigh(0, D2W_SF_RelayTest1);	/* [ CML  H  L  S  DP   ] */
	DisplayStringLow(0, D2W_SF_RelayTest2);		/* [ C24                ] */
	DisplayChar(26, 'R');
	DisplayChar(27, 'I');

	while (1) {
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case ONETOUCH:
 #if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L) || (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 
			/* éwíËÇ≥ÇÍÇΩÉäÉåÅ[ÇÃÇnÇmÅ^ÇnÇeÇeÇçsÇ§ */
			switch (key) {
			case ONETOUCH_01_KEY:	/* CML */
				kind = OPT_MDM_RELAY_CML_ON;
				DisplayChar(0, '*');
				break;
			case ONETOUCH_02_KEY:	/* CML */
				kind = OPT_MDM_RELAY_CML_OFF;
				DisplayChar(0, ' ');
				break;
			case ONETOUCH_03_KEY:	/*  H  */
				kind = OPT_MDM_RELAY_H_ON;
				DisplayChar(5, '*');
				break;
			case ONETOUCH_04_KEY:	/*  H  */
				kind = OPT_MDM_RELAY_H_OFF;
				DisplayChar(5, ' ');
				break;
			case ONETOUCH_05_KEY:	/*  L  */
				kind = OPT_MDM_RELAY_L_ON;
				DisplayChar(8, '*');
				break;
			case ONETOUCH_06_KEY:	/*  L  */
				kind = OPT_MDM_RELAY_L_OFF;
				DisplayChar(8, ' ');
				break;
			case ONETOUCH_07_KEY:	/*  S  */
				kind = OPT_MDM_RELAY_S_ON;
				DisplayChar(11, '*');
				break;
			case ONETOUCH_08_KEY:	/*  S  */
				kind = OPT_MDM_RELAY_S_OFF;
				DisplayChar(11, ' ');
				break;
			case ONETOUCH_09_KEY:	/*  DP */
				kind = OPT_MDM_RELAY_DP_ON;
				DisplayChar(14, '*');
				break;
			case ONETOUCH_10_KEY:	/*  DP */
				kind = OPT_MDM_RELAY_DP_OFF;
				DisplayChar(14, ' ');
				break;
			case ONETOUCH_11_KEY:	/* C24 */
				kind = OPT_MDM_RELAY_CONT24_ON;
				DisplayChar(20, '*');
				break;
			case ONETOUCH_12_KEY:	/* C24 */
				kind = OPT_MDM_RELAY_CONT24_OFF;
				DisplayChar(20, ' ');
				break;
			case ONETOUCH_13_KEY:	/* RI */
				kind = OPT_MDM_RELAY_RI_ON;
				DisplayChar(25, '*');
				break;
			case ONETOUCH_14_KEY:	/* RI */
				kind = OPT_MDM_RELAY_RI_OFF;
				DisplayChar(25, ' ');
				break;
			default:
				NackBuzzer();
				break;
			}
 #endif	/* (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L) || (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2)  */
 #if (PRO_KEYPANEL == PANEL_ANZU_L)
			/* éwíËÇ≥ÇÍÇΩÉäÉåÅ[ÇÃÇnÇmÅ^ÇnÇeÇeÇçsÇ§ */
			switch (key) {
			case ONETOUCH_A_KEY:	/* CML */
				kind = OPT_MDM_RELAY_CML_ON;
				DisplayChar(0, '*');
				break;
			case ONETOUCH_B_KEY:	/* CML */
				kind = OPT_MDM_RELAY_CML_OFF;
				DisplayChar(0, ' ');
				break;
			case ONETOUCH_C_KEY:	/*  H  */
				kind = OPT_MDM_RELAY_H_ON;
				DisplayChar(5, '*');
				break;
			case ONETOUCH_D_KEY:	/*  H  */
				kind = OPT_MDM_RELAY_H_OFF;
				DisplayChar(5, ' ');
				break;
			case ONETOUCH_E_KEY:	/*  L  */
				kind = OPT_MDM_RELAY_L_ON;
				DisplayChar(8, '*');
				break;
			case ONETOUCH_F_KEY:	/*  L  */
				kind = OPT_MDM_RELAY_L_OFF;
				DisplayChar(8, ' ');
				break;
			case ONETOUCH_G_KEY:	/*  S  */
				kind = OPT_MDM_RELAY_S_ON;
				DisplayChar(11, '*');
				break;
			case ONETOUCH_H_KEY:	/*  S  */
				kind = OPT_MDM_RELAY_S_OFF;
				DisplayChar(11, ' ');
				break;
			case ONETOUCH_I_KEY:	/*  DP */
				kind = OPT_MDM_RELAY_DP_ON;
				DisplayChar(14, '*');
				break;
			case ONETOUCH_J_KEY:	/*  DP */
				kind = OPT_MDM_RELAY_DP_OFF;
				DisplayChar(14, ' ');
				break;
			case ONETOUCH_K_KEY:	/* C24 */
				kind = OPT_MDM_RELAY_CONT24_ON;
				DisplayChar(20, '*');
				break;
			case ONETOUCH_L_KEY:	/* C24 */
				kind = OPT_MDM_RELAY_CONT24_OFF;
				DisplayChar(20, ' ');
				break;
			case ONETOUCH_M_KEY:	/* RI */
				kind = OPT_MDM_RELAY_RI_ON;
				DisplayChar(25, '*');
				break;
			case ONETOUCH_N_KEY:	/* RI */
				kind = OPT_MDM_RELAY_RI_OFF;
				DisplayChar(25, ' ');
				break;
			default:
				NackBuzzer();
				break;
			}
 #endif	/* (PRO_KEYPANEL == PANEL_ANZU_L) */
			SYS_FactoryOptModem.Kind = kind;
			MAN_OptFactoryFunctionCommand(&SYS_FactoryOptModem);
			break;
		case STOP:
			SYS_FactoryOptModem.Item = OPT_MDM_FACTORY_TEST_END;
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÉgÅ[ÉiÉãÉeÉXÉgÅiÇQâÒê¸édólÅj]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/12/10]
	author		:[èºåG]
*************************************************************************/
void SF_MultiTonalTest(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	is_check_enable;
	UBYTE	tx_signal;
	UWORD	freq;

	tx_signal = 0;
	freq = (UWORD)OPT_MDM_TONAL_STOP;

	while (1) {
		DisplayMultiTonalTest(tx_signal, (UBYTE)freq );
		is_check_enable = TRUE;
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case NUMBER:
			if (key == TEN_0_KEY) {
#if defined(POPLAR_F)	/* FSK_W1_B1 1999/12/27 Y.Murata */
				freq = (UWORD)(OPT_MDM_TONAL_FSK_W1_B1);
				tx_signal = 2;
				break;
#else
				is_check_enable = FALSE;
				NackBuzzer();
				break;
#endif
			}
			freq = (UWORD)(OPT_MDM_TONAL_NONE + (UWORD)(key - TEN_1_KEY));
			tx_signal = 1;
			break;
		case AST:
			freq = (UWORD)OPT_MDM_TONAL_FSK_WHITE;
			tx_signal = 2;
			break;
		case SHARP:
			freq = (UWORD)OPT_MDM_TONAL_FSK_BLACK;
			tx_signal = 2;
			break;
 #if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
		case ONETOUCH:
			if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_64_KEY)) {
				freq = (UWORD)(OPT_MDM_TONAL_V27_1200_2400 + (UWORD)(key - ONETOUCH_01_KEY));
				if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_08_KEY)) {
					freq = MultiPixPattern(freq);	/* ÉXÉgÉbÉvâüÇ≥ÇÍÇΩÇ∆Ç´Ç±ÇÃèàóùÇ©ÇÁÇ ÇØÇÈ */
					tx_signal = 0;
				}
				else if (key == ONETOUCH_64_KEY) {
					tx_signal = 4;	/* Voice */
				}
				else {
					tx_signal = 3;
				}
			}
			else {
				is_check_enable = FALSE;
				NackBuzzer();
			}
			break;
 #endif
 #if (PRO_KEYPANEL == PANEL_ANZU_L)
		case ONETOUCH:
			if ((ONETOUCH_A_KEY <= key) && (key <= ONETOUCH_Z_KEY)) {
				freq = (UWORD)(OPT_MDM_TONAL_V27_1200_2400 + (UWORD)(key - ONETOUCH_A_KEY));
				if ((ONETOUCH_A_KEY <= key) && (key <= ONETOUCH_H_KEY)) {
					freq = MultiPixPattern(freq);	/* ÉXÉgÉbÉvâüÇ≥ÇÍÇΩÇ∆Ç´Ç±ÇÃèàóùÇ©ÇÁÇ ÇØÇÈ */
					tx_signal = 0;
					break;
				}
			}
			else if ((ONETOUCH_a_KEY <= key) && (key <= ONETOUCH_z_KEY)) {
				freq = (UWORD)(OPT_MDM_TONAL_V34_2800_26400 + (UWORD)(key - ONETOUCH_a_KEY));
			}
			else if ((ONETOUCH_U1_KEY <= key) && (key <= ONETOUCH_U8_KEY)) {
				freq = (UWORD)(OPT_MDM_TONAL_V34_3429_9600 + (UWORD)(key - ONETOUCH_U1_KEY));
			}
			else {
				is_check_enable = FALSE;
				NackBuzzer();
			}
			tx_signal = 3;
			break;
		case PROGRAM:
			if ((PROGRAM_P01 <= key) && (key <= PROGRAM_P04)) {
				freq = (UWORD)(OPT_MDM_TONAL_V34_3429_28800 + (UWORD)(key - PROGRAM_P01));
				if (key == PROGRAM_P04) {
					tx_signal = 4;	/* Voice */
				}
				else {
					tx_signal = 3;
				}
			}
			else {
				is_check_enable = FALSE;
				NackBuzzer();
			}
			break;
 #endif
		case STOP:
			if (freq != (UWORD)OPT_MDM_TONAL_STOP) { /* ÉgÅ[ÉìëóèoíÜ */
				freq = (UWORD)OPT_MDM_TONAL_STOP;
				tx_signal = 0;
				break;
			}
			else {
				SYS_FactoryOptModem.Item = OPT_MDM_FACTORY_TEST_END;
				return;
			}
			break;
		case NO_EFFECT:
			is_check_enable = FALSE;
			break;
		default:
			is_check_enable = FALSE;
			NackBuzzer();
			break;
		}

		if (is_check_enable) {	/* ê≥ìñÇ»ÉLÅ[Ç™âüÇ≥ÇÍÇΩéûÇÃÇ›â∫ÇÃèàóùóLå¯ */
			SYS_FactoryOptModem.Kind = freq;
			MAN_OptFactoryFunctionCommand(&SYS_FactoryOptModem);
		}
	}
}

/*************************************************************************
	module		:[ÇcÇsÇlÇeÉeÉXÉg]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/12/10]
	author		:[èºåG]
*************************************************************************/
void SF_MultiDTMF_Test(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	is_check_enable;
	UWORD	dtmf;

	dtmf = (UWORD)OPT_MDM_DTMF_STOP;

	while (1) {
		is_check_enable = TRUE;

		/* ï\é¶ */
		DisplayMultiTxDTMF((UBYTE) dtmf);

		/* ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case NUMBER:
		case AST:
		case SHARP:
		case ONETOUCH:
			if (TEN_0_KEY <= key && key <= TEN_9_KEY) {
				dtmf = (UWORD)(key - 0x30);
			}
			else if (key == TEN_SHARP_KEY) {
				dtmf = (UWORD)OPT_MDM_DTMF_SHARP;
			}
			else if (key == TEN_AST_KEY) {
				dtmf = (UWORD)OPT_MDM_DTMF_AST;
			}
 #if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L) || (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 
			else if (ONETOUCH_01_KEY <= key && key <= ONETOUCH_08_KEY) {
				dtmf = (UWORD)(OPT_MDM_DTMF_ROW1 + (UWORD)(key - ONETOUCH_01_KEY));
			}
 #endif
 #if (PRO_KEYPANEL == PANEL_ANZU_L)
			else if (ONETOUCH_A_KEY <= key && key <= ONETOUCH_H_KEY) {
				dtmf = (UWORD)(OPT_MDM_DTMF_ROW1 + (UWORD)(key - ONETOUCH_A_KEY));
			}
 #endif
			else {
				is_check_enable = FALSE;
				NackBuzzer();
			}
			break;
		case STOP:
			if (dtmf != (UWORD)OPT_MDM_DTMF_STOP) {	/* ÇcÇsÇlÇeëóèoíÜ */
				dtmf = (UWORD)OPT_MDM_DTMF_STOP;
				break;
			}
			else {
				SYS_FactoryOptModem.Item = OPT_MDM_FACTORY_TEST_END;
				return;
			}
			break;
		case NO_EFFECT:
			is_check_enable = FALSE;
			break;
		default:
			is_check_enable = FALSE;
			NackBuzzer();
			break;
		}

		if (is_check_enable) {	/* ê≥ìñÇ»ÉLÅ[Ç™âüÇ≥ÇÍÇΩéûÇÃÇ›â∫ÇÃèàóùóLå¯ */
			SYS_FactoryOptModem.Kind = dtmf;
			MAN_OptFactoryFunctionCommand(&SYS_FactoryOptModem);
		}
	}
}

/*************************************************************************
	module		:[âÒê¸ÉeÉXÉgÅEÇoÇhÇwëóèoÉpÉ^Å[ÉìëIë]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/12/11]
	author		:[èºåG]
*************************************************************************/
UWORD MultiPixPattern(UWORD Freq)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	is_check_enable;

	/* ï\é¶  */
	CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
	FunctionDisplayBufferLow[0] = 'W';
	FunctionDisplayBufferLow[1] = ':';
	FunctionDisplayBufferLow[2] = 'B';
	FunctionDisplayBufferLow[3] = '?';
	DisplayStringLow(0, FunctionDisplayBufferLow);

	while (1) {
		DisplayMultiTonalTest( 3, (UBYTE)Freq );
		is_check_enable = TRUE;

		/* ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		if (TEN_1_KEY <= key && key <= TEN_5_KEY) {
			SYS_FactoryOptModem.PIX_Pattern = (UWORD)(OPT_MDM_PIX_W1_B0 + (UWORD)(key - TEN_1_KEY));
			SYS_FactoryOptModem.Kind = Freq;
		}
		else if (key == STOP_KEY) {
			if (SYS_FactoryOptModem.Kind != OPT_MDM_TONAL_STOP) {
				SYS_FactoryOptModem.Kind = OPT_MDM_TONAL_STOP;
			}
			/*
			 * ÉXÉgÉbÉvÇQâÒâüÇ∑Ç∆Ç±ÇÃèàóùÇ©ÇÁÇ ÇØÇÈ
			*/
			else {
				ClearDisplayLow();
				return(OPT_MDM_TONAL_STOP);
			}
		}
		else {
			is_check_enable = FALSE;
			NackBuzzer();
		}

		if (is_check_enable) {	/* ê≥ìñÇ»ÉLÅ[Ç™âüÇ≥ÇÍÇΩéûÇÃÇ›â∫ÇÃèàóùóLå¯ */
			MAN_OptFactoryFunctionCommand(&SYS_FactoryOptModem);
		}
	}
}

/*************************************************************************
	module		:[ÉgÅ[ÉiÉãêMçÜï\é¶ÅiÇQâÒê¸ópÅj]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/11/13]
	author		:[èºåG]
*************************************************************************/
void	DisplayMultiTonalTest(UBYTE tx_signal, UBYTE freq )
{
	UWORD	data;
	UBYTE	pix_rate[4];
	UBYTE	disp_buf[7];

	data = 0;
	CMN_MemorySet(disp_buf, 7, NULL);
	CMN_MemorySet(pix_rate, 4, NULL);

	/* è„íiï\é¶ */
	switch (tx_signal) {

	/*-------------*/
	/* ñ≥êMçÜèÛë‘Å@*/
	/*-------------*/
	case 0:	/* ñ≥êMçÜ */
		ClearDisplayHigh(); /* ãÛîí */
		break;

	/*--------------------*/
	/* ÉgÅ[ÉiÉãêMçÜëóèoíÜ */
	/*--------------------*/
	case 1:	/* ÉgÅ[Éì */
		switch (freq) {
		case OPT_MDM_TONAL_462HZ:
			data = 462;
			break;
		case OPT_MDM_TONAL_1080HZ:
			data = 1080;
			break;
		case OPT_MDM_TONAL_1300HZ:
			data = 1300;
			break;
		case OPT_MDM_TONAL_1650HZ:
			data = 1650;
			break;
		case OPT_MDM_TONAL_1700HZ:
			data = 1700;
			break;
		case OPT_MDM_TONAL_1800HZ:
			data = 1800;
			break;
		case OPT_MDM_TONAL_1850HZ:
			data = 1850;
			break;
		case OPT_MDM_TONAL_2100HZ:
			data = 2100;
			break;
		}
		CMN_UnsignedIntToASC(disp_buf, data, 4, ' ');
		disp_buf[4] = 'H';
		disp_buf[5] = 'z';
		ClearDisplayHigh();
		DisplayStringHigh(0, disp_buf);
		break;

	/*----------------------*/
	/* ÇeÇrÇjêMçÜëóèoíÜ		*/
	/*----------------------*/
	case 2:	/* FSK	  */
		ClearDisplayHigh();
		DisplayStringHigh(0 , D2W_SF_FSK);
		if (freq == OPT_MDM_TONAL_FSK_WHITE) {
			DisplayStringHigh(4 , D2W_SF_White);
		}
		if (freq == OPT_MDM_TONAL_FSK_BLACK) {
			DisplayStringHigh(4 , D2W_SF_Black);
		}
#if defined(POPLAR_F)	/* FSK_W1_B1 1999/12/27 Y.Murata */
		if (freq == OPT_MDM_TONAL_FSK_W1_B1) {
			disp_buf[0] = 'W';
			disp_buf[1] = '1';
			disp_buf[2] = ':';
			disp_buf[3] = 'B';
			disp_buf[4] = '1';
			disp_buf[5] = NULL;
			DisplayStringHigh(4 , disp_buf);
		}
#endif
		break;

	/*---------------------*/
	/* âÊêMçÜëóèoíÜ		   */
	/*---------------------*/
	case 3:	/* PIX	  */
		switch (freq) {
		case OPT_MDM_TONAL_V27_1200_2400:
		case OPT_MDM_TONAL_V34_2400_2400:
			data = 2400;
			break;
		case OPT_MDM_TONAL_V27_1600_4800:
		case OPT_MDM_TONAL_V34_2400_4800:
		case OPT_MDM_TONAL_V34_2800_4800:
		case OPT_MDM_TONAL_V34_3000_4800:
		case OPT_MDM_TONAL_V34_3200_4800:
		case OPT_MDM_TONAL_V34_3429_4800:
			data = 4800;
			break;
		case OPT_MDM_TONAL_V29_2400_7200:
		case OPT_MDM_TONAL_V17_2400_7200:
		case OPT_MDM_TONAL_V34_2400_7200:
		case OPT_MDM_TONAL_V34_2800_7200:
		case OPT_MDM_TONAL_V34_3000_7200:
		case OPT_MDM_TONAL_V34_3200_7200:
		case OPT_MDM_TONAL_V34_3429_7200:
			data = 7200;
			break;
		case OPT_MDM_TONAL_V29_2400_9600:
		case OPT_MDM_TONAL_V17_2400_9600:
		case OPT_MDM_TONAL_V34_2400_9600:
		case OPT_MDM_TONAL_V34_2800_9600:
		case OPT_MDM_TONAL_V34_3000_9600:
		case OPT_MDM_TONAL_V34_3200_9600:
		case OPT_MDM_TONAL_V34_3429_9600:
			data = 9600;
			break;
		case OPT_MDM_TONAL_V17_2400_12000:
		case OPT_MDM_TONAL_V34_2400_12000:
		case OPT_MDM_TONAL_V34_2800_12000:
		case OPT_MDM_TONAL_V34_3000_12000:
		case OPT_MDM_TONAL_V34_3200_12000:
		case OPT_MDM_TONAL_V34_3429_12000:
			data = 12000;
			break;
		case OPT_MDM_TONAL_V17_2400_14400:
		case OPT_MDM_TONAL_V34_2400_14400:
		case OPT_MDM_TONAL_V34_2800_14400:
		case OPT_MDM_TONAL_V34_3000_14400:
		case OPT_MDM_TONAL_V34_3200_14400:
		case OPT_MDM_TONAL_V34_3429_14400:
			data = 14400;
			break;
		case OPT_MDM_TONAL_V34_2400_16800:
		case OPT_MDM_TONAL_V34_2800_16800:
		case OPT_MDM_TONAL_V34_3000_16800:
		case OPT_MDM_TONAL_V34_3200_16800:
		case OPT_MDM_TONAL_V34_3429_16800:
			data = 16800;
			break;
		case OPT_MDM_TONAL_V34_2400_19200:
		case OPT_MDM_TONAL_V34_2800_19200:
		case OPT_MDM_TONAL_V34_3000_19200:
		case OPT_MDM_TONAL_V34_3200_19200:
		case OPT_MDM_TONAL_V34_3429_19200:
			data = 19200;
			break;
		case OPT_MDM_TONAL_V34_2400_21600:
		case OPT_MDM_TONAL_V34_2800_21600:
		case OPT_MDM_TONAL_V34_3000_21600:
		case OPT_MDM_TONAL_V34_3200_21600:
		case OPT_MDM_TONAL_V34_3429_21600:
			data = 21600;
			break;
		case OPT_MDM_TONAL_V34_2800_24000:
		case OPT_MDM_TONAL_V34_3000_24000:
		case OPT_MDM_TONAL_V34_3200_24000:
		case OPT_MDM_TONAL_V34_3429_24000:
			data = 24000;
			break;
		case OPT_MDM_TONAL_V34_2800_26400:
		case OPT_MDM_TONAL_V34_3000_26400:
		case OPT_MDM_TONAL_V34_3200_26400:
		case OPT_MDM_TONAL_V34_3429_26400:
			data = 26400;
			break;
        case OPT_MDM_TONAL_V34_3000_28800:
		case OPT_MDM_TONAL_V34_3200_28800:
		case OPT_MDM_TONAL_V34_3429_28800:
			data = 28800;
			break;
		case OPT_MDM_TONAL_V34_3200_31200:
		case OPT_MDM_TONAL_V34_3429_31200:
			data = 31200;
			break;
		case OPT_MDM_TONAL_V34_3429_33600:
			data = 33600;
			break;
		}
		CMN_UnsignedIntToASC(disp_buf, data, 5, ' ');

		if (freq >= OPT_MDM_TONAL_V27_1200_2400 && freq <= OPT_MDM_TONAL_V17_2400_14400) {
			pix_rate[0] = '1';
			pix_rate[1] = ':';
			pix_rate[2] = '1';
			pix_rate[3] = '\0';

			switch (SYS_FactoryOptModem.PIX_Pattern) {
			case OPT_MDM_PIX_W1_B0: /* [1:0] */
				pix_rate[2] = '0';
				break;
			case OPT_MDM_PIX_W1_B1: /* [1:1] */
				break;
			case OPT_MDM_PIX_W1_B4: /* [1:4] */
				pix_rate[2] = '4';
				break;
			case OPT_MDM_PIX_W0_B1: /* [0:1] */
				pix_rate[0] = '0';
				break;
			case OPT_MDM_PIX_W4_B1: /* [4:1] */
				pix_rate[0] = '4';
				break;
			}
			DisplayStringHigh(0, D2W_SF_Pix);
			DisplayStringHigh(0, disp_buf);
			DisplayStringHigh(17, pix_rate);
		}
		else {
			pix_rate[0] = 'B';
			pix_rate[1] = 'P';
			pix_rate[2] = 'S';
			pix_rate[3] = '\0';
			ClearDisplayHigh();
			DisplayStringHigh(0, disp_buf);
			DisplayStringHigh(5, pix_rate);
		}
		break;
	/*-------*/
	/* Voice */
	/*-------*/
	case 4:
		CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
		FunctionDisplayBufferHigh[0] = 'V';
		FunctionDisplayBufferHigh[1] = 'o';
		FunctionDisplayBufferHigh[2] = 'i';
		FunctionDisplayBufferHigh[3] = 'c';
		FunctionDisplayBufferHigh[4] = 'e';
		DisplayStringHigh(0, FunctionDisplayBufferHigh);
		break;
	}

	/* â∫íiÉNÉäÉA */
/*	ClearDisplayLow();*/

}

/*************************************************************************
	module		:[ÇcÇsÇlÇeÉeÉXÉgíÜÇÃï\é¶ÅiÇQâÒê¸ópÅj]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/11/14]
	author		:[èºåG]
*************************************************************************/
void DisplayMultiTxDTMF(UBYTE dtmf)
{
	ClearDisplayHigh();
	ClearDisplayLow();

	if (dtmf == OPT_MDM_DTMF_STOP) {
		DisplayStringHigh(0 , D2W_SF_DTMF);
	}
	if (OPT_MDM_DTMF_0 <= dtmf && dtmf <= OPT_MDM_DTMF_9) {
		DisplayStringHigh(0 , D2W_SF_DTMF);
		DisplayChar(5 , dtmf | 0x30);
	}
	if (dtmf == OPT_MDM_DTMF_SHARP) {
		DisplayStringHigh(0 , D2W_SF_DTMF);
		DisplayChar(5 , '#');
	}
	if (dtmf == OPT_MDM_DTMF_AST) {
		DisplayStringHigh(0 , D2W_SF_DTMF);
		DisplayChar(5 , '*');
	}

	if (OPT_MDM_DTMF_ROW1 <= dtmf && dtmf <= OPT_MDM_DTMF_ROW4) {
		DisplayStringHigh(0, D2W_SF_DTMFRow);
		DisplayChar(5, (UBYTE)((dtmf - OPT_MDM_DTMF_ROW1) + 1) | 0x30);
	}
	if (OPT_MDM_DTMF_COL1 <= dtmf && dtmf <= OPT_MDM_DTMF_COL4) {
		DisplayStringHigh(0, D2W_SF_DTMFColum);
		DisplayChar(5, (UBYTE)((dtmf - OPT_MDM_DTMF_COL1) + 1) | 0x30);
	}
}
#endif	/* (PRO_MULTI_LINE == ENABLE) */

/*************************************************************************
	module		:[ÉIÉvÉVÉáÉìÉfÅ[É^èâä˙âª]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/11/12]
	author		:[èºåG]
*************************************************************************/
void	SF_OptionDataInitial(void)
{
	ClearDisplayLow();

	/* ÉNÉäÉAämîFÉIÉyÉåÅ[ÉVÉáÉì */
	if (ConfirmKeyInputOperation(D2W_SF_OptionDataInitial, D2W_CheckProgramEnter, ENTER, FUNCTION) == CONFIRM_EXEC) {
		CMN_InitializeOptionData((UBYTE)1);			/** ÉIÉvÉVÉáÉìêÍópÉoÉbÉNÉAÉbÉvÉfÅ[É^ÇÃèâä˙âª */
		CMN_ClearJournalData();				/** ÉWÉÉÅ[ÉiÉãÉfÅ[É^ÉNÉäÉA */
		ChildDisplayStringLow(D2W_ClearComplete);		/* " **  ∏ÿ± ∂›ÿÆ≥  **  " */
	}
}

/*************************************************************************
	module		:[è¡ñ’ïiî≠íçÉfÅ[É^ÉNÉäÉA]
	function	:[
		1.
	]
	return		:[Ç»Çµ]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/12/22]
	author		:[ìnï”àÍèÕ]
*************************************************************************/
void ClearOrderData(void)
{

#if (PRO_PRINT_TYPE == THERMAL) /* By H.Fujimura 1999/01/06 */
	if (ConfirmKeyInputOperation(D2W_SF_MntDataClear,		/* "∑∂≤  ﬁ›∫ﬁ≥ ∏ÿ±      " */
								 D2W_CheckProgramEnter,		/* "∂∏∆›        ∑…≥/æØƒ " */
								 ENTER,
								 FUNCTION) == CONFIRM_EXEC) {
		/* è¡ñ’ïiî≠íçÉfÅ[É^ÇÃèâä˙âª */
		CMN_ClearConsumerOrderData();
		ChildDisplayStringLow(D2W_ClearComplete);			/* " **  ∏ÿ± ∂›ÿÆ≥  **  " */
	}
#else
	if (ConfirmKeyInputOperation(D2W_SF_OrderDataClear,		/* " Ø¡≠≥√ﬁ∞¿ ∏ÿ±       " */
								 D2W_CheckProgramEnter,		/* "∂∏∆›        ∑…≥/æØƒ " */
								 ENTER,
								 FUNCTION) == CONFIRM_EXEC) {
		/* è¡ñ’ïiî≠íçÉfÅ[É^ÇÃèâä˙âª */
		CMN_ClearConsumerOrderData();
		ChildDisplayStringLow(D2W_ClearComplete);			/* " **  ∏ÿ± ∂›ÿÆ≥  **  " */
	}
#endif


}


#if (PRO_KEYPANEL == PANEL_POPLAR_L) || (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 	/* Ãß∞Ωƒ/◊Ωƒ∏ÿ± 2002/04/03 By M.Maeda */	/* RDC200200635 By O.Kimoto 2003/02/14 */
/*************************************************************************
	module		:[ÉIÅ[ÉãÉNÉäÉAÅ[ã@î\]
	function	:[
	]
	return		:[Ç»Çµ]
	common		:[
	]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2000/06/06]
	author		:[ëOìcâÎñÁ]
*************************************************************************/
void FirstOrLastClear(UBYTE mode)
{
	TIME_DATA_t		bcd_time;		/* ÉTÉ}Å[É^ÉCÉÄóp */
	UDWORD			long_time;		/* ÉTÉ}Å[É^ÉCÉÄóp */

#if defined(POPLAR_F)
	/* ÉpÉèÅ[ÇnÇméûÇÃÉEÉHÅ[ÉÄÉAÉbÉvíÜÇÕÅAÉLÅ[ëÄçÏã÷é~ */
	if (SYS_MachineStatus[SYS_MACHINE_STATUS_RESERVE] & SYS_PRINTER_POWER_ON) {
		NackBuzzer();
		return;
	}
#endif

#if (PRO_FBS == ENABLE)
	if (SYB_ScannerTransportMode) {
		NackBuzzer();
		return;
	}

	if (mode == TEN_2_KEY) {	/* ç≈å„ÇÃÉNÉäÉA Å{ óAëóÇnÇm */
		if ((SYB_ScannerTransportMode == TRUE) && (SYS_MachineStatus[SYS_RESOURCE_STATUS] | SYS_SCANNER_BUSY)) {
			NackBuzzer();
			return;
		}
	}
#endif

	if (mode == TEN_1_KEY) {	/* èâä˙ÇÃÉNÉäÉA */
		CMN_StringCopy(FunctionDisplayBufferHigh, (UBYTE *)"First Clear         ");	/* "First Clear         " */
	}
	else {						/* ç≈å„ÇÃÉNÉäÉA Å{ óAëóÇnÇm */
		CMN_StringCopy(FunctionDisplayBufferHigh, (UBYTE *)"Last Clear          ");	/* "Last Clear          " */
	}

	CMN_LongTimeToBCD(&bcd_time, SYB_CurrentTime); /* ÉTÉ}Å[É^ÉCÉÄóp */

	if (ConfirmKeyInputOperation(FunctionDisplayBufferHigh, D2W_CheckProgramEnter, ENTER, FUNCTION) == CONFIRM_EXEC) {
		if (SYS_MachineStatus[SYS_RESOURCE_STATUS] & ~SYS_PANEL_BUSY) {	/** ã@äÌìÆçÏíÜ */
			NackBuzzer();
			return;
		}

		if (mode == TEN_1_KEY) {	/* ÉtÉ@Å[ÉXÉgÉNÉäÉA */
			CMN_InitializeAllBackUpRAM(0);		/** ã@äÌÉpÉâÉÅÅ[É^ÅAÉIÅ[ÉãÉâÉÄ		*/
			CMN_ClearConsumerOrderData();		/** è¡ñ’ïiî≠íçÉfÅ[É^ÇÃÉNÉäÉA		*/
			CMN_ClearLifeMonitorData();			/** ÉâÉCÉtÉÇÉjÉ^Å[ÉNÉäÉA			*/
#if (PRO_PRINT_TYPE == LED)
			CMN_ClearPrinterLifeMonitorData();	/** ÉvÉäÉìÉ^ÉâÉCÉtÉÇÉjÉ^Å[ÉNÉäÉA	*/
#endif
			CMN_ClearFaxComErrorMonitorData();	/** í êMÉGÉâÅ[ÉÇÉjÉ^Å[ÉNÉäÉA		*/
			CMN_ClearJournalData();				/** ÉWÉÉÅ[ÉiÉãÉfÅ[É^ÉNÉäÉA			*/
		}
		else {						/* ÉâÉXÉgÉNÉäÉA */
#if (PRO_ALLRAMCLR_WO_MCP == ENABLE) /* ALL RAM ClearÇÃç€ÅAã@äÌÉpÉâÉÅÅ[É^ÇÃèâä˙âªÇÇµÇ»Ç¢ By S.Fukui Oct.27,1998 */
			CMN_InitializeAllBackUpRAM(2);		/** ÉÜÅ[ÉUÅ[ê›íËÉfÅ[É^ÇÃÉNÉäÉA		*/
#else 
			CMN_InitializeAllBackUpRAM(1);		/** ÉÜÅ[ÉUÅ[ê›íËÉfÅ[É^ÇÃÉNÉäÉA		*/
#endif
			CMN_ClearConsumerOrderData();		/** è¡ñ’ïiî≠íçÉfÅ[É^ÇÃÉNÉäÉA		*/
			CMN_ClearLifeMonitorData();			/** ÉâÉCÉtÉÇÉjÉ^Å[ÉNÉäÉA			*/
#if (PRO_PRINT_TYPE == LED)
			CMN_ClearPrinterLifeMonitorData();	/** ÉvÉäÉìÉ^ÉâÉCÉtÉÇÉjÉ^Å[ÉNÉäÉA	*/
#endif
			CMN_ClearFaxComErrorMonitorData();	/** í êMÉGÉâÅ[ÉÇÉjÉ^Å[ÉNÉäÉA		*/
			CMN_ClearJournalData();				/** ÉWÉÉÅ[ÉiÉãÉfÅ[É^ÉNÉäÉA			*/
		}

		UpdateLCD();

		if (mode == TEN_1_KEY) {
			InitializeDRAM_Parameter();									/** ÇcÇqÇ`ÇlóÃàÊÇèâä˙âª		*/
			InitializeMachineStatus();									/** É}ÉVÅ[ÉìÉXÉeÅ[É^ÉXÇÃÉNÉäÉA	*/
			SYS_MachineStatus[SYS_RESOURCE_STATUS] |= SYS_PANEL_BUSY;
			SYS_ErasePixMemoryListRequest = 0;							/** í‚ìdî≠ê∂èâä˙âª				*/
			Init_AnyList(LST_POWEROFF_NOTICE);							/** í‚ìdÉXÉeÅ[É^ÉXÇÃÉNÉäÉA		*/
			InitializeSensor();											/** ÉZÉìÉTÅ[Çèâä˙âª			*/
		}
		else {
			InitializeMachineStatus();									/** É}ÉVÅ[ÉìÉXÉeÅ[É^ÉXÉNÉäÉA */
			SYS_MachineStatus[SYS_RESOURCE_STATUS] |= SYS_PANEL_BUSY;	/** ÉIÉyÉåÅ[ÉVÉáÉìíÜÉZÉbÉg */
			InitializeSensor();											/** ÉZÉìÉTÅ[èâä˙âª */
		}

		/* ÉTÉ}Å[É^ÉCÉÄÇÃÇΩÇﬂÇÃèàóù */
		if (bcd_time.Year == CurrentTimeInBCD.Year) {
			long_time = CMN_BCD_TimeToLong(&CurrentTimeInBCD);
			SetSummerTimeStatus(long_time);
		}

#if defined (KEISATSU) /* åxé@FAX 05/11/18 êŒã¥ê≥òa */
		if (mode == TEN_2_KEY) {
			SYB_MachineParameter[M_PARA_SW_I1] &= ~BYPASS_S1; /* S1ÉoÉCÉpÉXOFF */
		}
#endif

#if (PRO_FBS == ENABLE)
		if (mode == TEN_2_KEY) {	/* ç≈å„ÇÃÉNÉäÉA Å{ óAëóÇnÇm */
			/* É~ÉâÅ[ÉLÉÉÉäÉbÉWóAëóÉÇÅ[ÉhON */
			OperationMessageToMain.Message = MSG_FBS_TRANSPORT_SET;
			snd_msg(mbxno.MAN_Task, &OperationMessageToMain);
			MainTaskExecWait();
		}
#endif

#if (PRO_MULTI_LINE == ENABLE)
		/* â∫ãLÇÃä÷êîÇÕDPRAMÇÃèâä˙âªÇ™ëSÇƒäÆóπÇµÇƒÇ¢ÇÈÇ±Ç∆Ç™ëÂëOíÒÇÃä÷êîÇ≈Ç∑ÅB */
		MAN_ChangedSRAM_Parameter(OPT_CHANGED_SETTEING_STATUS   |
								  OPT_CHANGED_MEMORY_SWITCH     |
								  OPT_CHANGED_UNI_SWITCH        |
								  OPT_CHANGED_MENTE_SWITCH      |
								  OPT_CHANGED_DRD_TEADCHING_BUF |
								  OPT_CHANGED_MACHINE_PARA);
#endif

#if defined (KEISATSU) /* åxé@FAX 05/11/24 êŒã¥ê≥òa */
		SetKeisatsuSettings();
		AttributeTimeoutCheck = 0;
		NCU_HdstShift();
#endif
		ChildDisplayStringLow(D2W_ClearComplete);	/* " **  ∏ÿ± ∂›ÿÆ≥  **  " */
	}
}
#endif

#if defined (KEISATSU) /* åxé@FAX 05/11/18 êŒã¥ê≥òa */
/**************************************************************************************************/
/**
	@brief		çHèÍåüç∏ópÉtÉ@Å[ÉXÉgÉNÉäÉA
	
	@li			
	@param		
	@return		Ç»Çµ
	@note		í èÌÇÃÉtÉ@Å[ÉXÉgÉNÉäÉAÇ…S1ÉoÉCÉpÉXONÅAâÒê¸ÉÇÉjÉ^ONÅAí êMë¨ìxï\é¶Çâ¡Ç¶ÇÈ
	@date		2005/11/18 çÏê¨
	@author		êŒã¥ê≥òa
*/
/**************************************************************************************************/
void FactoryFirstClear(void)
{
	TIME_DATA_t		bcd_time;		/* ÉTÉ}Å[É^ÉCÉÄóp */
	UDWORD			long_time;		/* ÉTÉ}Å[É^ÉCÉÄóp */

#if defined(POPLAR_F)
	/* ÉpÉèÅ[ÇnÇméûÇÃÉEÉHÅ[ÉÄÉAÉbÉvíÜÇÕÅAÉLÅ[ëÄçÏã÷é~ */
	if (SYS_MachineStatus[SYS_MACHINE_STATUS_RESERVE] & SYS_PRINTER_POWER_ON) {
		NackBuzzer();
		return;
	}
#endif

#if (PRO_FBS == ENABLE)
	if (SYB_ScannerTransportMode) {
		NackBuzzer();
		return;
	}
#endif

	CMN_StringCopy(FunctionDisplayBufferHigh, (UBYTE *)"Ãß∞Ωƒ ∏ÿ± (π›ª÷≥)   ");

	CMN_LongTimeToBCD(&bcd_time, SYB_CurrentTime); /* ÉTÉ}Å[É^ÉCÉÄóp */

	if (ConfirmKeyInputOperation(FunctionDisplayBufferHigh, D2W_CheckProgramEnter, ENTER, FUNCTION) == CONFIRM_EXEC) {
		if (SYS_MachineStatus[SYS_RESOURCE_STATUS] & ~SYS_PANEL_BUSY) {	/** ã@äÌìÆçÏíÜ */
			NackBuzzer();
			return;
		}

		CMN_InitializeAllBackUpRAM(0);		/** ã@äÌÉpÉâÉÅÅ[É^ÅAÉIÅ[ÉãÉâÉÄ		*/
		CMN_ClearConsumerOrderData();		/** è¡ñ’ïiî≠íçÉfÅ[É^ÇÃÉNÉäÉA		*/
		CMN_ClearLifeMonitorData();			/** ÉâÉCÉtÉÇÉjÉ^Å[ÉNÉäÉA			*/
#if (PRO_PRINT_TYPE == LED)
		CMN_ClearPrinterLifeMonitorData();	/** ÉvÉäÉìÉ^ÉâÉCÉtÉÇÉjÉ^Å[ÉNÉäÉA	*/
#endif
		CMN_ClearFaxComErrorMonitorData();	/** í êMÉGÉâÅ[ÉÇÉjÉ^Å[ÉNÉäÉA		*/
		CMN_ClearJournalData();				/** ÉWÉÉÅ[ÉiÉãÉfÅ[É^ÉNÉäÉA			*/

		UpdateLCD();

		InitializeDRAM_Parameter();									/** ÇcÇqÇ`ÇlóÃàÊÇèâä˙âª		*/
		InitializeMachineStatus();									/** É}ÉVÅ[ÉìÉXÉeÅ[É^ÉXÇÃÉNÉäÉA	*/
		SYS_MachineStatus[SYS_RESOURCE_STATUS] |= SYS_PANEL_BUSY;
		SYS_ErasePixMemoryListRequest = 0;							/** í‚ìdî≠ê∂èâä˙âª				*/
		Init_AnyList(LST_POWEROFF_NOTICE);							/** í‚ìdÉXÉeÅ[É^ÉXÇÃÉNÉäÉA		*/
		InitializeSensor();											/** ÉZÉìÉTÅ[Çèâä˙âª			*/

		/* ÉTÉ}Å[É^ÉCÉÄÇÃÇΩÇﬂÇÃèàóù */
		if (bcd_time.Year == CurrentTimeInBCD.Year) {
			long_time = CMN_BCD_TimeToLong(&CurrentTimeInBCD);
			SetSummerTimeStatus(long_time);
		}
		
		SYB_MachineParameter[M_PARA_SW_I1] |= BYPASS_S1; /* S1ÉoÉCÉpÉXON */
		SYS_MemorySwitch[MEMORY_SW_H0] |= LINE_MONITOR; /* âÒê¸ÉÇÉjÉ^ON */
		SYS_MemorySwitch[MEMORY_SW_H1] |= COMMUNICATION_SPEED_DISPLAY; /* í êMë¨ìxï\é¶ON */
		
#if (PRO_MULTI_LINE == ENABLE)
		/* â∫ãLÇÃä÷êîÇÕDPRAMÇÃèâä˙âªÇ™ëSÇƒäÆóπÇµÇƒÇ¢ÇÈÇ±Ç∆Ç™ëÂëOíÒÇÃä÷êîÇ≈Ç∑ÅB */
		MAN_ChangedSRAM_Parameter(OPT_CHANGED_SETTEING_STATUS   |
								  OPT_CHANGED_MEMORY_SWITCH     |
								  OPT_CHANGED_UNI_SWITCH        |
								  OPT_CHANGED_MENTE_SWITCH      |
								  OPT_CHANGED_DRD_TEADCHING_BUF |
								  OPT_CHANGED_MACHINE_PARA);
#endif

#if defined (KEISATSU) /* åxé@FAX 05/11/24 êŒã¥ê≥òa */
		SetKeisatsuSettings();
		AttributeTimeoutCheck = 0;
		NCU_HdstShift();
#endif
		ChildDisplayStringLow(D2W_ClearComplete);	/* " **  ∏ÿ± ∂›ÿÆ≥  **  " */
	}
}

#endif

#if (PRO_KEYPANEL == PANEL_POPLAR_B) && !defined(JPN)
/*************************************************************************
	module		:[ÉâÉCÉtÉÇÉjÉ^ÉNÉäÉAÉpÉXÉRÅ[ÉhÉZÉbÉg]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1998/06/01]
	author		:[ñ{ëΩ]
*************************************************************************/
void SetLifeMonitorPasscode(void)  /* lifemonitorbythonda1998/06/01 */
{
	UWORD	passcode;
	passcode = 0;

	/** å√Ç¢ÉpÉXÉRÅ[ÉhÇì¸óÕÇ≥ÇπÇÈ */
	DisplayStringHigh(0, D2W_SF_ServiceCode);  /* "◊≤Ã”∆¿  ﬂΩ∫∞ƒﬁ      " */
	if ((passcode = EnterPassCode(SYB_LifeMonitorPasscode, CHK_PASS_CODE_ENTER, D2W_OldProtectPasscode)) == 0xFFFF) {
		/* ì¸óÕèIóπ */
		return;
	}

	/** ÉpÉXÉRÅ[ÉhÉ`ÉFÉbÉNÇçsÇ§ */
	if (passcode != SYB_LifeMonitorPasscode) { /** ÉpÉXÉRÅ[ÉhïsàÍív */
		OPR_ChildErrorFlag = INVALID_PROTECT_PASSCODE_ERROR;	/* "Ãﬂ€√∏ƒ∫∞ƒﬁ ∂ﬁ ¡∂ﬁ≤œΩ" */
		NackBuzzer();
		return;
	}

	/**êVÇµÇ¢ÉpÉXÉRÅ[ÉhÇÃì¸óÕÇçsÇ§ */
	if ((passcode = EnterPassCode(SYB_LifeMonitorPasscode, PASS_CODE_ENTER_ZERO_OK, D2W_NewProtectPasscode)) == 0xFFFF) {
		/* ì¸óÕèIóπ */
		return;
	}

	SYB_LifeMonitorPasscode = passcode;
	ChildDisplaySetCompleted(D2W_SF_ServiceCode);  /* "◊≤Ã”∆¿  ﬂΩ∫∞ƒﬁ      " */
}
#endif

#if (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2)  /* By H.Fujimura 1999/01/06 */
/*************************************************************************
	module		:[ÉâÉCÉtÉÇÉjÉ^Çï“èWÇ∑ÇÈ]
	function	:[
		1.à»â∫ÇÃçÄñ⁄Çèáî‘Ç…ï“èWÇ∑ÇÈ
		,ì«Ç›Ç∆ÇËñáêî
		,àÛéöñáêî
		,ëóêMñáêî
		,ÉhÉâÉÄåä∑âÒêî
		,ÉhÉâÉÄéıñΩÉJÉEÉìÉ^
		,ÉgÉiÅ[åä∑âÒêî
		,ÉgÉiÅ[éıñΩÉJÉEÉìÉ^
		,íËíÖã@åä∑âÒêî
		,íËíÖã@éıñΩÉJÉEÉìÉ^
		,ì]é ÉçÅ[ÉâÅ[åä∑âÒêî
		,ì]é ÉçÅ[ÉâÅ[éıñΩÉJÉEÉìÉ^
	]
	return		:[Ç»Çµ]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1998/02/27]
	author		:[ïüñ{ãMãg]
*************************************************************************/
void EditLifeMonitor(void)
{

	/** ì«Ç›éÊÇËñáêî */
	ClearCharacterInput();	/* ÉèÅ[ÉNÉGÉäÉAèâä˙âª */
	CMN_UnsignedLongToASC(&CharacterInput.Buffer[0], SYB_LifeMonitor.ScanCount, 6, '0');
	if (LifeMonitorNumberInput(D2W_SF_LifeReadingPage, 6) == OPR_END) {
		return;
	}
	SYB_LifeMonitor.ScanCount = (UDWORD)(CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[0], 4) * 100L +
										 CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[4], 2));

	/** àÛéöñáêî */
	ClearCharacterInput();	/* ÉèÅ[ÉNÉGÉäÉAèâä˙âª */
	CMN_UnsignedLongToASC(&CharacterInput.Buffer[0], SYB_LifeMonitor.PrintCount, 6, '0');
	if (LifeMonitorNumberInput(D2W_SF_LifePrintingPage, 6) == OPR_END) {
		return;
	}
	SYB_LifeMonitor.PrintCount = (UDWORD)(CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[0], 4) * 100L +
										  CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[4], 2));

	/** ëóêMñáêî */
	ClearCharacterInput();	/* ÉèÅ[ÉNÉGÉäÉAèâä˙âª */
	CMN_UnsignedLongToASC(&CharacterInput.Buffer[0], SYB_LifeMonitor.TransmitCount, 6, '0');
	if (LifeMonitorNumberInput(D2W_SF_LifeTxPage, 6) == OPR_END) {
		return;
	}
	SYB_LifeMonitor.TransmitCount = (UDWORD)(CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[0], 4) * 100L +
											 CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[4], 2));

#if (PRO_PRINT_TYPE != THERMAL) /* By H.Fujimura 1999/01/06 */
	/** ÉhÉâÉÄåä∑âÒêî */
	ClearCharacterInput();	/* ÉèÅ[ÉNÉGÉäÉAèâä˙âª */
	CMN_UnsignedIntToASC(&CharacterInput.Buffer[0], SYB_PrinterLifeMonitor.DrumReplaceCount, 5, '0');
	if (LifeMonitorNumberInput(D2W_SF_LifeDrumReplaceCount, 5) == OPR_END) {
		return;
	}
	SYB_PrinterLifeMonitor.DrumReplaceCount = (UWORD)(CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[0], 4) * 10 +
													  CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[4], 1));

	/** ÉhÉâÉÄéıñΩÉJÉEÉìÉ^Å[ */
	ClearCharacterInput();	/* ÉèÅ[ÉNÉGÉäÉAèâä˙âª */
	CMN_UnsignedLongToASC(&CharacterInput.Buffer[0], SYB_PrinterLifeMonitor.DrumLifeCount, 6, '0');
	if (LifeMonitorNumberInput(D2W_SF_LifeDrumLifeCount, 6) == OPR_END) {
		return;
	}
	SYB_PrinterLifeMonitor.DrumLifeCount = (UDWORD)(CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[0], 4) * 100L +
													CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[4], 2));

	/** ÉgÉiÅ[åä∑âÒêî */
	ClearCharacterInput();	/* ÉèÅ[ÉNÉGÉäÉAèâä˙âª */
	CMN_UnsignedIntToASC(&CharacterInput.Buffer[0], SYB_PrinterLifeMonitor.TonerReplaceCount, 5, '0');
	if (LifeMonitorNumberInput(D2W_SF_LifeTonerReplaceCount, 5) == OPR_END) {
		return;
	}
	SYB_PrinterLifeMonitor.TonerReplaceCount = (UWORD)(CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[0], 4) * 10 +
													   CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[4], 1));

	/** ÉgÉiÅ[éıñΩÉJÉEÉìÉ^Å[ */
	ClearCharacterInput();	/* ÉèÅ[ÉNÉGÉäÉAèâä˙âª */
	CMN_UnsignedIntToASC(&CharacterInput.Buffer[0], SYB_PrinterLifeMonitor.TonerLifeCount, 5, '0');
	if (LifeMonitorNumberInput(D2W_SF_LifeTonerLifeCount, 5) == OPR_END) {
		return;
	}
	SYB_PrinterLifeMonitor.TonerLifeCount = (UWORD)(CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[0], 4) * 10 +
													CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[4], 1));

	/** íËíÖã@åä∑âÒêî */
	ClearCharacterInput();	/* ÉèÅ[ÉNÉGÉäÉAèâä˙âª */
	CMN_UnsignedIntToASC(&CharacterInput.Buffer[0], SYB_PrinterLifeMonitor.FuserReplaceCount, 5, '0');
	if (LifeMonitorNumberInput(D2W_SF_LifeFuserReplaceCount, 5) == OPR_END) {
		return;
	}
	SYB_PrinterLifeMonitor.FuserReplaceCount = (UWORD)(CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[0], 4) * 10 +
													   CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[4], 1));

	/** íËíÖã@éıñΩÉJÉEÉìÉ^Å[ */
	ClearCharacterInput();	/* ÉèÅ[ÉNÉGÉäÉAèâä˙âª */
	CMN_UnsignedLongToASC(&CharacterInput.Buffer[0], SYB_PrinterLifeMonitor.FuserLifeCount, 6, '0');
	if (LifeMonitorNumberInput(D2W_SF_LifeFuserLifeCount, 6) == OPR_END) {
		return;
	}
	SYB_PrinterLifeMonitor.FuserLifeCount = (UDWORD)(CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[0], 4) * 100L +
													 CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[4], 2));

	/** ì]é ÉçÅ[ÉâÅ[åä∑âÒêî */
	ClearCharacterInput();	/* ÉèÅ[ÉNÉGÉäÉAèâä˙âª */
	CMN_UnsignedIntToASC(&CharacterInput.Buffer[0], SYB_PrinterLifeMonitor.TransferReplaceCount, 5, '0');
	if (LifeMonitorNumberInput(D2W_SF_LifeTransferReplaceCount, 5) == OPR_END) {
		return;
	}
	SYB_PrinterLifeMonitor.TransferReplaceCount = (UWORD)(CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[0], 4) * 10 +
														  CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[4], 1));

	/** ì]é ÉçÅ[ÉâÅ[éıñΩÉJÉEÉìÉ^Å[ */
	ClearCharacterInput();	/* ÉèÅ[ÉNÉGÉäÉAèâä˙âª */
	CMN_UnsignedLongToASC(&CharacterInput.Buffer[0], SYB_PrinterLifeMonitor.TransferLifeCount, 6, '0');
	if (LifeMonitorNumberInput(D2W_SF_LifeTransferLifeCount, 6) == OPR_END) {
		return;
	}
	SYB_PrinterLifeMonitor.TransferLifeCount = (UDWORD)(CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[0], 4) * 100L +
														CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[4], 2));
#endif	/* (PRO_PRINT_TYPE != THERMAL) */
	ChildDisplayStringLow(D2W_SetComplete);	/* " **  æØƒ ∂›ÿÆ≥  **  " */
}

/*************************************************************************
	module		:[ÉâÉCÉtÉÇÉjÉ^ÉfÅ[É^êîílì¸óÕ]
	function	:[
		1.
	]
	return		:[
		OPR_END      Å® ì¸óÕíÜé~
		OPR_CONTINUE Å® ì¸óÕë±çs
	]
	common		:[]
	condition	:[]
	comment		:[
		ì¸óÕîÕàÕ
			ÇUåÖÇÃÇ∆Ç´ÇOÅ`ÇXÇXÇXÇXÇXÇX(ì¸óÕílÇÃÉ`ÉFÉbÉNÇÕïsïKóv)
			ÇTåÖÇÃÇ∆Ç´ÇOÅ`  ÇUÇTÇTÇRÇT(ì¸óÕílÇÃÉ`ÉFÉbÉNÇ™ïKóv)
	]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1998/02/27]
	author		:[ïüñ{ãMãg]
*************************************************************************/
UBYTE LifeMonitorNumberInput(UBYTE *title_wording,	/* è„íiï\é¶ópÉèÅ[ÉfÉBÉìÉO */
							 UBYTE figure)			/* åÖêî */
{

	UBYTE	key;			/* ÉLÅ[ì¸óÕ		  */
	UBYTE	keytype;		/* ÉLÅ[ì¸óÕ		  */
	UDWORD	input_value;	/* ì¸óÕíl		  */

	CharacterInput.WritePosition      = figure - 1;
	CharacterInput.CursorPosition     = 0;
	CharacterInput.LcdDisplayPosition = 0;

	/* è„íiï\é¶ */
	DisplayStringHigh(0, title_wording);

	/* ì¸óÕèàóù */
	while (1) {

		/** â∫íiï\é¶ */
		CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
		CMN_StringCopy(&FunctionDisplayBufferLow[0], CharacterInput.Buffer);
		DisplayStringLow(0, FunctionDisplayBufferLow);
		CursorOn((UBYTE)(CharacterInput.CursorPosition + OPR_LCD_LOWER_ADD));

		/** ÉLÅ[ÇÃéÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóù */
		switch (keytype) {
		case STOP:			/** ÉXÉgÉbÉvÉLÅ[ */
		case KEY_TIME_UP:	/** ÇPï™ä‘ÉLÅ[ì¸óÕÇ»Çµ */
			/** èIóπ */
			CursorOff();
			return (OPR_END);
		case ENTER:			/** ÉZÉbÉgÉLÅ[ */
			/* ì¸óÕílÇ™ÇTåÖÇÃèÍçáÇÕì¸óÕîÕàÕ(ÇOÅ`ÇUÇTÇTÇRÇT)ÇÃÉ`ÉFÉbÉN */
			if (figure == 5) {
	 			input_value = (UDWORD)(CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[0], 4) * 10 +
									   CMN_ASC_ToUnsignedInt(&CharacterInput.Buffer[4], 1));
				if ((input_value < 0) || (input_value > 0xFFFF)) {
					NackBuzzer();
					break;
				}
			}
			CursorOff();
			return (OPR_CONTINUE);
		case NUMBER:		/** êîéöÉLÅ[ */
			FixedNumberDataSet(key);
			break;
		case FUNCTION:		/** ÅÑÉLÅ[ */
			CursorRightRotation();
			break;
		case LEFT_ARROW: 	/** ÅÉÉLÅ[ */
			CursorLeftRotation();
			break;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}
#endif /* (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2)  */

/*************************************************************************
	module		:[ÉÇÉjÉ^Å[ÉXÉsÅ[ÉJÅ[ÇnÇmÅ^ÇnÇeÇe]
	function	:[
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/07/24]
	author		:[éRå˚]
*************************************************************************/
void SetMonitorSpeakerOnOff(void)
{
	if (SYS_MemorySwitch[MEMORY_SW_H0] & LINE_MONITOR) {
		SYS_MemorySwitch[MEMORY_SW_H0] &= ~LINE_MONITOR;
		MonitorSpeakerOff();
	}
	else {
		SYS_MemorySwitch[MEMORY_SW_H0] |= LINE_MONITOR;
		MonitorSpeakerOn();
	}
}

/*************************************************************************
	module		:[ÉÅÉÇÉäÉ_ÉìÉvï\é¶]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/08/07]
	author		:[ìnï”àÍèÕ]
*************************************************************************/
void MemoryDump(void)
{
	UBYTE	i;
	UBYTE	byte;
	UBYTE	word;
	UBYTE	keytype;
	UBYTE	is_loop_end;	/* ÉãÅ[ÉvèIóπÇ≈égóp */
	UBYTE	num_buf[8 + 1];
	UBYTE	*dump_adr;
	UDWORD	wrk_adr;
	UDWORD	add_pos;
	UDWORD	add_end_pos;
	UDWORD	disp_add_pos;

	is_loop_end = FALSE;

	/* ï\é¶ */
	DisplayStringHigh(0, D2W_SF_MemoryDump);		/* "“”ÿ¿ﬁ›Ãﬂ            " */

	/* ÉAÉhÉåÉXÇÃì¸óÕ */
	CMN_MemorySetNULL(num_buf, 8, '0');
	if (InputAddressOrLength(D2W_SF_MemoryDumpAddress, 12, 8, num_buf) == FALSE) {
		return;
	}

	wrk_adr = 0;
	for (i = 0; i < 2; i++) {
		wrk_adr |= (UDWORD)(CMN_ASC_ToUnsignedIntHex(&num_buf[i * 4], 4) << (16 - (i * 16)));
	}
	OPR_MemoryDumpAddress = (UBYTE *)wrk_adr;

	/* É_ÉìÉvÇäJénÇ∑ÇÈÉAÉhÉåÉXÇè„íiÇ…ï\é¶ÇµÇ‹Ç∑ */
	ClearDisplayHigh();	/* í«â¡ 1998/01/27 Y.Matsukma */
	CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
	CMN_UnsignedLongToHexASC_NULL(FunctionDisplayBufferHigh, wrk_adr, 8, '0');
	DisplayStringHigh(0, FunctionDisplayBufferHigh);

	/* ÉfÅ[É^í∑ÇÃì¸óÕ */
	CMN_MemorySetNULL(num_buf, 4, '0');
	if (InputAddressOrLength(D2W_SF_MemoryDumpLength, 12, 4, num_buf) == FALSE) {
		return;
	}
	OPR_MemoryDumpLength = (UDWORD)CMN_ASC_ToUnsignedIntHex(num_buf, 4);

	add_pos = (UDWORD)OPR_MemoryDumpAddress;
	add_end_pos = (UDWORD)(OPR_MemoryDumpAddress + OPR_MemoryDumpLength);

	while (is_loop_end != TRUE) {
		disp_add_pos = add_pos;

		/* É_ÉìÉvÉAÉhÉåÉXÇï\é¶ópÇ…ÉZÉbÉg */
		CMN_UnsignedLongToHexASC_NULL(FunctionDisplayBufferHigh, disp_add_pos, 8, '0');

		/* É_ÉìÉvì‡óeÇÃÉZÉbÉg */
		CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
		for (word = 0; word < 4; word++) {
			for (byte = 0; byte < 2; byte++) {
				if (disp_add_pos <= add_end_pos) {
					dump_adr = (UBYTE *)disp_add_pos;
					CMN_HexToASC(&FunctionDisplayBufferLow[(word * 5) + (byte * 2)], (UDWORD)(*dump_adr), 2);
					disp_add_pos++;
				}
			}
		}

		/* è„â∫íiÇÃï\é¶ */
		DisplayStringHigh(0, FunctionDisplayBufferHigh);
		DisplayStringLow(0, FunctionDisplayBufferLow);

		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keytype = GetInputKeyType();

		switch (keytype) {
		case STOP:			/* ÉXÉgÉbÉvÉLÅ[ */
		case KEY_TIME_UP:	/* ÇPï™ä‘ÉLÅ[ì¸óÕÇ»Çµ */
			is_loop_end = TRUE;
			break;
		case START:			/* ÉXÉ^Å[ÉgÉLÅ[ */
#if (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2)  /* By H.Fujimura 1999/01/06 */
			/* ì¸óÕÇ™ÇtÇvÇnÇqÇcÇÃà◊ÅAç≈ëÂÇ™ÇUÇSÇjÅ|ÇPÉoÉCÉgÇ∆Ç»ÇÈÅB
			**ÅiÉäÉXÉgÇÕÇPÇUÉoÉCÉgÉoÉEÉìÉ_ÉäÅ[Ç≈ÉvÉäÉìÉgÇµÇƒÇ®ÇËÅAÇªÇÃÇ∆Ç´ÅAÇPÇUÉoÉCÉgà»â∫ÇÃécÇÕÉvÉäÉìÉg
			** Ç≥ÇÍÇ»Ç¢ÇÊÇ§Ç»ç\ë¢Ç…Ç»Ç¡ÇƒÇ¢ÇÈÅB
			** ÇªÇÃà◊ÅAÇ±Ç±Ç≈ÅAÇPÇUÉoÉCÉgÉoÉEÉìÉ_ÉäÅ[Ç…Ç»ÇÈÇÊÇ§Ç…î˜í≤êÆÇµÇ‹Ç∑ÅB
			**  By O.Kimoto 1998/02/20
			*/
			if ((OPR_MemoryDumpLength % 16) != 0) {
				OPR_MemoryDumpLength += 16;
				OPR_MemoryDumpLength &= (UDWORD)(0x0001ffff);
			}
#endif
			FinalListPrintOperation(LST_MEMORY_DUMP);
			is_loop_end = TRUE;
			break;
		case FUNCTION:		/* ã@î\Å^ÅÑÉLÅ[ */
			if (add_pos + 8 < add_end_pos) {
				add_pos += (UDWORD)8;
			}
			else {
				NackBuzzer();
			}
			break;
		case LEFT_ARROW:	/* éüå¥çeÅ^ÅÉÉLÅ[ */
			if (add_pos > (UDWORD)OPR_MemoryDumpAddress) {
				add_pos -= (UDWORD)8;
			}
			else {
				NackBuzzer();
			}
			break;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
		}
	}
}

#if defined (KEISATSU) /* åxé@FAX 05/12/12 êŒã¥ê≥òa */
/**************************************************************************************************/
/**
	@brief		í êMë¨ìxï\é¶ON/OFF
	
	@li			
	@param		
	@return		Ç»Çµ
	@note		
	@date		2005/12/12 çÏê¨
	@author		êŒã¥ê≥òa
*/
/**************************************************************************************************/
void DisplayCommunicationSpeed(void)
{
	if (SYS_MemorySwitch[MEMORY_SW_H1] & COMMUNICATION_SPEED_DISPLAY) {
		SYS_MemorySwitch[MEMORY_SW_H1] &= ~COMMUNICATION_SPEED_DISPLAY;
	}
	else {
		SYS_MemorySwitch[MEMORY_SW_H1] |= COMMUNICATION_SPEED_DISPLAY;
	}
}
#endif

/*************************************************************************
	module		:[ÉAÉhÉåÉXorÉfÅ[É^í∑ì¸óÕèàóù]
	function	:[
		1.
	]
	return		:[
		TRUE	:ì¸óÕäÆóπ
		FALSE	:ì¸óÕíÜé~ÅEÉ^ÉCÉÄÉAÉbÉv
	]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/08/07]
	author		:[ìnï”àÍèÕ]
*************************************************************************/
UBYTE InputAddressOrLength(UBYTE *title_wording, UBYTE dsp_pos, UBYTE num_len, UBYTE *num_buf)
{
	UBYTE	inp_pos;
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	is_loop_end;	/* ÉãÅ[ÉvèIóπÇ≈égóp */
	UBYTE	ret;			/* ÉäÉ^Å[Éìíl */

	inp_pos = 0;
	is_loop_end = FALSE;
	ret = TRUE;

	CMN_StringCopy(FunctionDisplayBufferLow, title_wording);

	while (is_loop_end != TRUE) {
		CMN_StringCopy(&FunctionDisplayBufferLow[dsp_pos], num_buf);
		DisplayStringLow(0, FunctionDisplayBufferLow);
		CursorOn((UBYTE)(OPR_LCD_LOWER_ADD + dsp_pos + inp_pos));

		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case ENTER:			/* ÉZÉbÉgÉLÅ[ */
			is_loop_end = TRUE;
			break;
		case STOP:			/* ÉXÉgÉbÉvÉLÅ[ */
		case KEY_TIME_UP:	/* ÇPï™ä‘ÉLÅ[ì¸óÕÇ»Çµ */
			ret = FALSE;
			is_loop_end = TRUE;
			break;
		case FUNCTION:		/* ã@î\Å^ÅÑÉLÅ[ */
			if (inp_pos < num_len - 1) {
				inp_pos++;
			}
			else {
				NackBuzzer();
			}
			break;
		case LEFT_ARROW:	/* éüå¥çeÅ^ÅÉÉLÅ[ */
			if (inp_pos != 0) {
				inp_pos--;
			}
			else {
				NackBuzzer();
			}
			break;
		case NUMBER:		/* êîéöÉLÅ[ */
			num_buf[inp_pos] = key;
			if (inp_pos < num_len - 1) {
				inp_pos++;
			}
			break;
		case ONETOUCH:		/* ÉèÉìÉ^ÉbÉ`ÉLÅ[ */
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L) || (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 
			if ((key >= ONETOUCH_01_KEY) && (key <= ONETOUCH_06_KEY)) {	/* Ç`Å`ÇeÇÃéû */
				num_buf[inp_pos] = key;
				if (inp_pos < num_len - 1) {
					inp_pos++;
				}
			}
			else {
				NackBuzzer();
			}
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
			if ((key >= ONETOUCH_A_KEY) && (key <= ONETOUCH_F_KEY)) {	/* Ç`Å`ÇeÇÃéû */
				num_buf[inp_pos] = key;
				if (inp_pos < num_len - 1) {
					inp_pos++;
				}
			}
			else {
				NackBuzzer();
			}
#endif
			break;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
		}
	}

	return(ret);
}

/*************************************************************************
	module		:[ÉeÉXÉgópÉIÉyÉåÅ[ÉVÉáÉì]
	function	:[
		1.ÇoÇqÇfÅñÅñÅEÅEÇ≈åƒÇ—èoÇ≥ÇÍÇÈÉIÉyÉåÅ[ÉVÉáÉì
		2.äJî≠éûÇÃÉeÉXÉgÉIÉyÉåÅ[ÉVÉáÉì
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[
		fnc_numberÇÇ»Ç≠ÇµÇƒkeycodeÇ≈å©ÇÈÇÊÇ§Ç…ÇµÇ‹ÇµÇΩ 1997/09/18 Y.Matsukuma
	]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/09/03]
	author		:[ç]å˚]
*************************************************************************/
void MaintenanceOperationMode(void)
{
	UBYTE	keycode;
	UBYTE	keytype;
	UBYTE	loop;

	loop = 1;

	while (loop) {
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keytype = GetInputKeyType();
		keycode = GetInputKeyCode();
		switch (keytype) {
		case NUMBER:
		case ONETOUCH:
		case PROGRAM:
#if defined(HINOKI3)	/* ONETOUCH_30_KEYÇ™ÉvÉåÉtÉBÉbÉNÉXÉLÅ[Ç…ïœÇÌÇ¡ÇΩÇÃÇ≈ by K.Watanabe 2004/10/26 */
		case MERCURY:
#endif
			loop = 0;
			break;
		case STOP:
		case KEY_TIME_UP:
			return;
		case NO_EFFECT:
			break;
#if defined(POPLAR_F)	/* for debug 1999/11/16 Y.M */
		case SHARP:
			loop = 0;
			break;
#endif
		default:
			NackBuzzer();
			return;
		}
	}

	/* ä÷êîé¿çs */
	switch (keycode) {
	/* ÇhÇbÇgÇnÇ≈ÅAÅuã@î\Å{ÅñÅ{ÇOÅvÇ∆ä‘à·Ç¶ÇÈâ¬î\ê´Ç™Ç†ÇÈÇΩÇﬂÇ…ïœçXÇ≥ÇÍÇΩÇÃÇ≈çáÇÌÇπÇƒÇ®Ç´Ç‹Ç∑ */
#if (0)
//	case TEN_0_KEY:
#endif
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L)
	case ONETOUCH_40_KEY:
#endif
#if (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2)  /* By H.Fujimura 1999/01/06 */
 #if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2)
	case ONETOUCH_20_KEY: 
 #else
  #if defined(HINOKI3)	/* ONETOUCH_30_KEYÇ™ÉvÉåÉtÉBÉbÉNÉXÉLÅ[Ç…ïœÇÌÇ¡ÇΩÇÃÇ≈ by K.Watanabe 2004/10/26 */
   #if (PRO_PREFIX_KEY == ENABLE)	/* åxé@FAX Modify by SMuratec K.W.Q 2005/10/13 */
	case MERCURY_KEY:		/* ÉvÉåÉtÉBÉbÉNÉXÉLÅ[		*/
   #else
	case ONETOUCH_30_KEY:	/* ÉèÉìÉ^ÉbÉ`ÇRÇOÉLÅ[		*/
   #endif
  #else
	case ONETOUCH_30_KEY:
  #endif
 #endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
	case PROGRAM_P06:
#endif
		MaintenanceSwitchMode();		/* ï€éÁópÉXÉCÉbÉ`ÉÇÅ[Éh */
		break;
	case TEN_1_KEY:
		MachineStatusMonitor();			/* É}ÉVÅ[ÉìÉXÉeÅ[É^ÉXÉÇÉjÉ^Å[ */
		break;
	case TEN_2_KEY:
		Class1MonitorPrintOperation();	/* ÉNÉâÉXÇPÉIÉìÉâÉCÉìÉÇÉjÉ^Å[ */
		break;
	case TEN_3_KEY:
		PrinterStatusMonitor();			/* ÉvÉäÉìÉ^Å[ÉXÉeÅ[É^ÉXÉÇÉjÉ^Å[ */
		break;
#if defined(POPLAR_F) || defined(SATSUKI2) || defined(STOCKHM2)	/* Add by Y.kano 2003/10/02 */
	case TEN_4_KEY:						/* ÉCÉìÉfÉbÉNÉXÇÃëçécÉyÅ[ÉWêî/ë„åÇÃEMPTYÉtÉ@ÉCÉãêî/ÉÅÉÇÉäécó ï\é¶ */
		EmptyAndMemoryAreaDisplay();
		break;
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
	case TEN_4_KEY:						/* ÉCÉìÉfÉbÉNÉXÇÃëçécÉyÅ[ÉWêî/ë„åÇÃEMPTYÉtÉ@ÉCÉãêî/ÉÅÉÇÉäécó ï\é¶ */
		EmptyAndMemoryAreaDisplay();	/* 1997/10/30 Y.Matsukuma */
		break;
	case TEN_5_KEY:						/* ÇPâÒê¸Ç©ÇÁëóêMÉeÉXÉgµÕﬂ⁄∞ºÆ› */
		ChangeRxSecondLine();			/* 1998/01/29 Y.Matsukuma */
		break;
#endif
#if (PRO_DIALUP_INTERNET_FAX == ENABLE) /* 1998/05/22 Eguchi */
	case TEN_6_KEY:						/*InternetFAX”∆¿∞ÉvÉäÉìÉg*/
		IfaxMonitorPrint();
		break;
#endif
#if (PRO_KEYPANEL == PANEL_POPLAR_B) || (PRO_KEYPANEL == PANEL_POPLAR_L) || (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 
	case ONETOUCH_01_KEY:
#endif
#if (PRO_KEYPANEL == PANEL_ANZU_L)
	case ONETOUCH_A_KEY:
#endif
		ServiceReportPrintOperation();	/* ÉTÅ[ÉrÉXÉåÉ|Å[ÉgÉvÉäÉìÉg */
		break;
#if (PRO_KEYPANEL == PANEL_POPLAR_B) && (PRO_OKI == ENABLE)	/* by K.Watanabe 1998/09/25 */
	case ONETOUCH_02_KEY:
		PrintErrorList();				/* ÉGÉâÅ[ÉäÉXÉgÅ@ÉvÉäÉìÉg */
		break;
#endif
#if defined (HINOKI2) || defined(HINOKI3) || defined (SATSUKI2) || defined(STOCKHM2)
 #if (PRO_DIALIN == ENABLE)		/* èåèí«â¡ 2002/07/18 T.Takagi */
	case ONETOUCH_09_KEY:		/** É_ÉCÉÑÉãÉCÉìDTMFåüèoÉeÉXÉg */
		TestDialinDetectDTMF();
		break;
 #endif
#endif

#if defined(STOCKHM2) || (defined(HINOKI2) && defined(JPNNTT)) || defined(HINOKI3)	/* O.Oshima 2004/11/04 */	/* Y.kano 2005/02/14 */
	case ONETOUCH_13_KEY:	/** ÉiÉìÉoÅ[ÉfÉBÉXÉvÉåÉC CAR åüèoÉpÉâÉÅÅ[É^ÉÇÅ[Éh */
		DisplayCheckSum();
		break;
#endif

#if (PRO_NUMBER_DISPLAY == ENABLE) /* By H.Fujimura 1999/01/06 */
 #if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2)
	case ONETOUCH_19_KEY:	/** ÉiÉìÉoÅ[ÉfÉBÉXÉvÉåÉC CAR åüèoÉpÉâÉÅÅ[É^ÉÇÅ[Éh */
 #else
	case ONETOUCH_29_KEY:	/** ÉiÉìÉoÅ[ÉfÉBÉXÉvÉåÉC CAR åüèoÉpÉâÉÅÅ[É^ÉÇÅ[Éh */
 #endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
		OPR_NumberDisplayCarPatternMode();
		break;
#endif
#if defined(POPLAR_F)	/* for debug 1999/11/16 Y.M */
	case TEN_SHARP_KEY:
		NackBuzzer();
		/*SaveReturnAddressAndJumpBegin(); 2000/1/24 Y.M */
		break;
#endif
	default:
		NackBuzzer();
		break;
	}
}

/*************************************************************************
	module		:[É}ÉVÉìÉXÉeÅ[É^ÉXï\é¶]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[Ç∆ÇËÇ†Ç¶Ç∏<PRG * Çd>Ç≈åƒÇ—èoÇ∑->QATÇ™Ç∑ÇÒÇæÇÁÇ‡Ç¡Ç∆ÇÌÇ©ÇËÇ…Ç≠Ç¢Ç∆Ç±ÇÎÇ…ìÆÇ©Ç∑Ç±Ç∆
				  <PRG * * 1>Ç≈åƒÇ—èoÇ∑ÇÊÇ§Ç…ïœçX 1996/09/03 Eguchi
				  0Å`15Ç‹Ç≈ÇÃÉXÉeÅ[É^ÉXëSÇƒÇï\é¶Ç∑ÇÈÇÊÇ§Ç…ïœçX 1997/05/16 M.Kuwahara ]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/05/21]
	author		:[èºåG]
*************************************************************************/
void MachineStatusMonitor(void)
{
	UBYTE keytype;
	UBYTE page;

	page	 = 1;
	CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
	CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
	do {
		if( page == 1 ){
			CMN_HexToASC(&FunctionDisplayBufferHigh[0],  SYS_MachineStatus[SYS_RESOURCE_STATUS],    4);
			CMN_HexToASC(&FunctionDisplayBufferHigh[5],  SYS_MachineStatus[SYS_MACHINE_STATUS],     4);
			CMN_HexToASC(&FunctionDisplayBufferHigh[10], SYS_MachineStatus[SYS_MACHINE_STATUS_NCU], 4);
			CMN_HexToASC(&FunctionDisplayBufferHigh[15], SYS_MachineStatus[SYS_MACHINE_STATUS_RESERVE], 4);
			CMN_HexToASC(&FunctionDisplayBufferLow[0],   SYS_MachineStatus[SYS_STOP_SWITCH_STATUS], 4);
			CMN_HexToASC(&FunctionDisplayBufferLow[5],   SYS_MachineStatus[SYS_STOP_SWITCH_STATUS_RESERVE], 4);
			CMN_HexToASC(&FunctionDisplayBufferLow[10], SYS_MachineStatus[SYS_PRINTER_STATUS1],    4);
			CMN_HexToASC(&FunctionDisplayBufferLow[15], SYS_MachineStatus[SYS_PRINTER_STATUS2],    4);
			FunctionDisplayBufferLow[19] = 0x7E;	/* -> */
		}
		else{
			CMN_HexToASC(&FunctionDisplayBufferHigh[0], SYS_MachineStatus[SYS_PRINTER_STATUS3],    4);
			CMN_HexToASC(&FunctionDisplayBufferHigh[5],  SYS_MachineStatus[SYS_SCANNER_STATUS],     4);
			CMN_HexToASC(&FunctionDisplayBufferHigh[10], SYS_MachineStatus[SYS_COVER_STATUS], 		4);
			CMN_HexToASC(&FunctionDisplayBufferHigh[15], SYS_MachineStatus[SYS_SENSOR_STATUS], 		4);
			CMN_HexToASC(&FunctionDisplayBufferLow[0],   SYS_MachineStatus[SYS_ERROR_STATUS],     4);
			CMN_HexToASC(&FunctionDisplayBufferLow[5],   SYS_MachineStatus[SYS_WARNING_STATUS],       4);
			CMN_HexToASC(&FunctionDisplayBufferLow[10],  SYS_MachineStatus[SYS_OTHER_STATUS],      4);
			CMN_HexToASC(&FunctionDisplayBufferLow[15],  SYS_MachineStatus[SYS_CASSETTE_OPTION_STATUS], 4);
			FunctionDisplayBufferLow[19] = 0x7F;	/* <- */
		}
		DisplayStringHigh(0, FunctionDisplayBufferHigh);	/* "0000 0000 0000 0000 " */
		DisplayStringLow(0, FunctionDisplayBufferLow);		/* "0000 0000 0000 0000 " */

		OPR_GetKey(KEY_WAIT_ONE_SECOND);
		keytype = GetInputKeyType();
		switch( keytype ){
		case	FUNCTION:
			if( page == 1 ){
				page++;
			}
			break;
		case	LEFT_ARROW:
			if( page != 1 ){
				page--;
			}
			break;
		}
	} while (keytype != STOP);
}

/*************************************************************************
	module		:[ÉNÉâÉXÇPÉIÉìÉâÉCÉìÉÇÉjÉ^Å[ÉvÉäÉìÉgÅEÉRÅ[Éã]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[CLASS1óLÇËÇÃã@éÌÇÃÇ›óLå¯]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1996/08/21]
	author		:[ç]å˚]
*************************************************************************/
void Class1MonitorPrintOperation(void)
{
#if (PRO_CLASS1 == ENABLE)
	FinalListPrintOperation(LST_CL1_ONLINE_MONITOR);
#else
	NackBuzzer();
#endif
}

/*************************************************************************
	module		:[ÉvÉäÉìÉ^Å[ÉXÉeÅ[É^ÉXï\é¶]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/04/21]
	author		:[ìnï”àÍèÕ]
*************************************************************************/
void PrinterStatusMonitor(void)
{
#if (PRO_PRINT_TYPE == LED)	/* ANZU_LÇÕÇ∆ÇËÇ†Ç¶Ç∏ãÛÇ…Ç∑ÇÈ 1997/06/16 Y.Matsukuma */
	UBYTE	keytype;
	WORD	work;

	do {
		/* ï\é¶ópÉoÉbÉtÉ@ÇÃèâä˙âª */
		CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
		CMN_MemorySetNULL(FunctionDisplayBufferLow,  OPR_DISPLAY_MAX, ' ');

		/* è„íiï\é¶ì‡óeÇÃÉZÉbÉg */
		CMN_HexToASC(&FunctionDisplayBufferHigh[0],  PRN_Paper1SizeData, 3);
		CMN_HexToASC(&FunctionDisplayBufferHigh[4],  PRN_Paper2SizeData, 3);
		CMN_HexToASC(&FunctionDisplayBufferHigh[8],  PRN_Paper3SizeData, 3);
		CMN_HexToASC(&FunctionDisplayBufferHigh[12], PRN_HeaterTemp,     3);
		CMN_HexToASC(&FunctionDisplayBufferHigh[16], AD_Battery(),       3);

		/* â∫íiï\é¶ì‡óeÇÃÉZÉbÉg */
		CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[0], PRN_TonerHighCount, 3, '0');
		work = PRN_CalculateDispEnvTemp();
		if (work >= 0) {
			CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[5], work, 2, '0');
		}
		else {
			FunctionDisplayBufferLow[4] = '-';
			CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[5], (UWORD)(0 - work), 2, '0');
		}
		CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[8], PRN_PWM_Duty, 3, '0');
		if (PRN_OutputVoltage >= 0) {
			CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[12], PRN_OutputVoltage/10, 3, '0');
		}
		else {
			FunctionDisplayBufferLow[11] = '-';
			CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[12], (UWORD)(0 - PRN_OutputVoltage)/10, 3, '0');
		}
/*		CMN_HexToASC(&FunctionDisplayBufferLow[16], PRN_AverageHVT_Ampere, 3);	â∫ãLÇ…ïœçX By M.Tachibana 1997/12/28 */
		CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[16], PRN_AverageHVT_Ampere, 3, '0');

		/* è„â∫íiÇÃï\é¶ */
		DisplayStringHigh(0, FunctionDisplayBufferHigh);	/* "FFF FFF FFF FFF FFF " */
		DisplayStringLow(0,  FunctionDisplayBufferLow);		/* "999 -99 999-999 FFF " */

		/* ÉLÅ[ë“ÇøÅiÇPïbñàÇ…ï\é¶ÇçXêVÅj */
		OPR_GetKey(KEY_WAIT_ONE_SECOND);
		keytype = GetInputKeyType();
	} while (keytype != STOP);
#endif

#if defined(HINOKI2) || defined(HINOKI3)	/* ÉRÉsÅ[éûÇÃÉTÅ[É}ÉãÉwÉbÉhÇÃâ∑ìxÇ∆ÉvÉåÉqÅ[ÉgàÛâ¡ÉpÉãÉXïùÇÉÇÉjÉ^Å[Ç∑ÇÈ 2004/02/04 Y.Kano */
	UBYTE	keytype;
	UBYTE	themistor;

	if (SYB_LC821033_Flg) {		/* LC821033ëŒâûÉtÉâÉOÇ™óßÇ¡ÇƒÇ¢ÇÈéûÇ…ÇÃÇ› */
		do {
			/* ï\é¶ópÉoÉbÉtÉ@ÇÃèâä˙âª */
			CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
			CMN_MemorySetNULL(FunctionDisplayBufferLow,  OPR_DISPLAY_MAX, ' ');

			/* ÉTÅ[É}ÉãÉwÉbÉhâ∑ìxÇÃì«èoÇµ */
			themistor = (UBYTE)AD_Thermistor();

			/* è„íiï\é¶ì‡óeÇÃÉZÉbÉg */
			CMN_StringCopy(&FunctionDisplayBufferHigh[0], (UBYTE *)"ª∞œŸÕØƒﬁµ›ƒﬁ :");
			CMN_HexToASC(&FunctionDisplayBufferHigh[15], themistor, 3);

			/* â∫íiï\é¶ì‡óeÇÃÉZÉbÉg */
			CMN_StringCopy(&FunctionDisplayBufferLow[0],  (UBYTE *)"Ãﬂ⁄À∞ƒ ﬂŸΩ  ﬁ:");
			CMN_HexToASC(&FunctionDisplayBufferLow[15], CalcPreHeatStrobeTime(), 3);

			/* è„â∫íiÇÃï\é¶ */
			DisplayStringHigh(0, FunctionDisplayBufferHigh);	/* "ª∞œŸÕØƒﬁµ›ƒﬁ :  FF  " */
			DisplayStringLow(0,  FunctionDisplayBufferLow);		/* "Ãﬂ⁄À∞ƒ≤›ºﬁ  ﬁ:  FF  " */

			/* ÉLÅ[ë“ÇøÅiÇPïbñàÇ…ï\é¶ÇçXêVÅj */
			OPR_GetKey(KEY_WAIT_ONE_SECOND);
			keytype = GetInputKeyType();
		} while (keytype != STOP);
	}
#endif
}

/*************************************************************************
	module		:[ÉCÉìÉfÉbÉNÉXÇÃëçécÉyÅ[ÉWêî/ë„åÇÃEMPTYÉtÉ@ÉCÉãêî/ÉÅÉÇÉäécó ï\é¶]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[óeó ÇµÇæÇ¢Ç≈ïœçXÇµÇ‹Ç∑]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/10/30]
	author		:[èºåG]
*************************************************************************/
#if defined(POPLAR_F) || defined(SATSUKI2) || defined(STOCKHM2)	/* Add by Y.Kano 2003/10/02 */
void	EmptyAndMemoryAreaDisplay(void)
{

 	UWORD	mem_area;
	UWORD	downmem;
	UWORD	index;
	UWORD	block_total;
	UWORD	block_emp;
	UBYTE	keytype;
	UBYTE	cnt;

	do {
		CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
		CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');

		downmem = 0;
		for (cnt = 0; cnt < SYS_MEMORY_RX_MAX; cnt++) {
			if ( SYB_MemoryRxPrint[cnt].Status == SYS_MEMORY_RX_EMPTY ) {
				downmem++;		/** Ç†ÇÈ */
			}
		}

		FunctionDisplayBufferHigh[0] = 'D';
		FunctionDisplayBufferHigh[1] = '.';
		FunctionDisplayBufferHigh[2] = 'E';
		FunctionDisplayBufferHigh[3] = 'M';
		FunctionDisplayBufferHigh[4] = 'P';
		FunctionDisplayBufferHigh[5] = ':';
		CMN_UnsignedIntToASC(&FunctionDisplayBufferHigh[6], downmem, 3, ' ');

		index = MEM_CountTotalEmptyPage ();

		FunctionDisplayBufferHigh[10] = 'I';
		FunctionDisplayBufferHigh[11] = '.';
		FunctionDisplayBufferHigh[12] = 'E';
		FunctionDisplayBufferHigh[13] = 'M';
		FunctionDisplayBufferHigh[14] = 'P';
		FunctionDisplayBufferHigh[15] = ':';
		CMN_UnsignedIntToASC(&FunctionDisplayBufferHigh[16], index, 4, ' ');

		CMN_StringCopy(FunctionDisplayBufferLow, D2W_MemoryAreaLong);	/* "             “”ÿ   %" */
		block_total = (UWORD)MEM_CountTotalStoreBlock();
		block_emp = (UWORD)MEM_CountTotalEmptyBlock();
		mem_area = (UWORD)MEM_CountEmptyBlockRate();
		FunctionDisplayBufferLow[4] = ':';
		CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[0], block_total, 4, ' ');
		CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[5], block_emp, 4, ' ');
		CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[16], mem_area, 3, ' ');

		DisplayStringHigh(0, FunctionDisplayBufferHigh);
		DisplayStringLow(0, FunctionDisplayBufferLow);

		/* ÉLÅ[ë“ÇøÅiÇPïbñàÇ…ï\é¶ÇçXêVÅj */
		OPR_GetKey(KEY_WAIT_ONE_SECOND);
		keytype = GetInputKeyType();
	} while (keytype != STOP);
}
#endif

#if (PRO_KEYPANEL == PANEL_ANZU_L)	/* ŒﬂÃﬂ◊ÇÃROMóeó çÌå∏ÇÃà◊ÅAèåè∫› ﬂ≤Ÿí«â¡ by K.Watanabe 1998/04/24 */
void	EmptyAndMemoryAreaDisplay(void)
{

 	UWORD	mem_area;
	UWORD	downmem;
	UWORD	index;
	UBYTE	keytype;
	UBYTE	cnt;

	do {
		CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
		CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');

		downmem = 0;
		for (cnt = 0; cnt < SYS_MEMORY_RX_MAX; cnt++) {
			if ( SYB_MemoryRxPrint[cnt].Status == SYS_MEMORY_RX_EMPTY ) {
				downmem++;		/** Ç†ÇÈ */
			}
		}

		FunctionDisplayBufferHigh[0] = 'D';
		FunctionDisplayBufferHigh[1] = '.';
		FunctionDisplayBufferHigh[2] = 'E';
		FunctionDisplayBufferHigh[3] = 'M';
		FunctionDisplayBufferHigh[4] = 'P';
		FunctionDisplayBufferHigh[5] = ':';
		CMN_UnsignedIntToASC(&FunctionDisplayBufferHigh[6], downmem, 3, ' ');

		index = MEM_CountTotalEmptyPage ();

		FunctionDisplayBufferHigh[10] = 'I';
		FunctionDisplayBufferHigh[11] = '.';
		FunctionDisplayBufferHigh[12] = 'E';
		FunctionDisplayBufferHigh[13] = 'M';
		FunctionDisplayBufferHigh[14] = 'P';
		FunctionDisplayBufferHigh[15] = ':';
		CMN_UnsignedIntToASC(&FunctionDisplayBufferHigh[16], index, 4, ' ');

		CMN_StringCopy(FunctionDisplayBufferLow, D2W_MemoryAreaLong);	/* "             “”ÿ   %" */
		mem_area = (UWORD)MEM_CountEmptyBlockRate();
		CMN_UnsignedIntToASC(&FunctionDisplayBufferLow[16], mem_area, 3, ' ');

		DisplayStringHigh(0, FunctionDisplayBufferHigh);
		DisplayStringLow(0, FunctionDisplayBufferLow);

		/* ÉLÅ[ë“ÇøÅiÇPïbñàÇ…ï\é¶ÇçXêVÅj */
		OPR_GetKey(KEY_WAIT_ONE_SECOND);
		keytype = GetInputKeyType();
	} while (keytype != STOP);
}
#endif	/* (PRO_KEYPANEL == PANEL_ANZU_L) */

/*************************************************************************
	module		:[ÉTÅ[ÉrÉXÉåÉ|Å[ÉgÅEÉRÅ[Éã]
	function	:[
		1.ÉTÅ[ÉrÉXÉåÉ|Å[ÉgÇÃàÛéöÇçsÇ§
	]
	return		:[Ç»Çµ]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1997/05/20]
	author		:[åKå¥]
*************************************************************************/
void ServiceReportPrintOperation(void)
{
	FinalListPrintOperation(LST_SERVICE_LIST);
}

/*************************************************************************
	module		:[ÉGÉâÅ[ÉäÉXÉgÅ@ÉvÉäÉìÉg]
	function	:[
		1.ÉèÅ[ÉfÉBÉìÉOÉ`ÉFÉbÉNópÇ…ÉäÉXÉgÇãNìÆÇµÇ‹Ç∑
	]
	return		:[Ç»Çµ]
	common		:[]
	condition	:[]
	comment		:[
		â´édólÇÃÉèÅ[ÉfÉBÉìÉOÉ`ÉFÉbÉNópÇ…Ç±ÇÃä÷êîÇçÏê¨ÇµÇ‹ÇµÇΩ
	]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1998/09/24]
	author		:[ìnï”àÍèÕ]
*************************************************************************/
#if (PRO_KEYPANEL == PANEL_POPLAR_B) && (PRO_OKI == ENABLE)
void PrintErrorList(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	is_loop_end;

	ClearDisplayHigh();
	ClearDisplayLow();

	is_loop_end = FALSE;
	while (is_loop_end != TRUE) {
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case STOP:
			is_loop_end = TRUE;
			break;
		case ONETOUCH:		/* ÉèÉìÉ^ÉbÉ`ÉLÅ[ */
			switch (key) {
			case ONETOUCH_01_KEY:	/* éËìÆëóêMëóêMèÿ */
				FinalListPrintOperation(LST_MANUAL_TXCONF_REPORT);
				break;
			case ONETOUCH_02_KEY:	/* É`ÉFÉbÉNÉÅÉbÉZÅ[ÉWÇaÅiåêMÉGÉâÅ[Åj */
				FinalListPrintOperation(LST_COMMERR_CHECKMSG);
				break;
			case ONETOUCH_03_KEY:	/* É`ÉFÉbÉNÉÅÉbÉZÅ[ÉWÇdÅiéËìÆëóêMÉGÉâÅ[Åj */
				FinalListPrintOperation(LST_MNLERR_CHECKMSG);
				break;
 #if (PRO_SECURITY_RX == ENABLE)
			case ONETOUCH_04_KEY:	/* ÉZÉLÉÖÉäÉeÉBéÛêMÉÅÉÇÉäÅ[ÉIÅ[ÉoÅ[ */
				FinalListPrintOperation(LST_SEC_RX_MEMOVER_CHKMSG);
				break;
 #endif
			case ONETOUCH_05_KEY:	/* êeìWéÛêMí ím */
				FinalListPrintOperation(LST_SECURERCV_NOTICE);
				break;
 #if (PRO_F_CODE == ENABLE)
			case ONETOUCH_06_KEY:	/* ÇeÉRÅ[ÉhéÛêMí ím */
				FinalListPrintOperation(LST_FCODE_BOXRCV_NOTICE);
				break;
 #endif
			default:
				NackBuzzer();
				break;
			}
			break;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}
#endif	/* (PRO_KEYPANEL == PANEL_POPLAR_B) && (PRO_OKI == ENABLE) */

/*************************************************************************
	module		:[ï€éÁópÉXÉCÉbÉ`ÉÇÅ[Éh]
	function	:[
		1.ï€éÁópÉXÉCÉbÉ`ÇÃÉZÉbÉgÅ^ÉNÉäÉAÇé¿çs
	]
	return		:[]
	common		:[SoftSwCtrl]
	condition	:[]
	comment		:[PRG**0 Å©Å@PRG*6Ç©ÇÁïœçXÅB1996/09/03Å@Eguchi]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1995/07/18]
	author		:[ç]å˚]
*************************************************************************/
void MaintenanceSwitchMode(void)
{
	UBYTE	mode;

	/* ÉfÅ[É^ÇÃÉZÉbÉg */
	OPR_Buf.SoftSwCtrl.ItemWording  = D2W_SF_MaintenanceSet;		/* [Set Maintenance ] */
	OPR_Buf.SoftSwCtrl.SetParameter = &SYB_MaintenanceSwitch[0];	/* œº∞› ﬂ◊“∞¿ */
	OPR_Buf.SoftSwCtrl.SwitchMax    = SYS_MEMORY_SWITCH_MAX;		/* ç≈ëÂÇPÇOÇOå¬ */
	OPR_Buf.SoftSwCtrl.SelectSwitch = 0;							/* èâä˙ílÇOÅiÇ`ÇOÅjSATSUKI2Ç≈ÇÕÅiÇOÇOÅj*/

	/* ï“èWÇ∑ÇÈÇ©ÉNÉäÉAÇ∑ÇÈÇ©ëIëÇ≥ÇπÇÈ */
	mode = SelectSetClearMode();

	if (mode == PARAMETER_SET) { /* ï“èWÇÃèÍçá */
		SetSoftSwitch();
#if (PRO_MULTI_LINE == ENABLE)
		MAN_ChangedSRAM_Parameter(OPT_CHANGED_MENTE_SWITCH);
#endif
	}
	else if (mode == PARAMETER_CLEAR) {/* ÉNÉäÉAÇÃèÍçá */
		ClearSoftSwitch(MAINTENANCE_SWITCH_MODE);
#if (PRO_MULTI_LINE == ENABLE)
		MAN_ChangedSRAM_Parameter(OPT_CHANGED_MENTE_SWITCH);
#endif
	}
	else { /* èIóπOPR_END */
		return;
	}
}

/*************************************************************************
	module		:[ÇPâÒê¸Ç©ÇÁëóêMÉeÉXÉgµÕﬂ⁄∞ºÆ›ÅiÇQâÒê¸ópÅj]
	function	:[
		1.ÇQâÒê¸ñ⁄ÇéÛêMêÍópÅAñîÇÕëóéÛêMÇ…Ç∑ÇÈ
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1998/01/29]
	author		:[èºåG]
*************************************************************************/
#if (PRO_KEYPANEL == PANEL_ANZU_L)
void ChangeRxSecondLine(void)
{
	if (OPT_CountModems() <= 1) {
		NackBuzzer();
		return;
	}

	if (CHK_UNI_Line1_TxRx() == (UBYTE)EXCLUSIVE_RX) {
		SYB_MachineUniqSwitch[UNIQ_SW_A7] &= ~((UBYTE)(LINE1_TX_ONLY | LINE1_RX_ONLY));
		SYB_MachineUniqSwitch[UNIQ_SW_A7] |= (UBYTE)(EXCLUSIVE_TRX << 2);
	}
	else {
		SYB_MachineUniqSwitch[UNIQ_SW_A7] &= ~((UBYTE)(LINE1_TX_ONLY | LINE1_RX_ONLY));
		SYB_MachineUniqSwitch[UNIQ_SW_A7] |= (UBYTE)(EXCLUSIVE_RX << 2);
	}
}
#endif

#if (PRO_MINOLTA_TEST_FUNC == ENABLE)	/* 1998/05/13 Y.Matsukuma */
/*************************************************************************
	module		:[É~ÉmÉãÉ^ópÉeÉXÉgÉvÉäÉìÉgÉIÉyÉåÅ[ÉVÉáÉì]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SHC]
	language	:[MS-C(Ver.6.0)]
	keyword		:[OPR]
	date		:[1998/05/12]
	author		:[èºåG]
*************************************************************************/
void MinoltaTestOperation(UBYTE key)
{
	UWORD	pattern;
	UWORD	pages;
	UWORD	time;
	UWORD	repeat;
	UDWORD	page_ck;

	pattern = 0;
	pages	= 0;
	time	= 0;
	repeat	= 0;
	page_ck = 0;

	if (CMN_CheckPrinting()	== TRUE || OPR_MinoltaPatternCheck != 0xFF) {	/* ÉeÉXÉgÉvÉäÉìÉgíÜ */
		OPR_ChildErrorFlag = PRINTER_IN_USE_ERROR;
		NackBuzzer();
		return;
	}

	CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
	FunctionDisplayBufferHigh[0]  = 'B';
	FunctionDisplayBufferHigh[1]  = 'o';
	FunctionDisplayBufferHigh[2]  = 'x';
	FunctionDisplayBufferHigh[3]  = ' ';
	FunctionDisplayBufferHigh[4]  = 'N';
	FunctionDisplayBufferHigh[5]  = 'o';
	FunctionDisplayBufferHigh[6]  = '.';
	DisplayStringHigh(0, FunctionDisplayBufferHigh);
	pattern = FixedLengthNumberInput(1, 1, SYS_MINOLTA_TEST_FUNC_MAX-1, (UBYTE)18, NULL);
	if (pattern == 0xFFFF) {
		return;
	}
	if ((SYS_MinoltaTestFuncData[pattern].Status != SYS_FUNC_TEST_DATA_STORE) 
		&& (SYS_MinoltaTestFuncData[pattern].Status != SYS_FUNC_TEST_DATA_PRINT)) {	/* √ΩƒÃﬂÿ›ƒä«óù√∞ÃﬁŸÇ…√ﬁ∞¿Ç™ìoò^Ç≥ÇÍÇƒÇ»Ç¢ */
		OPR_ChildErrorFlag = NO_STORED_DOCUMENT_ERROR;
		NackBuzzer();
		return;
	}

	DisplayStringHigh(0, D2W_InputPageCount);
	pages = FixedLengthNumberInput(1, 1, 9999, (UBYTE)16, NULL);
	if (pages == 0xFFFF) {
		return;
	}

	if (key == HOLD) {

 #if (PRO_KEYPANEL == PANEL_ANZU_L)
		CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
		FunctionDisplayBufferHigh[0]  = 'I';
		FunctionDisplayBufferHigh[1]  = 'n';
		FunctionDisplayBufferHigh[2]  = 't';
		FunctionDisplayBufferHigh[3]  = 'e';
		FunctionDisplayBufferHigh[4]  = 'r';
		FunctionDisplayBufferHigh[5]  = 'v';
		FunctionDisplayBufferHigh[6]  = 'a';
		FunctionDisplayBufferHigh[7]  = 'l';
		FunctionDisplayBufferHigh[9]  = 't';
		FunctionDisplayBufferHigh[10] = 'i';
		FunctionDisplayBufferHigh[11] = 'm';
		FunctionDisplayBufferHigh[12] = 'e';
		DisplayStringHigh(0, FunctionDisplayBufferHigh);
		time = FixedLengthNumberInput(0, 0, 9999, (UBYTE)16, NULL);
		if (time == 0xFFFF) {
			return;
		}

		CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
		FunctionDisplayBufferHigh[0]  = 'R';
		FunctionDisplayBufferHigh[1]  = 'e';
		FunctionDisplayBufferHigh[2]  = 'p';
		FunctionDisplayBufferHigh[3]  = 'e';
		FunctionDisplayBufferHigh[4]  = 'a';
		FunctionDisplayBufferHigh[5]  = 't';
		DisplayStringHigh(0, FunctionDisplayBufferHigh);
		repeat = FixedLengthNumberInput(1, 1, 9999, (UBYTE)16, NULL);
		if (repeat == 0xFFFF) {
			return;
		}

		if (repeat > 0) {
			page_ck = (UDWORD)((UDWORD)repeat * (UDWORD)pages);
			if (page_ck > 65535) {
				SYS_MinoltaFuncPagesData = 0;
				OPR_ChildErrorFlag = TOO_MANY_DIGITS_ERROR;
				NackBuzzer();
				return;
			}
			SYS_MinoltaFuncPagesData = pages;
			pages = (UWORD)page_ck;
		}

 #else	/* (PRO_KEYPANEL == PANEL_POPLAR_B) */

		if (pages == 9999) {
			SYS_MinoltaFuncPagesData = 65535;
			pages = 65535;	/* ñ≥å¿ê›íË */
		}
		else {
			CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
			FunctionDisplayBufferHigh[0]  = 'I';
			FunctionDisplayBufferHigh[1]  = 'n';
			FunctionDisplayBufferHigh[2]  = 't';
			FunctionDisplayBufferHigh[3]  = 'e';
			FunctionDisplayBufferHigh[4]  = 'r';
			FunctionDisplayBufferHigh[5]  = 'v';
			FunctionDisplayBufferHigh[6]  = 'a';
			FunctionDisplayBufferHigh[7]  = 'l';
			FunctionDisplayBufferHigh[9]  = 't';
			FunctionDisplayBufferHigh[10] = 'i';
			FunctionDisplayBufferHigh[11] = 'm';
			FunctionDisplayBufferHigh[12] = 'e';
			DisplayStringHigh(0, FunctionDisplayBufferHigh);
			time = FixedLengthNumberInput(0, 0, 9999, (UBYTE)16, NULL);
			if (time == 0xFFFF) {
				return;
			}
			if (time != 0) {
				time += 5;	/* å„âÒì]ÇÃéûä‘Ççló∂Ç∑ÇÈ */
			}

			CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
			FunctionDisplayBufferHigh[0]  = 'R';
			FunctionDisplayBufferHigh[1]  = 'e';
			FunctionDisplayBufferHigh[2]  = 'p';
			FunctionDisplayBufferHigh[3]  = 'e';
			FunctionDisplayBufferHigh[4]  = 'a';
			FunctionDisplayBufferHigh[5]  = 't';
			DisplayStringHigh(0, FunctionDisplayBufferHigh);
			repeat = FixedLengthNumberInput(1, 1, 9999, (UBYTE)16, NULL);
			if (repeat == 0xFFFF) {
				return;
			}

			if (repeat == 9999) {
				SYS_MinoltaFuncPagesData = pages;
				pages = 65535;	/* ñ≥å¿ê›íË */
			}
			else {
				page_ck = (UDWORD)((UDWORD)repeat * (UDWORD)pages);
				if (page_ck > 65535) {
					SYS_MinoltaFuncPagesData = 0;
					OPR_ChildErrorFlag = TOO_MANY_DIGITS_ERROR;
					NackBuzzer();
					return;
				}
				SYS_MinoltaFuncPagesData = pages;
				pages = (UWORD)page_ck;
			}
		}

 #endif

	}

	/* Ç±ÇÃÉAÉCÉeÉÄÇÕÅAï\é¶ópÇ…égópÇ∑ÇÈÇΩÇﬂÅAFLASHÅEHOLDÇ«ÇøÇÁÇ≈Ç‡ìØÇ∂ 1998/08/31 Y.Matsukuma */
	OPR_MinoltaPatternItem 	= OPR_MINOLTA_FLASH;
	OPR_MinoltaDisplayCheck = (UBYTE)pattern;
	if (OPR_MinoltaDisplayCheck < 0x0A) {
		OPR_MinoltaDisplayCheck = OPR_MinoltaDisplayCheck + 0x30;
	}
	CMN_SetMinoltaTestFuncData(pattern, pages, time);

}


/*************************************************************************
	module		:[É~ÉmÉãÉ^ÉeÉXÉgÉvÉäÉìÉgÉfÅ[É^ÉNÉäÉA]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SHC]
	language	:[MS-C(Ver.6.0)]
	keyword		:[OPR]
	date		:[1998/05/15]
	author		:[èºåG]
*************************************************************************/
void	ClearMinoltaTestPrintArea(void)
{
	UWORD	pattern;

	pattern = 0;

	if (CMN_CheckPrinting()	== TRUE || OPR_MinoltaPatternCheck != 0xFF) {	/* ÉvÉäÉìÉgíÜ */
		OPR_ChildErrorFlag = PRINTER_IN_USE_ERROR;
		NackBuzzer();
		return;
	}

	CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
	FunctionDisplayBufferHigh[0] = 'E';
	FunctionDisplayBufferHigh[1] = 'r';
	FunctionDisplayBufferHigh[2] = 'a';
	FunctionDisplayBufferHigh[3] = 's';
	FunctionDisplayBufferHigh[4] = 'e';
	FunctionDisplayBufferHigh[6] = 'B';
	FunctionDisplayBufferHigh[7] = 'o';
	FunctionDisplayBufferHigh[8] = 'x';
	FunctionDisplayBufferHigh[10] = 'N';
	FunctionDisplayBufferHigh[11] = 'o';
	FunctionDisplayBufferHigh[12] = '.';
	DisplayStringHigh(0, FunctionDisplayBufferHigh);
	pattern = FixedLengthNumberInput(1, 1, SYS_MINOLTA_TEST_FUNC_MAX-1, (UBYTE)18, NULL);
	if (pattern == 0xFFFF) {
		return;
	}

	/*-----------------------------------------*
	 *Å@ÉCÉìÉfÉbÉNÉXÅEÉGÉäÉAÇÃèâä˙âª           *
	 *-----------------------------------------*/
	MEM_ClearDoc(SYS_MEM_PC_RX_FILE, pattern, 0);

	/*-----------------------------------------*
	 *Å@ÇoÇbÉvÉäÉìÉgå¥çeä«óùÉeÅ[ÉuÉãèâä˙âª     *
	 *-----------------------------------------*/
	SYB_PcRxPrint.Status = SYS_PC_RX_EMPTY;
	SYB_PcRxPrint.ExecutiveNumber = 0;
	SYB_PcRxPrint.RemainMultiPrintCount = 0;
	SYB_PcRxPrint.StorePage = 0;
	SYB_PcRxPrint.PrintPage = 1;
	SYB_PcRxPrint.ErasePage = 1;
	SYB_PcRxPrint.PrintEndPage = 0;

	SYS_MinoltaTestFuncData[pattern].Status = SYS_FUNC_TEST_DATA_EMPTY;
	SYS_MinoltaTestFuncData[pattern].IntervalTimer = 0;
	SYS_MinoltaTestFuncData[0].Status = SYS_FUNC_TEST_DATA_OFF;	/* ÇOî‘ñ⁄ÇÕñ¢égóp */
	SYS_MinoltaFuncIntervalTimer = 0;

	ChildDisplayStringLow(D2W_ClearComplete);	/* " **  ∏ÿ± ∂›ÿÆ≥  **  " */
}


/*************************************************************************
	module		:[É~ÉmÉãÉ^ópâÊëúÉpÉ^Å[Éì]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[V53]
	language	:[MS-C(Ver.6.0)]
	keyword		:[OPR]
	date		:[1998/06/29]
	author		:[èºåG]
*************************************************************************/
void	MinoltaTestPatternPrint(UBYTE key)
{
	UWORD	ptn;
	UWORD	pages;

	ptn = 0;
	pages = 0;

	if (CMN_CheckPrinting()	== TRUE || OPR_MinoltaPatternCheck != 0xFF) {	/* ÉeÉXÉgÉvÉäÉìÉgíÜ */
		OPR_ChildErrorFlag = PRINTER_IN_USE_ERROR;
		NackBuzzer();
		return;
	}

#if (PRO_KEYPANEL == PANEL_ANZU_L)	/* 1998/10/06 Y.Matsukuma */
	switch (key) {
	case ONETOUCH_A_KEY:
		ptn = 1;
		pages = 1;
		break;
	case ONETOUCH_B_KEY:
		ptn = 1;
		pages = 2;
		break;
	case ONETOUCH_C_KEY:
		ptn = 1;
		pages = 3;
		break;
	case ONETOUCH_D_KEY:
		ptn = 2;
		pages = 1;
		break;
	case ONETOUCH_E_KEY:
		ptn = 2;
		pages = 2;
		break;
	case ONETOUCH_F_KEY:
		ptn = 4;
		pages = 1;
		break;
	case ONETOUCH_G_KEY:
		ptn = 5;
		pages = 1;
		break;
	case ONETOUCH_H_KEY:
		OPR_MinoltaPatternCheck = 1;
		ptn = 4;
		pages = 1;
		break;
	case ONETOUCH_I_KEY:
		OPR_MinoltaPatternCheck = 1;
		ptn = 2;
		pages = 1;
		break;
	case ONETOUCH_J_KEY:
		OPR_MinoltaPatternCheck = 4;
		ptn = 1;
		pages = 5;
		break;
	case ONETOUCH_K_KEY:
		ptn = 6;
		pages = 1;
		break;
	case ONETOUCH_L_KEY:
		ptn = 6;
		pages = 8;
		break;
	case ONETOUCH_M_KEY:
		ptn = 6;
		pages = 41;
		break;
	case ONETOUCH_N_KEY:
		ptn = 6;
		pages = 968;
		break;
	case ONETOUCH_O_KEY:
		if (CMN_CheckMinoltaTestDataStore(6) == 1) {
			SYS_MinoltaFuncPagesData = 1;
			OPR_MinoltaPatternItem = OPR_MINOLTA_ONETOUCH;
			OPR_MinoltaDisplayCheck = key;
			CMN_SetMinoltaTestFuncData(6, 468, 25);
		}
		else {
			OPR_ChildErrorFlag = NO_STORED_DOCUMENT_ERROR;
			NackBuzzer();
		}
		return;
	case ONETOUCH_P_KEY:
		OPR_MinoltaPatternCheck = 2;
		ptn = 2;
		pages = 1;
		break;
	case ONETOUCH_Q_KEY:
		OPR_MinoltaPatternCheck = 1;
		ptn = 2;
		pages = 2;
		break;
	case ONETOUCH_R_KEY:
		ptn = 1;
		pages = 5;
		break;
	default:
		NackBuzzer();
		return;
	}

#else	/* É|ÉvÉâ */

	switch (key) {
	case ONETOUCH_01_KEY:
		ptn = 1;
		pages = 1;
		break;
	case ONETOUCH_02_KEY:
		ptn = 1;
		pages = 2;
		break;
	case ONETOUCH_03_KEY:
		ptn = 1;
		pages = 3;
		break;
	case ONETOUCH_04_KEY:
		ptn = 2;
		pages = 1;
		break;
	case ONETOUCH_05_KEY:
		ptn = 2;
		pages = 2;
		break;
	case ONETOUCH_06_KEY:
		ptn = 4;
		pages = 1;
		break;
	case ONETOUCH_07_KEY:
		ptn = 5;
		pages = 1;
		break;
	case ONETOUCH_08_KEY:
		OPR_MinoltaPatternCheck = 1;
		ptn = 4;
		pages = 1;
		break;
	case ONETOUCH_09_KEY:
		OPR_MinoltaPatternCheck = 1;
		ptn = 2;
		pages = 1;
		break;
	case ONETOUCH_10_KEY:
		OPR_MinoltaPatternCheck = 4;
		ptn = 1;
		pages = 5;
		break;
	case ONETOUCH_11_KEY:
		ptn = 6;
		pages = 1;
		break;
	case ONETOUCH_12_KEY:
		ptn = 6;
		pages = 8;
		break;
	case ONETOUCH_13_KEY:
		ptn = 6;
		pages = 41;
		break;
	case ONETOUCH_14_KEY:
		ptn = 6;
		pages = 968;
		break;
	case ONETOUCH_15_KEY:
		if (CMN_CheckMinoltaTestDataStore(6) == 1) {
			SYS_MinoltaFuncPagesData = 1;
			OPR_MinoltaPatternItem = OPR_MINOLTA_ONETOUCH;
			OPR_MinoltaDisplayCheck = key;
			CMN_SetMinoltaTestFuncData(6, 468, 25);
		}
		else {
			OPR_ChildErrorFlag = NO_STORED_DOCUMENT_ERROR;
			NackBuzzer();
		}
		return;
	case ONETOUCH_16_KEY:
		OPR_MinoltaPatternCheck = 2;
		ptn = 2;
		pages = 1;
		break;
	case ONETOUCH_17_KEY:
		OPR_MinoltaPatternCheck = 1;
		ptn = 2;
		pages = 2;
		break;
	case ONETOUCH_18_KEY:
		ptn = 1;
		pages = 5;
		break;
	default:
		NackBuzzer();
		return;
	}
#endif
	if (CMN_CheckMinoltaTestDataStore(ptn) == 1) {
		if (OPR_MinoltaPatternItem != OPR_MINOLTA_PROGRAM) {
			OPR_MinoltaPatternItem = OPR_MINOLTA_ONETOUCH;
			OPR_MinoltaDisplayCheck = key;
		}
		CMN_SetMinoltaTestFuncData(ptn, pages, 0);
	}
	else {
		OPR_ChildErrorFlag = NO_STORED_DOCUMENT_ERROR;
		NackBuzzer();
	}

}


/*************************************************************************
	module		:[éüÇÃâÊëúÉpÉ^Å[Éì]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[V53]
	language	:[MS-C(Ver.6.0)]
	keyword		:[OPR]
	date		:[1998/07/07]
	author		:[èºåG]
*************************************************************************/
void	MinoltaTestPatternPrintCheck(void)
{
	if (OPR_MinoltaPatternCheck == 1) {
		CMN_SetMinoltaTestFuncData(5, 1, 0);
		OPR_MinoltaPatternCheck = 0xFF;
		OPR_MinoltaPagesCheck	= 0;	/* 1998/08/27 Y.Murata */
		OPR_MinoltaOnetouch		= 0;
	}
	else if (OPR_MinoltaPatternCheck == 2) {
		CMN_SetMinoltaTestFuncData(5, 1, 0);
		OPR_MinoltaPatternCheck = 3;
	}
	else if (OPR_MinoltaPatternCheck == 3) {
		CMN_SetMinoltaTestFuncData(1, 2, 0);
		OPR_MinoltaPatternCheck = 0xFF;
		OPR_MinoltaPagesCheck	= 0;	/* 1998/08/27 Y.Murata */
		OPR_MinoltaOnetouch		= 0;
	}
	else if (OPR_MinoltaPatternCheck == 4) {
		CMN_SetMinoltaTestFuncData(2, 2, 0);
		OPR_MinoltaPatternCheck = 5;
	}
	else if (OPR_MinoltaPatternCheck == 5) {
		CMN_SetMinoltaTestFuncData(4, 1, 0);
		OPR_MinoltaPatternCheck = 6;
	}
	else if (OPR_MinoltaPatternCheck == 6) {
		CMN_SetMinoltaTestFuncData(5, 1, 0);
		OPR_MinoltaPatternCheck = 7;
	}
	else if (OPR_MinoltaPatternCheck == 7) {
		CMN_SetMinoltaTestFuncData(7, 1, 0);
		OPR_MinoltaPatternCheck = 0xFF;
		OPR_MinoltaPagesCheck	= 0;	/* 1998/08/27 Y.Murata */
		OPR_MinoltaOnetouch		= 0;
	}
	else if (OPR_MinoltaPatternCheck == 8) {
		MinoltaTestPatternPrintPG();
	}
	else {	/* 1998/08/27 Y.Murata */
		OPR_MinoltaPatternCheck = 0xFF;
		OPR_MinoltaPagesCheck	= 0;
		OPR_MinoltaOnetouch		= 0;
	}
}


/*************************************************************************
	module		:[É~ÉmÉãÉ^ópâÊëúÉpÉ^Å[Éì(PG)]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[V53]
	language	:[MS-C(Ver.6.0)]
	keyword		:[OPR]
	date		:[1998/07/20]
	author		:[èºåG]
*************************************************************************/
void	MinoltaTestPatternPrintPG(void)
{
	UWORD ptn;
	UWORD pages;
	UWORD time;
	UBYTE i;
	UBYTE j;

	ptn = 0;
	pages = 0;
	time = 0;
	i = 0;
	j = 0;

	if (SYB_OnetouchDial[OPR_MinoltaOnetouch].Name[OPR_MinoltaPagesCheck] > 0x40) {
		ptn = (UWORD)(SYB_OnetouchDial[OPR_MinoltaOnetouch].Name[OPR_MinoltaPagesCheck] - 0x40);
		OPR_MinoltaPagesCheck++;
	}
	else {
		ptn = (UWORD)1;
	}

	for (; SYB_OnetouchDial[OPR_MinoltaOnetouch].Name[OPR_MinoltaPagesCheck] < 0x40; OPR_MinoltaPagesCheck++) {
		if (SYB_OnetouchDial[OPR_MinoltaOnetouch].Name[OPR_MinoltaPagesCheck] == NULL) {
			OPR_MinoltaPatternCheck = 0xFF;
			break;
		}
		i++;
	}
	j = OPR_MinoltaPagesCheck;
	if (i == 4) {
		pages += (UWORD)(SYB_OnetouchDial[OPR_MinoltaOnetouch].Name[--j] - 0x30) * (UWORD)1;
		pages += (UWORD)(SYB_OnetouchDial[OPR_MinoltaOnetouch].Name[--j] - 0x30) * (UWORD)10;
		pages += (UWORD)(SYB_OnetouchDial[OPR_MinoltaOnetouch].Name[--j] - 0x30) * (UWORD)100;
		pages += (UWORD)(SYB_OnetouchDial[OPR_MinoltaOnetouch].Name[--j] - 0x30) * (UWORD)1000;
	}
	else if (i == 3) {
		pages += (UWORD)(SYB_OnetouchDial[OPR_MinoltaOnetouch].Name[--j] - 0x30) * (UWORD)1;
		pages += (UWORD)(SYB_OnetouchDial[OPR_MinoltaOnetouch].Name[--j] - 0x30) * (UWORD)10;
		pages += (UWORD)(SYB_OnetouchDial[OPR_MinoltaOnetouch].Name[--j] - 0x30) * (UWORD)100;
	}
	else if (i == 2) {
		pages += (UWORD)(SYB_OnetouchDial[OPR_MinoltaOnetouch].Name[--j] - 0x30) * (UWORD)1;
		pages += (UWORD)(SYB_OnetouchDial[OPR_MinoltaOnetouch].Name[--j] - 0x30) * (UWORD)10;
	}
	else if (i == 1) {
		pages += (UWORD)(SYB_OnetouchDial[OPR_MinoltaOnetouch].Name[--j] - 0x30) * (UWORD)1;
	}
	else if (i == 0 || i > 4) {
		pages = (UWORD)1;
	}

	CMN_SetMinoltaTestFuncData(ptn, pages, time);

}


/*************************************************************************
	module		:[É~ÉmÉãÉ^ÉpÉ^Å[ÉìÉvÉäÉìÉgï\é¶]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[V53]
	language	:[MS-C(Ver.6.0)]
	keyword		:[OPR]
	date		:[1998/08/31]
	author		:[èºåG]
*************************************************************************/
void	MinoltaTestPatternDisplay(void)
{
	CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');

	switch (OPR_MinoltaPatternItem) {
	case OPR_MINOLTA_FLASH:
	case OPR_MINOLTA_HOLD:
		/* ÉtÉâÉbÉVÉÖorÉzÅ[ÉãÉh */
		FunctionDisplayBufferHigh[0] = 'B';
		FunctionDisplayBufferHigh[1] = 'o';
		FunctionDisplayBufferHigh[2] = 'x';
		if(OPR_MinoltaDisplayCheck < 0x30) {
			CMN_UnsignedIntToASC(&FunctionDisplayBufferHigh[3], (UWORD)OPR_MinoltaDisplayCheck, 2, '0');
		}
		else {
			FunctionDisplayBufferHigh[3] = OPR_MinoltaDisplayCheck;
		}
		break;
	case OPR_MINOLTA_ONETOUCH:
		/* ÉèÉìÉ^ÉbÉ`ÉvÉäÉìÉg */
		FunctionDisplayBufferHigh[0] = OPR_MinoltaDisplayCheck;
		break;
	case OPR_MINOLTA_PROGRAM:
		/* ÉvÉçÉOÉâÉÄÉèÉìÉ^ÉbÉ`ÉvÉäÉìÉg */
		FunctionDisplayBufferHigh[0] = OPR_PROGRAM_MARK;
		CMN_UnsignedIntToASC(&FunctionDisplayBufferHigh[1], OPR_MinoltaDisplayCheck, 2, '0');
		break;
	case 0xFF:	/* ÉXÉgÉbÉv */
		/*CMN_StringCopy(FunctionDisplayBufferHigh, D2W_SF_Stop);*/
		break;
	default:
		break;
	}

	ClearDisplayHigh();
	DisplayStringHigh(0, FunctionDisplayBufferHigh);

}
#endif



#if (PRO_DIALUP_INTERNET_FAX == ENABLE) /* 1998/05/22 Eguchi */
/*************************************************************************
	module		:[ÉCÉìÉ^Å[ÉlÉbÉgFAXÉÇÉjÉ^Å[àÛéöãNìÆ]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[INF]
	date		:[1998/05/22]
	author		:[M.Eguchi]
*************************************************************************/
void	IfaxMonitorPrint(void)
{
	FinalListPrintOperation(LST_INF_MONITOR);
}
#endif



#if (PRO_MODEM == R288F) /* By H.Fujimura 1999/01/06 */
/*************************************************************************
	module		:[âÒê¸ÉeÉXÉgÅiÇqÇQÇWÇWÇeópÅj]
	function	:[
		1.ÉäÉåÅ[ÉeÉXÉg
		2.ÉgÅ[ÉiÉãÉeÉXÉg
		3.ÇcÇsÇlÇeÉeÉXÉg
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1999/01/06]
	author		:[ì°ë∫ètïv]
*************************************************************************/
void R288F_LineFunctionMode(void)
{
	UBYTE	keytype;
	UBYTE	func_number;

	func_number = 0;
	tskno_MDM_FactoryTask == 0xffff;
	SYS_FactoryFuncReq = 0;

	while (1) {
#if defined (KEISATSU)		/* åxé@FAX Modify by SMuratec K.W.Q 2005/10/25 */
		DisplayStringHigh(0, D2W_SF_KEIDEN_RelayTest + (OPR_WORDING_LEN * func_number));
#else
		DisplayStringHigh(0, D2W_SF_PhoneTest + (OPR_WORDING_LEN * func_number));
#endif		/* End of (defined (KEISATSU)) */
		ClearDisplayLow();
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keytype = GetInputKeyType();

		switch (keytype) {
		case FUNCTION:
			func_number++;
#if defined (KEISATSU)		/* åxé@FAX Modify by SMuratec K.W.Q 2005/10/25 */
			if (func_number > 5) {			/* åxé@FAX DVT_ID 15 Modify by SMuratec K.W.Q 2005/11/05 */
				func_number = 0;
			}
#else
			if (func_number > 2) {
				func_number = 0;
			}
#endif		/* End of (defined (KEISATSU)) */
			break;
		case ENTER:
			/* ÉfÅ[É^èâä˙âª */
			SYS_FactoryModem.Item = OPT_MDM_FACTORY_TEST_START;
			SYS_FactoryModem.Kind = 0xff;
			SYS_FactoryModem.BaudRate = 0xff;
			SYS_FactoryModem.DataRate = 0xff;
			SYS_FactoryModem.PIX_Pattern	= 0xff;
			if (tskno_NCU_Task != 0xffff) {
				del_tsk(&tskno_NCU_Task);/* Add J.M 1994/05/12 */
			}
			cre_tsk(&tskno_MDM_FactoryTask, TSK_MDM_FACTORYFUNCTIONTASK, 0);
			LineFuncTxMsg.Item = FROM_OPERATION;
			LineFuncTxMsg.Message = FIP_TEST_CMD;
#if (0)
** 			/* ÉÅÅ[ÉãÉ{ÉbÉNÉXïœçX By O.Kimoto 1998/05/22 */
**			snd_msg(mbxno.MDM_Task,&LineFuncTxMsg);
#else
			snd_msg(mbxno.CPY_Task,&LineFuncTxMsg);
#endif
#if defined (KEISATSU)		/* åxé@FAX DVT_ID 15 Added by SMuratec K.W.Q 2005/11/05 */
			if (func_number == 0) {
				SYS_FactoryModem.Item = SYS_OPT_MDM_KEIDEN_RELAY_TEST;
				SF_R288F_RelayTest();	/* åxìdÅ@ÉäÉåÅ[ÉeÉXÉg */
			}
			if (func_number == 1) {
				SYS_FactoryModem.Item = SYS_OPT_MDM_KEIDEN_TONAL_TEST;
				SF_R288F_TonalTest();	/* åxìdÅ@ÉgÅ[ÉiÉãÉeÉXÉg */
			}
			if (func_number == 2) {
				SYS_FactoryModem.Item = SYS_OPT_MDM_KEIDEN_DTMF_TEST;
				SF_R288F_DTMF_Test();	/* åxìdÅ@ÇcÇsÇlÇeÉeÉXÉg */
			}
			if (func_number == 3) {
				SYS_FactoryModem.Item = SYS_OPT_MDM_RELAY_TEST;
				SF_R288F_RelayTest();	/* ÉäÉåÅ[ÉeÉXÉg */
			}
			if (func_number == 4) {
				SYS_FactoryModem.Item = SYS_OPT_MDM_TONAL_TEST;
				SF_R288F_TonalTest();	/* ÉgÅ[ÉiÉãÉeÉXÉg */
			}
			if (func_number == 5) {
				SYS_FactoryModem.Item = SYS_OPT_MDM_DTMF_TEST;
				SF_R288F_DTMF_Test();	/* ÇcÇsÇlÇeÉeÉXÉg */
			}
#else
			if (func_number == 0) {
				SYS_FactoryModem.Item = SYS_OPT_MDM_RELAY_TEST;
				SF_R288F_RelayTest();	/* ÉäÉåÅ[ÉeÉXÉg */
			}
			if (func_number == 1) {
				SYS_FactoryModem.Item = SYS_OPT_MDM_TONAL_TEST;
				SF_R288F_TonalTest();	/* ÉgÅ[ÉiÉãÉeÉXÉg */
			}
			if (func_number == 2) {
				SYS_FactoryModem.Item = SYS_OPT_MDM_DTMF_TEST;
				SF_R288F_DTMF_Test();	/* ÇcÇsÇlÇeÉeÉXÉg */
			}
#endif		/* End of (defined (KEISATSU)) */
			SYS_FactoryModem.Item = OPT_MDM_FACTORY_TEST_END;
			MDM_TxStopSwFlag = 0;	/* 1997/03/17 Y.Murata */
			if (tskno_MDM_FactoryTask != 0xFFFF) {
				del_tsk(&tskno_MDM_FactoryTask);
			}
			cre_tsk(&tskno_NCU_Task, TSK_NCU_TASK, 0 );
			return;
		case STOP:
		case KEY_TIME_UP:
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ÉäÉåÅ[ÉeÉXÉgÅiÇqÇQÇWÇWÇeópÅj]
	function	:[
		1.éwíËÇ≥ÇÍÇΩÉäÉåÅ[ÇÃÇnÇmÅ^ÇnÇeÇeÇçsÇ§ÅB
		2.ÉLÅ[ì¸óÕÇ∆ÉäÉåÅ[ÇÃëŒâûä÷åWÇÕà»â∫ÇÃÇÊÇ§Ç…Ç»ÇÈÅB
		,	ONETOUCH_01_KEY -> CML
		,	ONETOUCH_02_KEY -> H
		,	ONETOUCH_03_KEY -> L
		,	ONETOUCH_04_KEY -> S
		,	ONETOUCH_05_KEY -> C24
		,	ONETOUCH_06_KEY -> TONE
		,	ONETOUCH_07_KEY -> BZ
		,	ONETOUCH_08_KEY -> RI
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1999/01/06]
	author		:[ì°ë∫ètïv]
*************************************************************************/
void SF_R288F_RelayTest(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	kind;
	UBYTE	FunctionFlag;	/* ÉäÉåÅ[Ç™ÉZÉbÉgÇ≥ÇÍÇƒÇ¢ÇÈÇ©î€Ç©ÇÉrÉbÉgÇ≈é¶Ç∑ */

	kind = 0xFF;
	FunctionFlag = 0;

	/* ï\é¶ */
#if defined (KEISATSU)		/* åxé@FAX DVT_ID15 Modify by SMuratec K.W.Q 2005/11/05 */
	if (SYS_FactoryModem.Item == SYS_OPT_MDM_RELAY_TEST) {
		DisplayStringHigh(0, D2W_SF_R288F_RelayTest1);
	}
	else if (SYS_FactoryModem.Item == SYS_OPT_MDM_KEIDEN_RELAY_TEST) {
		DisplayStringHigh(0, D2W_SF_R288F_Keiden_RelayTest1);
	}
#else
	DisplayStringHigh(0, D2W_SF_R288F_RelayTest1);	/* [ CML  H     L   S   ] */
#endif		/* End of (defined (KEISATSU)) */
	DisplayStringLow(0, D2W_SF_R288F_RelayTest2);	/* [ C24  TONE  BZ  RI  ] */

	while (1) {
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case ONETOUCH:
			/* éwíËÇ≥ÇÍÇΩÉäÉåÅ[ÇÃÇnÇmÅ^ÇnÇeÇeÇçsÇ§ */
			switch (key) {
			case ONETOUCH_01_KEY:	/* CML */
				if (FunctionFlag & 0x01) {
					kind = MDM_RELAY_CML_OFF;
					DisplayChar(0, ' ');
					FunctionFlag &= ~0x01;
				}
				else {
					kind = MDM_RELAY_CML_ON;
					DisplayChar(0, '*');
					FunctionFlag |= 0x01;
				}
				break;
			case ONETOUCH_02_KEY:	/*  H  */
				if (FunctionFlag & 0x02) {
					kind = MDM_RELAY_H_OFF;
					DisplayChar(5, ' ');
					FunctionFlag &= ~0x02;
				}
				else {
					kind = MDM_RELAY_H_ON;
					DisplayChar(5, '*');
					FunctionFlag |= 0x02;
				}
				break;
			case ONETOUCH_03_KEY:	/*  L  */
#if defined (JPN)
				if (FunctionFlag & 0x04) {
					kind = MDM_RELAY_L_OFF;
					DisplayChar(11, ' ');
					FunctionFlag &= ~0x04;
				}
				else {
					kind = MDM_RELAY_L_ON;
					DisplayChar(11, '*');
					FunctionFlag |= 0x04;
				}
				break;
#else	/* ÇsÇvÇmÇ…ÇÕÇcÇoÉäÉåÅ[ by H.Hirao 1999/02/02 */
				if (FunctionFlag & 0x04) {
					kind = MDM_RELAY_DP_OFF;
					DisplayChar(11, ' ');
					FunctionFlag &= ~0x04;
				}
				else {
					kind = MDM_RELAY_DP_ON;
					DisplayChar(11, '*');
					FunctionFlag |= 0x04;
				}
				break;
#endif
			case ONETOUCH_04_KEY:	/*  S  */
				if (FunctionFlag & 0x08) {
					kind = MDM_RELAY_S_OFF;
					DisplayChar(15, ' ');
					FunctionFlag &= ~0x08;
				}
				else {
					kind = MDM_RELAY_S_ON;
					DisplayChar(15, '*');
					FunctionFlag |= 0x08;
				}
				break;
			case ONETOUCH_05_KEY:	/* C24 */
				if (FunctionFlag & 0x10) {
					kind = MDM_RELAY_CONT24_OFF;
					DisplayChar(20, ' ');
					FunctionFlag &= ~0x10;
				}
				else {
					kind = MDM_RELAY_CONT24_ON;
					DisplayChar(20, '*');
					FunctionFlag |= 0x10;
				}
				break;
			case ONETOUCH_06_KEY:	/* TONE */
#if defined (JPN)	/* by H.Hirao 1999/02/02 */
				if (FunctionFlag & 0x20) {
					kind = MDM_RELAY_TONE_OFF;
					DisplayChar(25, ' ');
					FunctionFlag &= ~0x20;
				}
				else {
					kind = MDM_RELAY_TONE_ON;
					DisplayChar(25, '*');
					FunctionFlag |= 0x20;
				}
				break;
#endif
			case ONETOUCH_07_KEY:	/* BZ */
				if (FunctionFlag & 0x40) {
					kind = MDM_RELAY_BZ_OFF;
					DisplayChar(31, ' ');
					FunctionFlag &= ~0x40;
				}
				else {
					kind = MDM_RELAY_BZ_ON;
					DisplayChar(31, '*');
					FunctionFlag |= 0x40;
				}
				break;
			case ONETOUCH_08_KEY:	/* RI */
#if defined (JPN)	/* by H.Hirao 1999/02/02 */
				if (FunctionFlag & 0x80) {
					kind = MDM_RELAY_RI_OFF;
					DisplayChar(35, ' ');
					FunctionFlag &= ~0x80;
				}
				else {
					kind = MDM_RELAY_RI_ON;
					DisplayChar(35, '*');
					FunctionFlag |= 0x80;
				}
				break;
#endif
			default:
				NackBuzzer();
				break;
			}
			SYS_FactoryModem.Kind = kind;
			LineFuncTxMsg.Item = FROM_OPERATION;
			LineFuncTxMsg.Message = FIP_TEST_CMD;
#if (0)
** 			/* ÉÅÅ[ÉãÉ{ÉbÉNÉXïœçX By O.Kimoto 1998/05/22 */
** 			snd_msg(mbxno.MDM_Task,&LineFuncTxMsg);
#else
			snd_msg(mbxno.CPY_Task,&LineFuncTxMsg);
#endif
			do {
				rcv_msg(mbxno.OPR_Task,&LineFuncRxMsg);
			} while(LineFuncRxMsg->Message != MSG_FIP_RS232C_TEST_END);
			break;
		case STOP:
			SYS_FactoryModem.Item = OPT_MDM_FACTORY_TEST_END;
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}

#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2)	/* SATSUKI2édól by Y.Kano 2003/10/20 */
/*************************************************************************
	module		:[ÉgÅ[ÉiÉãÉeÉXÉgÅiÇqÇQÇWÇWÇeópÅj]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2003/10/20]
	author		:[â¡î[ã`ïF]
*************************************************************************/
void SF_R288F_TonalTest(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	is_check_enable;
	UBYTE	tx_signal;
	UWORD	freq;

	tx_signal = 0;
	freq = (UWORD)OPT_MDM_TONAL_STOP;

	SYB_ModeSw = SYS_NORMAL;

	while (1) {
		Display_R288F_TonalTest(tx_signal, (UBYTE)freq );
		is_check_enable = TRUE;
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case NUMBER:
			if (key == TEN_0_KEY) {
				freq = (UWORD)(OPT_MDM_TONAL_FSK_W1_B1);
				tx_signal = 2;
				break;
			}
			freq = (UWORD)(OPT_MDM_TONAL_NONE + (UWORD)(key - TEN_1_KEY));
			tx_signal = 1;
			break;
		case AST:
			freq = (UWORD)OPT_MDM_TONAL_FSK_WHITE;
			tx_signal = 2;
			break;
		case SHARP:
			freq = (UWORD)OPT_MDM_TONAL_FSK_BLACK;
			tx_signal = 2;
			break;
		case ONETOUCH:
		case PROGRAM:
			/** îZìxëIëÇégÇ¡ÇƒÅAÇRñ ï™ÇÃéÌóﬁÇÇ†ÇÁÇÌÇ∑ */
			switch (SYB_ModeSw) {	
			case SYS_NORMAL:			/** ïÅí  */
				if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_20_KEY)) {
					freq = (UWORD)(OPT_MDM_TONAL_V27_1200_2400 + (UWORD)(key - ONETOUCH_01_KEY));
					if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_08_KEY)) {
						freq = R288F_PixPattern(freq);	/* ÉXÉgÉbÉvâüÇ≥ÇÍÇΩÇ∆Ç´Ç±ÇÃèàóùÇ©ÇÁÇ ÇØÇÈ */
						tx_signal = 0;
					}
					else {
						tx_signal = 3;
					}
				}
				else {
					is_check_enable = FALSE;
					NackBuzzer();
				}
				break;
			case SYS_FINE:				/** çÇâÊéø */
				if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_20_KEY)) {
					freq = (UWORD)(OPT_MDM_TONAL_V27_1200_2400 + (UWORD)(key - ONETOUCH_01_KEY + 20));
					tx_signal = 3;
				}
				else {
					is_check_enable = FALSE;
					NackBuzzer();
				}
				break;
			case SYS_SFINE:				/** í¥çÇâÊéø */
				if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_20_KEY)) {
					freq = (UWORD)(OPT_MDM_TONAL_V27_1200_2400 + (UWORD)(key - ONETOUCH_01_KEY + 40));
					tx_signal = 3;
				}
				else {
					is_check_enable = FALSE;
					NackBuzzer();
				}
				break;
			case SYS_GRAY16:	/** ÇPÇUäKí≤					*/
			case SYS_GRAY16_SEP:/** ÇPÇUäKí≤ÅFëúàÊï™ó£			*/
			case SYS_GRAY64:	/** ÇUÇSäKí≤					*/
			case SYS_GRAY64_SEP:/** ÇUÇSäKí≤ÅFëúàÊï™ó£			*/
				if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_04_KEY)) {
					freq = (UWORD)(OPT_MDM_TONAL_V27_1200_2400 + (UWORD)(key - ONETOUCH_01_KEY + 60));
						tx_signal = 3;
					if (key == ONETOUCH_04_KEY) {
						tx_signal = 4;	/* Voice */
					}
				}
				else {
					is_check_enable = FALSE;
					NackBuzzer();
				}
				break;
			default:
				is_check_enable = FALSE;
				NackBuzzer();
				break;
			}
			break;
		case STOP:
			if (freq != (UWORD)OPT_MDM_TONAL_STOP) { /* ÉgÅ[ÉìëóèoíÜ */
				freq = (UWORD)OPT_MDM_TONAL_STOP;
				tx_signal = 0;
				break;
			}
			else {
				SYS_FactoryModem.Item = OPT_MDM_FACTORY_TEST_END;
				return;
			}
			break;
		case CLEAR:	/* âÊéøÉLÅ[ */
			if (key == CLEAR_KEY) {
				key = MODE_KEY;
				SingleKeyOperation(key);
			}
			else {
				NackBuzzer();
			}
			break;
		case NO_EFFECT:
			is_check_enable = FALSE;
			break;
		default:
			is_check_enable = FALSE;
			NackBuzzer();
			break;
		}

		if (is_check_enable) {	/* ê≥ìñÇ»ÉLÅ[Ç™âüÇ≥ÇÍÇΩéûÇÃÇ›â∫ÇÃèàóùóLå¯ */
			SYS_FactoryModem.Kind = freq;
			LineFuncTxMsg.Item = FROM_OPERATION;
			LineFuncTxMsg.Message = FIP_TEST_CMD;
			snd_msg(mbxno.CPY_Task,&LineFuncTxMsg);
			do {
				rcv_msg(mbxno.OPR_Task,&LineFuncRxMsg);
			} while(LineFuncRxMsg->Message != MSG_FIP_RS232C_TEST_END);
		}
	}
}

#else	/* SATSUKI2à»äO */
/*************************************************************************
	module		:[ÉgÅ[ÉiÉãÉeÉXÉgÅiÇqÇQÇWÇWÇeópÅj]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1999/01/06]
	author		:[ì°ë∫ètïv]
*************************************************************************/
void SF_R288F_TonalTest(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	is_check_enable;
	UBYTE	tx_signal;
	UWORD	freq;

	tx_signal = 0;
	freq = (UWORD)OPT_MDM_TONAL_STOP;

	while (1) {
		Display_R288F_TonalTest(tx_signal, (UBYTE)freq );
		is_check_enable = TRUE;
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case NUMBER:
			if (key == TEN_0_KEY) {
#if defined(POPLAR_F) || (defined(HINOKI2) && defined(JPNNTT))
				/* FSK_W1_B1 1999/12/27 Y.Murata *//* HINOKI2í«â¡ by J.Kishida 2002/10/03 */
				freq = (UWORD)(OPT_MDM_TONAL_FSK_W1_B1);
				tx_signal = 2;
#else
				is_check_enable = FALSE;
				NackBuzzer();
#endif
				break;
			}
			freq = (UWORD)(OPT_MDM_TONAL_NONE + (UWORD)(key - TEN_1_KEY));
			tx_signal = 1;
			break;
		case AST:
			freq = (UWORD)OPT_MDM_TONAL_FSK_WHITE;
			tx_signal = 2;
			break;
		case SHARP:
			freq = (UWORD)OPT_MDM_TONAL_FSK_BLACK;
			tx_signal = 2;
			break;
		case ONETOUCH:
		case PROGRAM:
#if defined(HINOKI3)	/* ONETOUCH_30_KEYÇ™ÉvÉåÉtÉBÉbÉNÉXÉLÅ[Ç…ïœÇÌÇ¡ÇΩÇÃÇ≈ by K.Watanabe 2004/10/26 */
		case MERCURY:
			if (key == MERCURY_KEY) {
				key = ONETOUCH_30_KEY;
			}
#endif
#if defined(POPLAR_F)
			if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_63_KEY)) {
				freq = (UWORD)(OPT_MDM_TONAL_V27_1200_2400 + (UWORD)(key - ONETOUCH_01_KEY));
				if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_08_KEY)) {
					freq = R288F_PixPattern(freq);	/* ÉXÉgÉbÉvâüÇ≥ÇÍÇΩÇ∆Ç´Ç±ÇÃèàóùÇ©ÇÁÇ ÇØÇÈ */
					tx_signal = 0;
				}
				else {
					tx_signal = 3;
				}
			}
			else {
				if (key == ONETOUCH_64_KEY) {
					freq = (UWORD)(OPT_MDM_TONAL_V27_1200_2400 + (UWORD)(key - ONETOUCH_01_KEY));
					tx_signal = 4;	/* Voice */
				}
				else if (key == ONETOUCH_65_KEY) {
					freq = (UWORD)OPT_MDM_TONAL_VOICE2;
					tx_signal = 5;	/* Melody */
				}
				else {
					is_check_enable = FALSE;
					NackBuzzer();
				}
			}
#else
			/** îZìxëIëÇégÇ¡ÇƒÅAÇRñ ï™ÇÃéÌóﬁÇÇ†ÇÁÇÌÇ∑ */
			switch (SYB_DensitySw) {	
			case SYS_LIGHT_DENSITY:			/** îñÇ≠ */
#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Added by SMuratec L.Z.W 2003/09/16 */
				if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_20_KEY)) {
#else
				if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_30_KEY)) {
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
					freq = (UWORD)(OPT_MDM_TONAL_V27_1200_2400 + (UWORD)(key - ONETOUCH_01_KEY));
					if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_08_KEY)) {
						freq = R288F_PixPattern(freq);	/* ÉXÉgÉbÉvâüÇ≥ÇÍÇΩÇ∆Ç´Ç±ÇÃèàóùÇ©ÇÁÇ ÇØÇÈ */
						tx_signal = 0;
					}
					else {
						tx_signal = 3;
					}
				}
				else {
					is_check_enable = FALSE;
					NackBuzzer();
				}
				break;
			case SYS_NORMAL_DENSITY:		/** ïÅí  */
#if (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) /* Added by SMuratec L.Z.W 2003/09/16 */
				if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_20_KEY)) {
#else
				if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_30_KEY)) {
#endif /* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */
					freq = (UWORD)(OPT_MDM_TONAL_V27_1200_2400 + (UWORD)(key - ONETOUCH_01_KEY + 30));
					tx_signal = 3;
				}
				else {
					is_check_enable = FALSE;
					NackBuzzer();
				}
				break;
			case SYS_DARK_DENSITY:			/** îZÇ≠ */
 #if (PRO_VOICE_ANSWER == ENABLE) && (PRO_MODEM == R288F)	/* HINOKI2 NTTédólÇ…ëŒâû(POPLAR_FÇÕÇ±Ç¡ÇøÇ…óàÇ»Ç¢) by J.Kishida 2002/10/09 */
				if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_05_KEY)) {
 #else
				if ((ONETOUCH_01_KEY <= key) && (key <= ONETOUCH_04_KEY)) {
 #endif
					freq = (UWORD)(OPT_MDM_TONAL_V27_1200_2400 + (UWORD)(key - ONETOUCH_01_KEY + 60));
					if (key == ONETOUCH_04_KEY) {

#if (PRO_KEYPANEL == PANEL_HINOKI) || (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) 
/* ÇgÇhÇmÇnÇjÇhÇÃÇsÇvÇmédólÇÕÅAï€óØÉÅÉçÉfÉBÅ[Ç™óLÇËÇ‹ÇπÇÒÅB
** ÇÊÇ¡ÇƒÅAâÒê¸ÉeÉXÉgÇ©ÇÁÇ‡ï€óØÉÅÉçÉfÉBÅ[ëóèoÇÕçÌèúÇµÇ‹Ç∑ÅB
** by O.Kimoto 1999/02/02
*/
 #if defined(JPN)
						tx_signal = 4;	/* Voice */
 #else
						is_check_enable = FALSE;
						NackBuzzer();
 #endif
#else
						tx_signal = 4;	/* Voice */
#endif

					}
 #if (PRO_VOICE_ANSWER == ENABLE) && (PRO_MODEM == R288F)	/* HINOKI2 NTTédólÇ…ëŒâû(POPLAR_FÇÕÇ±Ç¡ÇøÇ…óàÇ»Ç¢) by J.Kishida 2002/10/09 */
					/* OPT_MDM_TONAL_VOICE2ÇÃÉeÉXÉgÇì¸ÇÍÇ‹Ç∑ */
					else if (key == ONETOUCH_05_KEY) {
						tx_signal = 5;	/* Melody */
					}
 #endif
					else {
						tx_signal = 3;
					}
 #if (PRO_VOICE_ANSWER == ENABLE) && (PRO_MODEM == R288F)	/* HINOKI2 NTTédólÇ…ëŒâû(POPLAR_FÇÕÇ±Ç¡ÇøÇ…óàÇ»Ç¢) by J.Kishida 2002/10/09 */
				}	/* âEäáå Ç∆ç∂äáå ÇëŒâûÇ≥ÇπÇÈÇΩÇﬂ */
 #else
				}
 #endif
				else {
					is_check_enable = FALSE;
					NackBuzzer();
				}
				break;
			default:
				is_check_enable = FALSE;
				NackBuzzer();
				break;
			}
#endif	/* defined(POPLAR_F) */
			break;
		case STOP:
			if (freq != (UWORD)OPT_MDM_TONAL_STOP) { /* ÉgÅ[ÉìëóèoíÜ */
				freq = (UWORD)OPT_MDM_TONAL_STOP;
				tx_signal = 0;
				break;
			}
			else {
				SYS_FactoryModem.Item = OPT_MDM_FACTORY_TEST_END;
				return;
			}
			break;
#if defined(POPLAR_F)
		case SINGLE:	/* îZìxÉLÅ[ */
			if (key == CONTRAST_KEY) {
				SingleKeyOperation(key);
			}
			else {
				NackBuzzer();
			}
			break;
#endif
		case NO_EFFECT:
			is_check_enable = FALSE;
			break;
		default:
			is_check_enable = FALSE;
			NackBuzzer();
			break;
		}

		if (is_check_enable) {	/* ê≥ìñÇ»ÉLÅ[Ç™âüÇ≥ÇÍÇΩéûÇÃÇ›â∫ÇÃèàóùóLå¯ */
			SYS_FactoryModem.Kind = freq;
			LineFuncTxMsg.Item = FROM_OPERATION;
			LineFuncTxMsg.Message = FIP_TEST_CMD;
#if (0)
//			/* ÉÅÅ[ÉãÉ{ÉbÉNÉXïœçX By O.Kimoto 1998/05/22 */
//			snd_msg(mbxno.MDM_Task,&LineFuncTxMsg);
#else
			snd_msg(mbxno.CPY_Task,&LineFuncTxMsg);
#endif
			do {
				rcv_msg(mbxno.OPR_Task,&LineFuncRxMsg);
			} while(LineFuncRxMsg->Message != MSG_FIP_RS232C_TEST_END);
		}
	}
}
#endif	/* End of (PRO_KEYPANEL == PANEL_SATSUKI2) || (PRO_KEYPANEL == PANEL_STOCKHM2) */

/*************************************************************************
	module		:[âÒê¸ÉeÉXÉgÅEÇoÇhÇwëóèoÉpÉ^Å[ÉìëIëÅiÇqÇQÇWÇWÇeópÅj]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1999/01/06]
	author		:[ì°ë∫ètïv]
*************************************************************************/
UWORD R288F_PixPattern(UWORD Freq)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	is_check_enable;

	/* ï\é¶  */
	CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
	FunctionDisplayBufferLow[0] = 'W';
	FunctionDisplayBufferLow[1] = ':';
	FunctionDisplayBufferLow[2] = 'B';
	FunctionDisplayBufferLow[3] = '?';
	DisplayStringLow(0, FunctionDisplayBufferLow);

	while (1) {
		Display_R288F_TonalTest( 3, (UBYTE)Freq );
		is_check_enable = TRUE;

		/* ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		if (TEN_1_KEY <= key && key <= TEN_5_KEY) {
			SYS_FactoryModem.PIX_Pattern = (UWORD)(OPT_MDM_PIX_W1_B0 + (UWORD)(key - TEN_1_KEY));
			SYS_FactoryModem.Kind = Freq;
		}
		else if (key == STOP_KEY) {
			if (SYS_FactoryModem.Kind != OPT_MDM_TONAL_STOP) {
				SYS_FactoryModem.Kind = OPT_MDM_TONAL_STOP;
			}
			/*
			 * ÉXÉgÉbÉvÇQâÒâüÇ∑Ç∆Ç±ÇÃèàóùÇ©ÇÁÇ ÇØÇÈ
			*/
			else {
				ClearDisplayLow();
				return(OPT_MDM_TONAL_STOP);
			}
		}
		else {
			is_check_enable = FALSE;
			NackBuzzer();
		}

		if (is_check_enable) {	/* ê≥ìñÇ»ÉLÅ[Ç™âüÇ≥ÇÍÇΩéûÇÃÇ›â∫ÇÃèàóùóLå¯ */
			LineFuncTxMsg.Item = FROM_OPERATION;
			LineFuncTxMsg.Message = FIP_TEST_CMD;
#if (0)
//			/* ÉÅÅ[ÉãÉ{ÉbÉNÉXïœçX By O.Kimoto 1998/05/22 */
//			snd_msg(mbxno.MDM_Task,&LineFuncTxMsg);
#else
			snd_msg(mbxno.CPY_Task,&LineFuncTxMsg);
#endif
			do {
				rcv_msg(mbxno.OPR_Task,&LineFuncRxMsg);
			} while(LineFuncRxMsg->Message != MSG_FIP_RS232C_TEST_END);
		}
	}
}

/*************************************************************************
	module		:[ÉgÅ[ÉiÉãêMçÜï\é¶ÅiÇqÇQÇWÇWÇeópÅj]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1999/01/06]
	author		:[ì°ë∫ètïv]
*************************************************************************/
void Display_R288F_TonalTest(UBYTE tx_signal, UBYTE freq )
{
	UWORD	data;
/* FSK_W1_B1 1999/12/27 Y.Murata *//* HINOKI2í«â¡ by J.Kishida 2002/10/03 */
#if defined(POPLAR_F) || (defined(HINOKI2) && defined(JPNNTT))
	UBYTE	disp_buf[7];
#endif

	data = 0;

/* FSK_W1_B1 1999/12/27 Y.Murata *//* HINOKI2í«â¡ by J.Kishida 2002/10/03 */
#if defined(POPLAR_F) || (defined(HINOKI2) && defined(JPNNTT))
	CMN_MemorySet(disp_buf, 7, NULL);
#endif

	/* è„íiï\é¶ */
	switch (tx_signal) {

	/*-------------*/
	/* ñ≥êMçÜèÛë‘Å@*/
	/*-------------*/
	case 0:	/* ñ≥êMçÜ */
		ClearDisplayHigh(); /* ãÛîí */
		break;

	/*--------------------*/
	/* ÉgÅ[ÉiÉãêMçÜëóèoíÜ */
	/*--------------------*/
	case 1:	/* ÉgÅ[Éì */
		CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
		switch (freq) {
		case OPT_MDM_TONAL_462HZ:
			data = 462;
			break;
		case OPT_MDM_TONAL_1080HZ:
#if defined (KEISATSU) /* åxé@FAX 05/11/18 êŒã¥ê≥òa */
			data = 1100;
#else
			data = 1080;
#endif
			break;
		case OPT_MDM_TONAL_1300HZ:
			data = 1300;
			break;
		case OPT_MDM_TONAL_1650HZ:
			data = 1650;
			break;
		case OPT_MDM_TONAL_1700HZ:
			data = 1700;
			break;
		case OPT_MDM_TONAL_1800HZ:
			data = 1800;
			break;
		case OPT_MDM_TONAL_1850HZ:
			data = 1850;
			break;
		case OPT_MDM_TONAL_2100HZ:
			data = 2100;
			break;
		}
		CMN_UnsignedIntToASC(FunctionDisplayBufferHigh, data, 4, ' ');
		FunctionDisplayBufferHigh[4] = 'H';
		FunctionDisplayBufferHigh[5] = 'z';
		DisplayStringHigh(0, FunctionDisplayBufferHigh);
		break;

	/*----------------------*/
	/* ÇeÇrÇjêMçÜëóèoíÜ		*/
	/*----------------------*/
	case 2:	/* FSK	  */
		ClearDisplayHigh();
		DisplayStringHigh(0 , D2W_SF_FSK);
		if (freq == OPT_MDM_TONAL_FSK_WHITE) {
			DisplayStringHigh(4 , D2W_SF_White);
		}
		if (freq == OPT_MDM_TONAL_FSK_BLACK) {
			DisplayStringHigh(4 , D2W_SF_Black);
		}
/* FSK_W1_B1 1999/12/27 Y.Murata *//* HINOKI2í«â¡ by J.Kishida 2002/10/03 */
#if defined(POPLAR_F) || (defined(HINOKI2) && defined(JPNNTT))
		if (freq == OPT_MDM_TONAL_FSK_W1_B1) {
			disp_buf[0] = 'W';
			disp_buf[1] = '1';
			disp_buf[2] = ':';
			disp_buf[3] = 'B';
			disp_buf[4] = '1';
			disp_buf[5] = NULL;
			DisplayStringHigh(4 , disp_buf);
		}
#endif
		break;

	/*---------------------*/
	/* âÊêMçÜëóèoíÜ		   */
	/*---------------------*/
	case 3:	/* PIX	  */
		CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
		switch (freq) {
		case OPT_MDM_TONAL_V27_1200_2400:
			data = 1200;
			break;
		case OPT_MDM_TONAL_V27_1600_4800:
			data = 1600;
			break;
		case OPT_MDM_TONAL_V34_2400_12000:
		case OPT_MDM_TONAL_V17_2400_12000:
		case OPT_MDM_TONAL_V34_2400_14400:
		case OPT_MDM_TONAL_V17_2400_14400:
		case OPT_MDM_TONAL_V34_2400_16800:
		case OPT_MDM_TONAL_V34_2400_19200:
		case OPT_MDM_TONAL_V34_2400_21600:
		case OPT_MDM_TONAL_V34_2400_2400:
		case OPT_MDM_TONAL_V34_2400_4800:
		case OPT_MDM_TONAL_V34_2400_7200:
		case OPT_MDM_TONAL_V17_2400_7200:
		case OPT_MDM_TONAL_V29_2400_7200:
		case OPT_MDM_TONAL_V34_2400_9600:
		case OPT_MDM_TONAL_V29_2400_9600:
		case OPT_MDM_TONAL_V17_2400_9600:
			data = 2400;
			break;
		case OPT_MDM_TONAL_V34_2800_12000:
		case OPT_MDM_TONAL_V34_2800_14400:
		case OPT_MDM_TONAL_V34_2800_16800:
		case OPT_MDM_TONAL_V34_2800_19200:
		case OPT_MDM_TONAL_V34_2800_21600:
		case OPT_MDM_TONAL_V34_2800_24000:
		case OPT_MDM_TONAL_V34_2800_26400:
		case OPT_MDM_TONAL_V34_2800_4800:
		case OPT_MDM_TONAL_V34_2800_7200:
		case OPT_MDM_TONAL_V34_2800_9600:
			data = 2800;
			break;
		case OPT_MDM_TONAL_V34_3000_12000:
		case OPT_MDM_TONAL_V34_3000_14400:
		case OPT_MDM_TONAL_V34_3000_16800:
		case OPT_MDM_TONAL_V34_3000_19200:
		case OPT_MDM_TONAL_V34_3000_21600:
		case OPT_MDM_TONAL_V34_3000_24000:
		case OPT_MDM_TONAL_V34_3000_26400:
		case OPT_MDM_TONAL_V34_3000_28800:
		case OPT_MDM_TONAL_V34_3000_4800:
		case OPT_MDM_TONAL_V34_3000_7200:
		case OPT_MDM_TONAL_V34_3000_9600:
			data = 3000;
			break;
		case OPT_MDM_TONAL_V34_3200_12000:
		case OPT_MDM_TONAL_V34_3200_14400:
		case OPT_MDM_TONAL_V34_3200_16800:
		case OPT_MDM_TONAL_V34_3200_19200:
		case OPT_MDM_TONAL_V34_3200_21600:
		case OPT_MDM_TONAL_V34_3200_24000:
		case OPT_MDM_TONAL_V34_3200_26400:
		case OPT_MDM_TONAL_V34_3200_28800:
		case OPT_MDM_TONAL_V34_3200_31200:
		case OPT_MDM_TONAL_V34_3200_4800:
		case OPT_MDM_TONAL_V34_3200_7200:
		case OPT_MDM_TONAL_V34_3200_9600:
			data = 3200;
			break;
		case OPT_MDM_TONAL_V34_3429_12000:
		case OPT_MDM_TONAL_V34_3429_14400:
		case OPT_MDM_TONAL_V34_3429_16800:
		case OPT_MDM_TONAL_V34_3429_19200:
		case OPT_MDM_TONAL_V34_3429_21600:
		case OPT_MDM_TONAL_V34_3429_24000:
		case OPT_MDM_TONAL_V34_3429_26400:
		case OPT_MDM_TONAL_V34_3429_28800:
		case OPT_MDM_TONAL_V34_3429_31200:
		case OPT_MDM_TONAL_V34_3429_33600:
		case OPT_MDM_TONAL_V34_3429_4800:
		case OPT_MDM_TONAL_V34_3429_7200:
		case OPT_MDM_TONAL_V34_3429_9600:
			data = 3429;
			break;
		}
		CMN_UnsignedIntToASC(&FunctionDisplayBufferHigh[0], data, 4, ' ');
		FunctionDisplayBufferHigh[4] = '/';

		switch (freq) {
		case OPT_MDM_TONAL_V27_1200_2400:
		case OPT_MDM_TONAL_V34_2400_2400:
			data = 2400;
			break;
		case OPT_MDM_TONAL_V27_1600_4800:
		case OPT_MDM_TONAL_V34_2400_4800:
		case OPT_MDM_TONAL_V34_2800_4800:
		case OPT_MDM_TONAL_V34_3000_4800:
		case OPT_MDM_TONAL_V34_3200_4800:
		case OPT_MDM_TONAL_V34_3429_4800:
			data = 4800;
			break;
		case OPT_MDM_TONAL_V29_2400_7200:
		case OPT_MDM_TONAL_V17_2400_7200:
		case OPT_MDM_TONAL_V34_2400_7200:
		case OPT_MDM_TONAL_V34_2800_7200:
		case OPT_MDM_TONAL_V34_3000_7200:
		case OPT_MDM_TONAL_V34_3200_7200:
		case OPT_MDM_TONAL_V34_3429_7200:
			data = 7200;
			break;
		case OPT_MDM_TONAL_V29_2400_9600:
		case OPT_MDM_TONAL_V17_2400_9600:
		case OPT_MDM_TONAL_V34_2400_9600:
		case OPT_MDM_TONAL_V34_2800_9600:
		case OPT_MDM_TONAL_V34_3000_9600:
		case OPT_MDM_TONAL_V34_3200_9600:
		case OPT_MDM_TONAL_V34_3429_9600:
			data = 9600;
			break;
		case OPT_MDM_TONAL_V17_2400_12000:
		case OPT_MDM_TONAL_V34_2400_12000:
		case OPT_MDM_TONAL_V34_2800_12000:
		case OPT_MDM_TONAL_V34_3000_12000:
		case OPT_MDM_TONAL_V34_3200_12000:
		case OPT_MDM_TONAL_V34_3429_12000:
			data = 12000;
			break;
		case OPT_MDM_TONAL_V17_2400_14400:
		case OPT_MDM_TONAL_V34_2400_14400:
		case OPT_MDM_TONAL_V34_2800_14400:
		case OPT_MDM_TONAL_V34_3000_14400:
		case OPT_MDM_TONAL_V34_3200_14400:
		case OPT_MDM_TONAL_V34_3429_14400:
			data = 14400;
			break;
		case OPT_MDM_TONAL_V34_2400_16800:
		case OPT_MDM_TONAL_V34_2800_16800:
		case OPT_MDM_TONAL_V34_3000_16800:
		case OPT_MDM_TONAL_V34_3200_16800:
		case OPT_MDM_TONAL_V34_3429_16800:
			data = 16800;
			break;
		case OPT_MDM_TONAL_V34_2400_19200:
		case OPT_MDM_TONAL_V34_2800_19200:
		case OPT_MDM_TONAL_V34_3000_19200:
		case OPT_MDM_TONAL_V34_3200_19200:
		case OPT_MDM_TONAL_V34_3429_19200:
			data = 19200;
			break;
		case OPT_MDM_TONAL_V34_2400_21600:
		case OPT_MDM_TONAL_V34_2800_21600:
		case OPT_MDM_TONAL_V34_3000_21600:
		case OPT_MDM_TONAL_V34_3200_21600:
		case OPT_MDM_TONAL_V34_3429_21600:
			data = 21600;
			break;
		case OPT_MDM_TONAL_V34_2800_24000:
		case OPT_MDM_TONAL_V34_3000_24000:
		case OPT_MDM_TONAL_V34_3200_24000:
		case OPT_MDM_TONAL_V34_3429_24000:
			data = 24000;
			break;
		case OPT_MDM_TONAL_V34_2800_26400:
		case OPT_MDM_TONAL_V34_3000_26400:
		case OPT_MDM_TONAL_V34_3200_26400:
		case OPT_MDM_TONAL_V34_3429_26400:
			data = 26400;
			break;
        case OPT_MDM_TONAL_V34_3000_28800:
		case OPT_MDM_TONAL_V34_3200_28800:
		case OPT_MDM_TONAL_V34_3429_28800:
			data = 28800;
			break;
		case OPT_MDM_TONAL_V34_3200_31200:
		case OPT_MDM_TONAL_V34_3429_31200:
			data = 31200;
			break;
		case OPT_MDM_TONAL_V34_3429_33600:
			data = 33600;
			break;
		}
		CMN_UnsignedIntToASC(&FunctionDisplayBufferHigh[5], data, 5, ' ');

		if (freq >= OPT_MDM_TONAL_V27_1200_2400 && freq <= OPT_MDM_TONAL_V17_2400_14400) {
			FunctionDisplayBufferHigh[11] = 'W';
			FunctionDisplayBufferHigh[12] = ':';
			FunctionDisplayBufferHigh[13] = 'B';
			FunctionDisplayBufferHigh[15] = '=';
			FunctionDisplayBufferHigh[17] = '1';
			FunctionDisplayBufferHigh[18] = ':';
			FunctionDisplayBufferHigh[19] = '1';

			switch (SYS_FactoryModem.PIX_Pattern) {
			case OPT_MDM_PIX_W1_B0: /* [1:0] */
				FunctionDisplayBufferHigh[19] = '0';
				break;
			case OPT_MDM_PIX_W1_B1: /* [1:1] */
				break;
			case OPT_MDM_PIX_W1_B4: /* [1:4] */
				FunctionDisplayBufferHigh[19] = '4';
				break;
			case OPT_MDM_PIX_W0_B1: /* [0:1] */
				FunctionDisplayBufferHigh[17] = '0';
				break;
			case OPT_MDM_PIX_W4_B1: /* [4:1] */
				FunctionDisplayBufferHigh[17] = '4';
				break;
			}
		}
		DisplayStringHigh(0, FunctionDisplayBufferHigh);
		break;
	/*-------*/
	/* Voice */
	/*-------*/
	case 4:
		CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
		FunctionDisplayBufferHigh[0] = 'V';
		FunctionDisplayBufferHigh[1] = 'o';
		FunctionDisplayBufferHigh[2] = 'i';
		FunctionDisplayBufferHigh[3] = 'c';
		FunctionDisplayBufferHigh[4] = 'e';
		DisplayStringHigh(0, FunctionDisplayBufferHigh);
		break;
	/*--------*/
	/* Melody */
	/*--------*/
	case 5:
		CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
		FunctionDisplayBufferHigh[0] = 'M';
		FunctionDisplayBufferHigh[1] = 'e';
		FunctionDisplayBufferHigh[2] = 'l';
		FunctionDisplayBufferHigh[3] = 'o';
		FunctionDisplayBufferHigh[4] = 'd';
		FunctionDisplayBufferHigh[5] = 'y';
		DisplayStringHigh(0, FunctionDisplayBufferHigh);
		break;
	}

	/* â∫íiÉNÉäÉA */
/*	ClearDisplayLow();*/

}

/*************************************************************************
	module		:[ÇcÇsÇlÇeÉeÉXÉgÅiÇqÇQÇWÇWÇeópÅj]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1999/01/06]
	author		:[ì°ë∫ètïv]
*************************************************************************/
void SF_R288F_DTMF_Test(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	is_check_enable;
	UWORD	dtmf;

	dtmf = (UWORD)OPT_MDM_DTMF_STOP;

	while (1) {
		is_check_enable = TRUE;

		/* ï\é¶ */
		Display_R288F_TxDTMF((UBYTE) dtmf);

		/* ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case NUMBER:
		case AST:
		case SHARP:
		case ONETOUCH:
			if (TEN_0_KEY <= key && key <= TEN_9_KEY) {
				dtmf = (UWORD)(key - 0x30);
			}
			else if (key == TEN_SHARP_KEY) {
				dtmf = (UWORD)OPT_MDM_DTMF_SHARP;
			}
			else if (key == TEN_AST_KEY) {
				dtmf = (UWORD)OPT_MDM_DTMF_AST;
			}
			else if (ONETOUCH_01_KEY <= key && key <= ONETOUCH_08_KEY) {
				dtmf = (UWORD)(OPT_MDM_DTMF_ROW1 + (UWORD)(key - ONETOUCH_01_KEY));
			}
			else {
				is_check_enable = FALSE;
				NackBuzzer();
			}
			break;
		case STOP:
			if (dtmf != (UWORD)OPT_MDM_DTMF_STOP) {	/* ÇcÇsÇlÇeëóèoíÜ */
				dtmf = (UWORD)OPT_MDM_DTMF_STOP;
				break;
			}
			else {
				SYS_FactoryModem.Item = OPT_MDM_FACTORY_TEST_END;
				return;
			}
			break;
		case NO_EFFECT:
			is_check_enable = FALSE;
			break;
		default:
			is_check_enable = FALSE;
			NackBuzzer();
			break;
		}

		if (is_check_enable) {	/* ê≥ìñÇ»ÉLÅ[Ç™âüÇ≥ÇÍÇΩéûÇÃÇ›â∫ÇÃèàóùóLå¯ */
			SYS_FactoryModem.Kind = dtmf;
			LineFuncTxMsg.Item = FROM_OPERATION;
			LineFuncTxMsg.Message = FIP_TEST_CMD;
#if (0)
** 			/* ÉÅÅ[ÉãÉ{ÉbÉNÉXïœçX By O.Kimoto 1998/05/22 */
** 			snd_msg(mbxno.MDM_Task,&LineFuncTxMsg);
#else
			snd_msg(mbxno.CPY_Task,&LineFuncTxMsg);
#endif
			do {
				rcv_msg(mbxno.OPR_Task,&LineFuncRxMsg);
			} while(LineFuncRxMsg->Message != MSG_FIP_RS232C_TEST_END);
		}
	}
}

/*************************************************************************
	module		:[ÇcÇsÇlÇeÉeÉXÉgíÜÇÃï\é¶ÅiÇqÇQÇWÇWÇeópÅj]
	function	:[
		1.
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1999/01/06]
	author		:[ì°ë∫ètïv]
*************************************************************************/
void Display_R288F_TxDTMF(UBYTE dtmf)
{
	ClearDisplayHigh();
	ClearDisplayLow();

	if (dtmf == OPT_MDM_DTMF_STOP) {
		DisplayStringHigh(0 , D2W_SF_DTMF);
	}
	if (OPT_MDM_DTMF_0 <= dtmf && dtmf <= OPT_MDM_DTMF_9) {
		DisplayStringHigh(0 , D2W_SF_DTMF);
		DisplayChar(5 , dtmf | 0x30);
	}
	if (dtmf == OPT_MDM_DTMF_SHARP) {
		DisplayStringHigh(0 , D2W_SF_DTMF);
		DisplayChar(5 , '#');
	}
	if (dtmf == OPT_MDM_DTMF_AST) {
		DisplayStringHigh(0 , D2W_SF_DTMF);
		DisplayChar(5 , '*');
	}

	if (OPT_MDM_DTMF_ROW1 <= dtmf && dtmf <= OPT_MDM_DTMF_ROW4) {
		DisplayStringHigh(0, D2W_SF_DTMFRow);
		DisplayChar(5, (UBYTE)((dtmf - OPT_MDM_DTMF_ROW1) + 1) | 0x30);
	}
	if (OPT_MDM_DTMF_COL1 <= dtmf && dtmf <= OPT_MDM_DTMF_COL4) {
		DisplayStringHigh(0, D2W_SF_DTMFColum);
		DisplayChar(5, (UBYTE)((dtmf - OPT_MDM_DTMF_COL1) + 1) | 0x30);
	}
}
#endif	/* (PRO_MODEM == R288F) */

#if (PRO_NUMBER_DISPLAY == ENABLE) /* By H.Fujimura 1999/01/06 */
/*************************************************************************
	module		:[≈› ﬁ∞√ﬁ®ΩÃﬂ⁄≤ÇÃCAR ﬂ¿∞›åüèo ﬂ◊“∞¿ÇÃê›íËÅAâ{óó]
	function	:[
		1.ã@î\+ÅñÅñ+ÇQÇX(SATSUKI2Ç≈ÇÕ ã@î\+ÅñÅñ+ÇPÇXÇ≈Ç∑)
	]
	return		:[]
	common		:[SoftSwCtrl]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[1999/01/06]
	author		:[ì°ë∫ètïv]
*************************************************************************/
void OPR_NumberDisplayCarPatternMode(void)
{
	UBYTE	mode;

	/* ÉfÅ[É^ÇÃÉZÉbÉg */
	OPR_Buf.SoftSwCtrl.ItemWording  = D2W_ND_Parameter;				/* [≈› ﬁ∞√ﬁ®ΩÃﬂ⁄≤  ﬂ◊“∞¿] */
	OPR_Buf.SoftSwCtrl.SetParameter = &SYB_ND_CarPattern[0];		/* ≈› ﬁ∞√ﬁ®ΩÃﬂ⁄≤  ﬂ◊“∞¿ */
	OPR_Buf.SoftSwCtrl.SwitchMax    = SYS_ND_CAR_PATTERN_MAX;		/* ç≈ëÂÇRÇOå¬ */
	OPR_Buf.SoftSwCtrl.SelectSwitch = 0;							/* èâä˙ílÇOÅiÇ`ÇOÅjSATSUKI2Ç≈ÇÕÅiÇOÇOÅj*/

	/* ï“èWÇ∑ÇÈÇ©ÉNÉäÉAÇ∑ÇÈÇ©ëIëÇ≥ÇπÇÈ */
	mode = SelectSetClearMode();

	if (mode == PARAMETER_SET) {		/* ï“èWÇÃèÍçá */
		SetSoftSwitch();
	}
	else if (mode == PARAMETER_CLEAR) {	/* ÉNÉäÉAÇÃèÍçá */
		ClearSoftSwitch(UNIQ_SWITCH_MODE);
	}
	else {								/* èIóπOPR_END */
		return;
	}
}
#endif
#if defined (HINOKI2) || defined(HINOKI3) || defined (SATSUKI2) || defined(STOCKHM2)	/* for debug 2002/01/24 T.Takagi */
 #if (PRO_DIALIN == ENABLE)		/* èåèí«â¡ 2002/07/18 T.Takagi */
/*************************************************************************
	module		:[É_ÉCÉÑÉãÉCÉìDTMFåüèoÉåÉxÉãÉeÉXÉg]
	function	:[
		1.
	]
	return		:[Ç»Çµ]
	common		:[]
	condition	:[]
	comment		:[PARISÇ…Ç†Ç¡ÇΩÇÃÇHINOKI2ópÇ…ÉJÉXÉ^É}ÉCÉY]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2002/01/24]
	author		:[T.Takagi]
*************************************************************************/
void TestDialinDetectDTMF(void)
{
	UWORD key;
	UWORD keytype;
	UBYTE dtmf_value;
	UBYTE string[2];
	UBYTE x,y;
	UBYTE pre_det;
	UBYTE check_bit;
	UBYTE comp_bit;
	UBYTE debug;
	UBYTE bk_dtmf_value;
	UBYTE reg_value;

	debug = 0;
	reg_value = 0;
	
	ClearDisplayHigh();
	ClearDisplayLow();

	MDM_ConfigDTMF_ReceiverMode();
	DialIn1stAnswerRealyControl();

	x = y = 0;
	pre_det = 0;
	check_bit = (IO_BIT_EDET | IO_BIT_DTDET | IO_BIT_OTS | IO_BIT_DTMFD);
	comp_bit = (IO_BIT_EDET | IO_BIT_DTDET | IO_BIT_OTS);
	dtmf_value = bk_dtmf_value = 0x0F;
	while (1) {
		if (!pre_det) {
			if (((reg_value = inp(MDM_REG_1B_PORT)) & comp_bit) == comp_bit) {
				pre_det = 1;
			}
		}
		if ((((reg_value = inp(MDM_REG_1B_PORT)) & check_bit) == IO_BIT_DTMFD) && pre_det) {
			dtmf_value = MDM_GetIO(POS_DTMFW);
			if (dtmf_value == bk_dtmf_value) {
				if (debug) {
					outp(0,0);
				}
			}
			bk_dtmf_value = dtmf_value;
			wai_tsk(1);
			MDM_SetIO(POS_DTMFD, 0);
			pre_det = 0;
			if ((x == 0) && (y == 0)) {
				ClearDisplayHigh();
				ClearDisplayLow();
			}
			if ((dtmf_value >= 0) && (dtmf_value <= 9)) {
				CMN_UnsignedIntToASC_NULL(string, (UWORD)dtmf_value, 1, 0);
			}
			else {
				if (dtmf_value == 0x0A) {
					string[0] = '*';
					string[1] = 0x00;
				}
				else {
					string[0] = '#';
					string[1] = 0x00;
				}
			}
			if (x < 20) {
				DisplayStringHigh(x, string);
				x++;
			}
			else {
				y = x-20;
				DisplayStringLow(y, string);
				x++;
			}
			if (x > 39) {
				x = 0;
				y = 0;
			}
		}
		else {
			OPR_GetKey(1);
			key = GetInputKeyCode();
			keytype = GetInputKeyType();
			switch (keytype) {
			case STOP:
				S_RelayOff();
  #if defined(HINOKI3)
  #else
				DspRamAccessWriteMethod3(0x0B3C, BackupReceiveLevel, 0x0000); /* 2000/12/12 by K.Okada */
  #endif
				InitializeRelay();
				return;
			case KEY_TIME_UP:
				break;
			default:
				NackBuzzer();
				break;
			}
		}
	}
}
 #endif
#endif

#if (PRO_ENERGY_SAVE == ENABLE)
/**********************************************************************************************************************
 * Module: PC24V ÉäÉåÅ[éıñΩÉeÉXÉg
 * Author: çÇñÿ íqéj
 * Create: 2002/12/03
 * Function: 
 * Argument: 
 * Return: 
 * Global: 
 * Condition: 
 * Note: 
 *********************************************************************************************************************/
void	PC24V_TestMode(void)
{
	UWORD key;
	UWORD keytype;
	UBYTE now_on;
	UDWORD count;
	now_on = 0;
	count = 0;

	SYS_MachineStatus[SYS_RESOURCE_STATUS] |= SYS_SCANNER_BUSY;

	ClearDisplayHigh();
	ClearDisplayLow();

	CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
	FunctionDisplayBufferHigh[0] = 'P';
	FunctionDisplayBufferHigh[1] = 'C';
	FunctionDisplayBufferHigh[2] = ' ';
	FunctionDisplayBufferHigh[3] = 'R';
	FunctionDisplayBufferHigh[4] = 'e';
	FunctionDisplayBufferHigh[5] = 'l';
	FunctionDisplayBufferHigh[6] = 'a';
	FunctionDisplayBufferHigh[7] = 'y';
	FunctionDisplayBufferHigh[8] = ' ';
	FunctionDisplayBufferHigh[9] = 'T';
	FunctionDisplayBufferHigh[10] = 'e';
	FunctionDisplayBufferHigh[11] = 's';
	FunctionDisplayBufferHigh[12] = 't';
	DisplayStringHigh(0, FunctionDisplayBufferHigh);

	while (1) {
		OPR_GetKey(300);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		if (keytype == STOP || count >= 999999) {
			break;
		}

		if (now_on == 0) {
			PC_24V_On();
			now_on = 1;
			count++;
			CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
			CMN_UnsignedLongToASC(FunctionDisplayBufferLow, count, 6, '0');
			DisplayStringLow(0, FunctionDisplayBufferLow);
		}
		else {
			PC_24V_Off();
			now_on = 0;
			count++;
			CMN_MemorySetNULL(FunctionDisplayBufferLow, OPR_DISPLAY_MAX, ' ');
			CMN_UnsignedLongToASC(FunctionDisplayBufferLow, count, 6, '0');
			DisplayStringLow(0, FunctionDisplayBufferLow);
		}
	}

	while (1) {
		OPR_GetKey(KEY_WAIT_FOREVER);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();
		switch (keytype) {
		case STOP:			/* ÉXÉgÉbÉvÉLÅ[ */
			SYS_MachineStatus[SYS_RESOURCE_STATUS] &= ~SYS_SCANNER_BUSY;
			return;
		default:
			NackBuzzer();
			break;
		}
	}
}
#endif

#if (PRO_REMOTE_DIAL_TRANSFER == ENABLE)	/* REMOTE_RX_FUNC ê›íËï\é¶ */
/*************************************************************************
	module		:[ÉäÉÇÅ[ÉgÉ_ÉCÉÑÉãì]ëóê›íËï\é¶ REMOTE_RX_FUNC]
	function	:[
		3ïbä‘ï\é¶ÇµÇƒñﬂÇÈ
	]
	return		:[]
	date		:[2003/02/05]
	author		:[]
*************************************************************************/
void	DisplayRemoteTransferSetting(void)
{
	UWORD	loop = TRUE;
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	dial_str[4];
	UBYTE	length;

	length = CMN_GetRemoteTransferDialString(dial_str);

	ClearDisplayHigh();
	ClearDisplayLow();

	if (length > 0) {
		DisplayStringHigh(0, (CONST UBYTE *)dial_str);
		DisplayStringHigh(length + 1, D2W_RemoteTxSetting);
	}
	else {
		length = CMN_StringLength(D2W_RemoteTxSettingOff);
		DisplayStringHigh(0, D2W_RemoteTxSettingOff);
		DisplayStringHigh(length + 1, D2W_RemoteTxSetting);
	}

	while (loop) {
		OPR_GetKey(KEY_WAIT_FEW_TIME);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();
		switch (keytype) {
		case CLEAR:
		case STOP:
		case KEY_TIME_UP:
			loop = FALSE;
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}
#endif


#if defined(STOCKHM2) || (defined(HINOKI2) && defined(JPNNTT)) || defined(HINOKI3)	/* O.Oshima 2004/11/04 */	/* Y.kano 2005/02/14 */
/*************************************************************************
	module		:[ÉTÉÄÉ`ÉFÉbÉN]
	function	:[]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[2001/02/20]
	author		:[]
*************************************************************************/
UWORD WordTypeCheckSum(UWORD *address, UDWORD word_size)
{
	UWORD sum;

	sum = 0;
	while (word_size--) {
		sum += *(address++);
	}

	return (sum);	/* WordÇÃÉTÉÄÉ`ÉFÉbÉNÇï‘Ç∑ */
}


/*************************************************************************
	module		:[ÉTÉÄÉ`ÉFÉbÉNï\é¶]
	function	:[]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[]
	date		:[]
	author		:[]
*************************************************************************/
CONST UBYTE Sum_Msg1[]		= " ROM0:     ROM1:    ";
void DisplayCheckSum(void)
{
	UBYTE keycode;
	UBYTE keytype;
	UBYTE buffer[OPR_DISPLAY_MAX+1];
	UWORD sum[4];

	ClearDisplayHigh();
	ClearDisplayLow();

	DisplayStringHigh(0, (CONST UBYTE *)"CheckSum");
	
	sum[0] = WordTypeCheckSum((UWORD *)0x200000, (0x80000L/2));
	sum[1] = WordTypeCheckSum((UWORD *)0x280000, (0x80000L/2));
	
	CMN_StringCopyNULL(buffer, Sum_Msg1);		/* " ROM0:XXXX ROM1:XXXX" */
	CMN_HexToASC(&buffer[6], (UDWORD)sum[0], 4);
	CMN_HexToASC(&buffer[16], (UDWORD)sum[1], 4);
	DisplayStringHigh(0, (UBYTE *)buffer);

	while (1) {
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keytype = GetInputKeyType();
		keycode = GetInputKeyCode();
		switch (keytype) {
		case KEY_TIME_UP:
			NackBuzzer();
			break;
		case STOP:
			return;
			break;
		default:
			NackBuzzer();
			break;
		}
	}
}
#endif

#if (PRO_RTC_RX5C338A == ENABLE)
/*************************************************************************
	module		:[ÇqÇsÇbÇÃèâä˙ê›íË]
	function	:[
	]
	return		:[]
	date		:[2004/10/25]
	author		:[Y.Tanaka]
*************************************************************************/
void	SF_RTC_Initialize(void)
{
	UWORD	i;
	UBYTE	data[7];
	UBYTE	reg;
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	is_break = 0;
	UDWORD	value = 0;

	UBYTE	mask[8] = {
		0x80, 0x40, 0x20, 0x10,
		0x08, 0x04, 0x02, 0x01
	};

	for (i = 0; i < 7; i++){
		data[i] = 0;
	}

	DisplayStringHigh(0, D2W_RTC_Init);	/* RTCºÆ∑∂ */
	while (1) {
				/* ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();
		DisplayStringLow(0, data);

		switch (keytype) {
		case NUMBER:	/* 0 - 9 */
			for (i = 4; i >= 1; i--){
				data[i] = data[i - 1];
			}
			data[0] = key;
			break;
		case ENTER:
			/** åàíË */
			is_break = 1;
			break;
		case STOP:
		case KEY_TIME_UP:
			/** èIóπ */
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
		if (is_break){
			break;
		}
	}

	for (i = 0; i < 7; i++){
		value *= 10;
		value += (UBYTE)(data[i] - TEN_0_KEY);
	}

	value = value - 3276805;
	if (value >= 3276805){
		value = value - 3276805;
		value /= 10;
		if (value > 128){
			return;
		}
	}
	else {
		value = 3276805 - value;
		value /= 10;
		if (value > 128){
			return;
		}
		value = 128 - value;
	}
	reg = (UBYTE)value;
	
	RTC_IO_Enable(RTC_RW_PERMIT);								/**  èëÇ´çûÇ›ãñâ¬		*/
	WriteClockBit(reg, ADJUST_REGISTER);						/**  èëÇ´çûÇ›			*/
	RTC_IO_Enable(RTC_RW_FORBIT);								/**  èëÇ´çûÇ›ã÷é~		*/

	return;
}
#endif

#if (PRO_DISASTER_PREVENTION_FAX == ENABLE)				/* ñhç–FAXëŒâû by Y.Kano 2005/03/04 	*/
/*************************************************************************
	module		:[ñhç–ÇeÇ`ÇwÉÇÅ[Éhê›íËÉIÉyÉåÅ[ÉVÉáÉì]
	function	:[
	]
	return		:[]
	date		:[2005/03/04]
	author		:[Y.Kano]
*************************************************************************/
void	DisasterPreventionFaxOperation(void)
{
	UBYTE	key;
	UBYTE	keytype;

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_DisasterPreventionFax);

	/* â∫íiï\é¶ */
	FlashDisplayStringLow(D2W_ProgramEnter);				/* "          æØƒ/ΩƒØÃﬂ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case ENTER:
			DisasterPreventionFaxSetting();	/* ñhç–ÇeÇ`Çwê›íË */
			return;
		case FUNCTION:		/* ã@î\ÉLÅ[ */
		case LEFT_ARROW:	/* ç∂ñÓàÛ  */
		case STOP:
		case KEY_TIME_UP:
			return;

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
}


/*************************************************************************
	module		:[ñhç–ÇeÇ`ÇwÉÇÅ[Éhê›íË]
	function	:[
	]
	return		:[]
	date		:[2005/03/04]
	author		:[Y.Kano]
*************************************************************************/
void	DisasterPreventionFaxSetting(void)
{
	UBYTE	status;		/* 1:set  0:clear */
	UBYTE	key;
	UBYTE	keytype;

	if (CHK_DisasterPreventionFaxEnable()) {
		status = 1;
	}
	else {
		status = 0;
	}

	/* â∫íiï\é¶ */
	FlashDisplayStringLow(D2W_ProgramEnter);				/* "          æØƒ/ΩƒØÃﬂ " */

	while(1) {

		/* è„íiï\é¶ */
		if (status) {
			DisplayStringHigh(0, D2W_DisasterPreventionFaxOn);	/* "Œﬁ≥ª≤         : ON  " */
		}
		else {
			DisplayStringHigh(0, D2W_DisasterPreventionFaxOff);	/* "Œﬁ≥ª≤         : OFF " */
		}

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[ */
		case LEFT_ARROW:	/* ç∂ñÓàÛ  */
			status ^= (UBYTE)0x01;
			break;
		case ENTER:
			/** åàíË */
			if (status) {	/* ï“èW */
				DisasterPreventionSet();	/* ñhç–ÇeÇ`Çwê›íË */
			}
			else {
				DisasterPreventionClr();	/* ñhç–ÇeÇ`Çwê›íË */
			}
			/* äÆóπ */
			ChildDisplaySetCompleted(D2W_DisasterPreventionFax);
			return;
		case STOP:
		case KEY_TIME_UP:
			return;

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
}

/*************************************************************************
	module		:[ñhç–ÇeÇ`Çwä÷òAÉXÉCÉbÉ`ê›íË]
	function	:[
	]
	return		:[]
	date		:[2005/03/04]
	author		:[Y.Kano]
*************************************************************************/
void	DisasterPreventionSet(void)
{
	/* ñhç–ÇeÇ`ÇwÇóLå¯Ç…Ç∑ÇÈÅB */
	SYB_MachineUniqSwitch[UNIQ_SW_I9] |= DISASTER_PREVENTION_FAX_ENABLE;
	/* ÇfÇRÉÇÅ[ÉhÇ…Ç∑ÇÈÅB */
	SYB_MachineUniqSwitch[UNIQ_SW_D3] |= V34_V34SIGNAL_RATE_MASK;
	/* ÇPÉtÉåÅ[ÉÄéÛêMèIóπå„ÇÃÉ^ÉCÉÄÉAÉEÉgéûä‘ÅiÇUïbÅjÅB */
	SYB_MachineUniqSwitch[UNIQ_SW_B8] |= DISASTER_PREVENTION_FAX_TIME_OUT;
	/* ÉgÉåÅ[ÉjÉìÉOåüèoéûä‘ÅiÇPÅDÇTÇìÅ`ÇRÅDÇOÇìÅj*/
	SYB_MachineUniqSwitch[UNIQ_SW_A5]	 = DisasterPreventionTCF_Time;
	/* ÇqÇkÇrÇcéûÇÃÉgÉåÅ[ÉjÉìÉOåüèoéûä‘ÅiÇPÅDÇTÇìÅ`ÇRÅDÇOÇìÅj*/
	SYB_MachineUniqSwitch[UNIQ_SW_A6] 	= DisasterPreventionRLSD_TCF_Time;
	/* ÇcÇbÇrÅ|ÇsÇbÇeëóêMä‘äuÇ™ÅAÇPÇOÇOÇçÇì */
	SYB_MachineUniqSwitch[UNIQ_SW_C5] 	= DisasterPreventionDCS_TCF_TX_Time;
	/* ÇsÇbÇeéÛêMÇ©ÇÁÇbÇeÇqëóèoÇ‹Ç≈ÇÃë“Çøéûä‘Ç™ÅAÇQÇOÇOÇçÇì */
	SYB_MachineUniqSwitch[UNIQ_SW_C6] 	= DisasterPreventionTCF_RX_CFR_TX_WaitTime;
	/* ÇcÇhÇréÛêMèIóπÇ©ÇÁÅ|ÇcÇbÇrëóèoäJénÇ‹Ç≈ÇÃéûä‘Ç™ÅAÇXÇXÇOÇçÇì */
	SYS_MemorySwitch[MEMORY_SW_D7] 		= DisasterPreventionDIS_RX_DCS_TX_WaitTime;
	/* ÇbÇeÇqÅ|ÇoÇhÇwä‘äu ÇUÇTÇOÇçÇì */
	SYS_MemorySwitch[MEMORY_SW_B8]		= DisasterPreventionCFR_RX_PIX_TX_Time;
	/* ÇdÇbÇlÉÇÅ[ÉhÇÇnÇeÇe */
	SYB_SettingStatus[SETTING_STATUS_6] &= ~ECM_SETTING;
	/* ã@äÌÉpÉâÉÅÅ[É^ÇOÇPÇÉZÉbÉgÇ∑ÇÈÅB*/
	SYB_MachineParameter[MACHINE_PARA_1] |= DisasterPreventionMachineParaData;
}

/*************************************************************************
	module		:[ñhç–ÇeÇ`Çwä÷òAÉXÉCÉbÉ`èâä˙âª]
	function	:[
	]
	return		:[]
	date		:[2005/03/04]
	author		:[Y.Kano]
*************************************************************************/
void	DisasterPreventionClr(void)
{
	/* ñhç–ÇeÇ`ÇwÇñ≥å¯Ç…Ç∑ÇÈÅB */
	SYB_MachineUniqSwitch[UNIQ_SW_I9] &= ~DISASTER_PREVENTION_FAX_ENABLE;
	/* ÇuÇRÇSÉÇÅ[ÉhÇ…Ç∑ÇÈÅB */
	SYB_MachineUniqSwitch[UNIQ_SW_D3] = UniqSwitchInitialTable[UNIQ_SW_D3];
	/* ÇPÉtÉåÅ[ÉÄéÛêMèIóπå„ÇÃÉ^ÉCÉÄÉAÉEÉgéûä‘ÇÃÉNÉäÉAÅB */
	SYB_MachineUniqSwitch[UNIQ_SW_B8] = UniqSwitchInitialTable[UNIQ_SW_B8];
	/* ÉgÉåÅ[ÉjÉìÉOåüèoéûä‘ÇÃÉNÉäÉA */
	SYB_MachineUniqSwitch[UNIQ_SW_A5] 	= UniqSwitchInitialTable[UNIQ_SW_A5];
	/* ÇqÇkÇrÇcéûÇÃÉgÉåÅ[ÉjÉìÉOåüèoéûä‘ÇÃÉNÉäÉA */
	SYB_MachineUniqSwitch[UNIQ_SW_A6] 	= UniqSwitchInitialTable[UNIQ_SW_A6];
	/* ÇcÇbÇrÅ|ÇsÇbÇeëóêMä‘äuÇÃÉNÉäÉA */
	SYB_MachineUniqSwitch[UNIQ_SW_C5] 	= UniqSwitchInitialTable[UNIQ_SW_C5];
	/* ÇsÇbÇeéÛêMÇ©ÇÁÇbÇeÇqëóèoÇ‹Ç≈ÇÃë“Çøéûä‘ÇÕÅAÉÅÉÇÉäÇrÇvÅiÇbÇPÅjÇ≈å©ÇÈÅB */
	SYB_MachineUniqSwitch[UNIQ_SW_C6] 	= UniqSwitchInitialTable[UNIQ_SW_C6];
	/* ÇcÇhÇréÛêMèIóπÇ©ÇÁÅ|ÇcÇbÇrëóèoäJénÇ‹Ç≈ÇÃéûä‘ÇÕÅAÉÅÉÇÉäÇrÇvÅiÇaÇQÅjÇ≈å©ÇÈÅB */
	SYS_MemorySwitch[MEMORY_SW_D7]    	= MemorySwitchInitialTable[MEMORY_SW_D7];
	/* ÇbÇeÇqÅ|ÇoÇhÇwä‘äuÇÕÅAÉÅÉÇÉäÇrÇvÅiÇaÇPÅjÇ≈å©ÇÈÅB */
	SYS_MemorySwitch[MEMORY_SW_B8]		= MemorySwitchInitialTable[MEMORY_SW_B8];
	/* ã@äÌê›íËÇÃèâä˙ílÇÃÇdÇbÇlÉÇÅ[ÉhÇîΩâfÇ∑ÇÈÅB */
	if (SettingStatusInitialTable[SETTING_STATUS_6] & ECM_SETTING) {
		SYB_SettingStatus[SETTING_STATUS_6] |= ECM_SETTING;
	}
	else {
		SYB_SettingStatus[SETTING_STATUS_6] &= ~ECM_SETTING;
	}
	/* ã@äÌÉpÉâÉÅÅ[É^ÇOÇPÇèâä˙âªÇ∑ÇÈÅB*/
	SYB_MachineParameter[MACHINE_PARA_1] &= ~ATTENATION_MACHINE_PARA;
	SYB_MachineParameter[MACHINE_PARA_1] |= CountryTable[SYB_MachineParameter[COUNTRY_CODE]][COUNTRY_SW_15];
}
#endif	/* End of (PRO_DISASTER_PREVENTION_FAX == ENABLE) */

#if defined (KEISATSU)		/* åxé@FAX Added by SMuratec K.W.Q 2005/06/09 */
UBYTE SetS1Bypass(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	parasw;

	ClearDisplayHigh();
	ClearDisplayLow();
	
	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_S1Bypass); /* "S1  ﬁ≤ ﬂΩ           " */
	DisplayStringHigh(15, ":");
	
	if (SYB_MachineParameter[M_PARA_SW_I1] & BYPASS_S1) {
		DisplayStringHigh(16, D2W_On);
		parasw = TRUE;
	}
	else {
		DisplayStringHigh(16, D2W_Off);
		parasw = FALSE; 
	}

	/* â∫íiì_ñ≈ï\é¶ */
	FlashDisplayStringLow(D2W_ProgramEnter); /* "            ∑…≥/æØƒ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[Å^âEñÓàÛÉLÅ[*/
		case LEFT_ARROW:	/* ç∂ñÓàÛÉLÅ[ */
			if (parasw) {
				DisplayStringHigh(16, D2W_Off);
				parasw = FALSE;
			}
			else {
				DisplayStringHigh(16, D2W_On);
				parasw = TRUE;
			}
			break;
		case ENTER:
			if(parasw){
				SYB_MachineParameter[M_PARA_SW_I1] |= BYPASS_S1;
			}
			else{
				SYB_MachineParameter[M_PARA_SW_I1] &= ~BYPASS_S1;
			}

			/* äÆóπï\é¶ */
			CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
			CMN_StringCopy(FunctionDisplayBufferHigh, &D2W_SetS1Bypass[3]);
			ChildDisplaySetCompleted(FunctionDisplayBufferHigh);

			return (OK);
		case STOP:
		case KEY_TIME_UP:
			return (NG);

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
	
	return (NG);
}

UBYTE	SetScrambleAvailable(void)
{
	UBYTE	key;
	UBYTE	keytype;
	UBYTE	parasw;

	ClearDisplayHigh();
	ClearDisplayLow();
	
	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_Scramble);				/* Ω∏◊›ÃﬁŸ       " */
	DisplayStringHigh(15, ":");
	
	if (SYB_MachineParameter[M_PARA_SW_I0] & SCRAMBLER_AVAILABLE) {
		DisplayStringHigh(16, D2W_On);  
		parasw = TRUE;					 
	}
	else {
		DisplayStringHigh(16, D2W_Off);   
		parasw = FALSE;					 
	}

	/* â∫íiì_ñ≈ï\é¶ */
	FlashDisplayStringLow(D2W_ProgramEnter);	/* "            ∑…≥/æØƒ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[Å^âEñÓàÛÉLÅ[*/
		case LEFT_ARROW:	/* ç∂ñÓàÛÉLÅ[ */
			if (parasw) {
				DisplayStringHigh(16, D2W_Off);
				parasw = FALSE;
			}
			else {
				DisplayStringHigh(16, D2W_On);
				parasw = TRUE;
			}
			break;
		case ENTER:
			if(parasw){
				SYB_MachineParameter[M_PARA_SW_I0] |= SCRAMBLER_AVAILABLE;
			}
			else{
				SYB_MachineParameter[M_PARA_SW_I0] &= ~SCRAMBLER_AVAILABLE;
			}

			/* äÆóπï\é¶ */
			CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
			CMN_StringCopy(FunctionDisplayBufferHigh, &D2W_ScrambleAvailable[3]);
			ChildDisplaySetCompleted(FunctionDisplayBufferHigh);

			return (OK);
		case STOP:
		case KEY_TIME_UP:
			return (NG);

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
	
	return (NG);
}

UBYTE	SetKeyLockOn(void)
{
	UBYTE i = 0;

	for( i = 1; i < 6; i++){
		if (SetKeyLock(i) == NG){
			return (NG);
		}
	}

	/* äÆóπï\é¶ */
	CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
	CMN_StringCopy(FunctionDisplayBufferHigh, &D2W_KeyLockOn[3]);
	ChildDisplaySetCompleted(FunctionDisplayBufferHigh);
	
	return (OK);
}

UBYTE	SetKeyLock(int Index)
{
	UBYTE	keycode;
	UBYTE	keytype;
	UBYTE	parasw;
	UBYTE	Key;
	
	ClearDisplayHigh();
	ClearDisplayLow();

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	switch(Index){
	case 1:											/* åxìd/â¡ì¸ÉLÅ[ÉçÉbÉN */
		DisplayStringHigh(0, D2W_KeidenKanyu);
		Key = KEY_LOCK_KEIDEN_KANYU;
		break;
	case 2:											/* àÍêƒ/å¬ï ÉLÅ[ÉçÉbÉN */
		DisplayStringHigh(0, D2W_IsseiKobetsu);
		Key = KEY_LOCK_ISSEI_KOBETSU;
		break;
	case 3:											/* S:ON/OFFÉLÅ[ÉçÉbÉN */
		DisplayStringHigh(0, D2W_S_OnOFF);
		Key = KEY_LOCK_S_ON_OFF;
		break;
	case 4:											/* ã§í /êÍópÉLÅ[ÉçÉbÉN */
		DisplayStringHigh(0, D2W_KyotsuSenyo);
		Key = KEY_LOCK_KYOTSU_SENYO;
		break;
	case 5:											/* é©ìÆéÛêMÉLÅ[ÉçÉbÉN */
		DisplayStringHigh(0, D2W_AutoRx);
		Key = KEY_LOCK_AUTO_RX;
		break;
	default:
		return (NG);
	}

	DisplayStringHigh(15, ":");

	if (SYB_MachineParameter[M_PARA_SW_I1] & Key) {
		DisplayStringHigh(16, D2W_On);  
		parasw = TRUE;					 
	}
	else {
		DisplayStringHigh(16, D2W_Off);   
		parasw = FALSE;					 
	}

	/* â∫íiì_ñ≈ï\é¶ */
	FlashDisplayStringLow(D2W_ProgramEnter);	/* "            ∑…≥/æØƒ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keycode = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[Å^âEñÓàÛÉLÅ[*/
		case LEFT_ARROW:	/* ç∂ñÓàÛÉLÅ[ */
			if (parasw) {
				DisplayStringHigh(16, D2W_Off);
				parasw = FALSE;
			}
			else {
				DisplayStringHigh(16, D2W_On);
				parasw = TRUE;
			}
			break;
		case ENTER:
			if(parasw){
				SYB_MachineParameter[M_PARA_SW_I1] |= Key;
			}
			else{
				SYB_MachineParameter[M_PARA_SW_I1] &= ~Key;
			}
			return (OK);
		case STOP:
		case KEY_TIME_UP:
			return (NG);

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
	
	return (NG);
}

/*************************************************************************
	module		:[ê›íË]
	function	:[
	]
	return		:[]
	common		:[]
	condition	:[]
	comment		:[PRG-J07]
	machine		:[SH7043]
	language	:[SHC]
	keyword		:[OPR]
	date		:[]
	author		:[]
*************************************************************************/
UBYTE SetSendLevel(void)
{
	UBYTE	disp_position;
	UWORD	level_min;
	UWORD	level_max;
	UWORD	send_level;
	UWORD	temp_level;

	int		i;
	
	ClearDisplayHigh();
	ClearDisplayLow();

	/*----------------------*/
	/*  ëóèoÉåÉxÉã ÉZÉbÉg   */
	/*----------------------*/
	level_min = 0;
	level_max = 15;
	CMN_MemorySetNULL(SubTitleDisplayBuffer, OPR_DISPLAY_MAX, ' ');
	CMN_StringCopy(SubTitleDisplayBuffer, "dB");
	FixedNumberInputRangeSet(level_min, level_max, (UBYTE)12, SubTitleDisplayBuffer);
	disp_position = (UBYTE)(OPR_DISPLAY_MAX - FigureCalculation(level_max));

#if (0)		/* åxé@FAX DVT_ID27 Modify by SMuratec K.W.Q 2005/10/28 */
	for (i = 0; i <= 2; i++){
#else
	for (i = 0; i < 2; i++){
#endif
		send_level = 0xFFFF;
		temp_level = 0xFFFF;
		switch(i){
		case 0:
#if (0)		/* åxé@FAX DVT_ID27 Modify by SMuratec K.W.Q 2005/10/28 */
			DisplayStringHigh(0, D2W_KeidenIssei);
#else
			DisplayStringHigh(0, D2W_Keiden);
#endif
			/* ëóèoÉåÉxÉãì¸óÕ */
			send_level = FixedLengthNumberInput((UBYTE)(SYS_MemorySwitch[MEMORY_SW_B4] & ATTENATION),
												  level_min,
												  level_max,
												  disp_position,
												  SubTitleDisplayBuffer);
			if (0xFFFF == send_level){
				return (NG);
			}

			/* ì¸óÕÇ≥ÇÍÇΩílÇÉZÉbÉg */
			temp_level = SYS_MemorySwitch[MEMORY_SW_B4] & ~ATTENATION;
			
			SYS_MemorySwitch[MEMORY_SW_B4] = temp_level | (UBYTE)send_level;
			SYB_MachineParameter[M_PARA_SW_B3] = temp_level | (UBYTE)send_level;

			break;
#if (0)		/* åxé@FAX DVT_ID27 Delete by SMuratec K.W.Q 2005/10/28 */
		case 1:
			DisplayStringHigh(0, D2W_KeidenKobetsu);
	
			/* ëóèoÉåÉxÉãì¸óÕ */
/* åxé@FAX DVT_ID3 Added start by SMuratec K.W.Q 2005/10/28 */
 #if (0)
			send_level = FixedLengthNumberInput((UBYTE)(SYS_MemorySwitch[MEMORY_SW_B4] & ~ATTENATION),
												  level_min,
												  level_max,
												  disp_position,
												  SubTitleDisplayBuffer);
 #else
			send_level = FixedLengthNumberInput((UBYTE)(SYS_MemorySwitch[MEMORY_SW_B4] >> 4),
												  level_min,
												  level_max,
												  disp_position,
												  SubTitleDisplayBuffer);
 #endif
/* åxé@FAX DVT_ID3 Added end by SMuratec K.W.Q 2005/10/28 */
			if (0xFFFF == send_level){
				return (NG);
			}

			/* ì¸óÕÇ≥ÇÍÇΩílÇÉZÉbÉg */
			temp_level = SYS_MemorySwitch[MEMORY_SW_B4] & ATTENATION;
			
			SYS_MemorySwitch[MEMORY_SW_B4] = temp_level | (UBYTE)(send_level << 4);
			SYB_MachineParameter[M_PARA_SW_B3] = temp_level | (UBYTE)(send_level << 4);

			break;

		case 2:
#else
		case 1:
#endif
			DisplayStringHigh(0, D2W_Kanyu);

			/* ëóèoÉåÉxÉãì¸óÕ */
			send_level = FixedLengthNumberInput((UBYTE)(SYS_MemorySwitch[MEMORY_SW_B1] & ATTENATION),
												  level_min,
												  level_max,
												  disp_position,
												  SubTitleDisplayBuffer);
			if (0xFFFF == send_level){
				return (NG);
			}

			/* ì¸óÕÇ≥ÇÍÇΩílÇÉZÉbÉg */
			temp_level = SYS_MemorySwitch[MEMORY_SW_B4] & ~ATTENATION;
			
			SYS_MemorySwitch[MEMORY_SW_B1] = temp_level | (UBYTE)send_level;
			SYB_MachineParameter[MACHINE_PARA_1] = temp_level | (UBYTE)send_level;

			break;
		}
		

	}
	/* äÆóπï\é¶ */
	ChildDisplaySetCompleted(&D2W_SendLevel[3]);
	
	return (OK);
}

UBYTE	SetDTMFSendLevel(void)
{
	UBYTE	disp_position;
	UWORD	level_min;
	UWORD	level_max;
	UWORD	DTMF_level;
	UWORD	temp_level;

	int		i;

	ClearDisplayHigh();
	ClearDisplayLow();

	/*----------------------*/
	/*  ëóèoÉåÉxÉã ÉZÉbÉg   */
	/*----------------------*/
	level_min = 0;
	level_max = 15;
	CMN_MemorySetNULL(SubTitleDisplayBuffer, OPR_DISPLAY_MAX, ' ');
	CMN_StringCopy(SubTitleDisplayBuffer, "dB");
	FixedNumberInputRangeSet(level_min, level_max, (UBYTE)12, SubTitleDisplayBuffer);
	disp_position = (UBYTE)(OPR_DISPLAY_MAX - FigureCalculation(level_max));

	for (i = 0; i < 2; i++){
		DTMF_level = 0xFFFF;
		
		switch(i){
		case 0:
			DisplayStringHigh(0, D2W_Keiden);

			/* ëóèoÉåÉxÉãì¸óÕ */
			DTMF_level = FixedLengthNumberInput((UWORD)(SYB_MachineParameter[M_PARA_SW_B4] & ATTENATION),
												  level_min,
												  level_max,
												  disp_position,
												  SubTitleDisplayBuffer);
			if (0xFFFF == DTMF_level){
				return (NG);
			}

			/* ì¸óÕÇ≥ÇÍÇΩílÇÉZÉbÉg */
			temp_level = SYB_MachineParameter[M_PARA_SW_B4] & ~ATTENATION;
			SYB_MachineParameter[M_PARA_SW_B4] = temp_level | (UBYTE)DTMF_level;

			break;
		case 1:
			DisplayStringHigh(0, D2W_Kanyu);
			/* ëóèoÉåÉxÉãì¸óÕ */
			DTMF_level = FixedLengthNumberInput((UWORD)(SYB_MachineParameter[MACHINE_PARA_2] & ATTENATION),
												  level_min,
												  level_max,
												  disp_position,
												  SubTitleDisplayBuffer);
			if (0xFFFF == DTMF_level){
				return (NG);
			}

			/* ì¸óÕÇ≥ÇÍÇΩílÇÉZÉbÉg */
			temp_level = SYB_MachineParameter[MACHINE_PARA_2] & ~ATTENATION;
			SYB_MachineParameter[MACHINE_PARA_2] = temp_level | (UBYTE)DTMF_level;

			break;
		}
	}

	/* äÆóπï\é¶ */
	ChildDisplaySetCompleted(&D2W_DTMFSendLevel[3]);
	
	return (OK);
}

#if defined (KEISATSU)		/* åxé@FAX Added by SMuratec K.W.Q 2005/10/10 */
UBYTE SetIsseiRingTimeout(void)
{
	UBYTE	disp_position;
	UWORD	level_min;
	UWORD	level_max;
	UWORD	DTMF_level;

	ClearDisplayHigh();
	ClearDisplayLow();

	/*----------------------*/
	/*  ëóèoÉåÉxÉã ÉZÉbÉg   */
	/*----------------------*/
	level_min = 0;
	level_max = 30;
	CMN_MemorySetNULL(SubTitleDisplayBuffer, OPR_DISPLAY_MAX, ' ');
	CMN_StringCopy(SubTitleDisplayBuffer, D2W_RingTimeout);
	FixedNumberInputRangeSet(level_min, level_max, (UBYTE)12, SubTitleDisplayBuffer);
	disp_position = (UBYTE)(OPR_DISPLAY_MAX - FigureCalculation(level_max));

	DTMF_level = 0xFFFF;

	DisplayStringHigh(0, &D2W_IsseiRingTimeout[3]);

	/* ëóèoÉåÉxÉãì¸óÕ */
	DTMF_level = FixedLengthNumberInput((UWORD)SYB_MachineParameter[M_PARA_SW_I2],
										  level_min,
										  level_max,
										  disp_position,
										  SubTitleDisplayBuffer);
	if (0xFFFF == DTMF_level){
		return (NG);
	}

	/* ì¸óÕÇ≥ÇÍÇΩílÇÉZÉbÉg */
	SYB_MachineParameter[M_PARA_SW_I2] = (UBYTE)DTMF_level;

	/* äÆóπï\é¶ */
	ClearDisplayHigh();
	ChildDisplaySetCompleted(&D2W_IsseiRingTimeout[3]);
	
	return (OK);
}
#endif		/* End of (defined (KEISATSU)) */

#if (0)		/* åxé@FAX Delete by SMuratec K.W.Q 2005/10/10 */
UBYTE SetIsseiRingCount(void)
{
	UBYTE	keycode;
	UBYTE	keytype;
	UBYTE	parasw;

	ClearDisplayHigh();
	ClearDisplayLow();

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_RingCount);				/* "“≤ƒﬁ≥ ∂≤Ω≥      " */
	DisplayStringHigh(15, ":");
	
	switch (SYB_MachineParameter[M_PARA_SW_I2] & 0x0F) {
	case 0:
		DisplayStringHigh(16, "0 ");  
		parasw = 0;
		break;
	case 2:
		DisplayStringHigh(16, "2 ");  
		parasw = 2;
		break;
	case 8:
		DisplayStringHigh(16, "8 ");  
		parasw = 8;
		break;
	case 15:
		DisplayStringHigh(16, "15");  
		parasw = 15;
		break;
	default:
		DisplayStringHigh(16, "0 ");  
		parasw = 0;
		break;
	}

	/* â∫íiì_ñ≈ï\é¶ */
	FlashDisplayStringLow(D2W_ProgramEnter);	/* "            ∑…≥/æØƒ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keycode = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case LEFT_ARROW:	/* ç∂ñÓàÛÉLÅ[ */
			switch (parasw) {
			case 0:
				DisplayStringHigh(16, "2 ");  
				parasw = 0x02;
				break;
			case 2:
				DisplayStringHigh(16, "8 ");  
				parasw = 0x08;
				break;
			case 8:
				DisplayStringHigh(16, "15");  
				parasw = 0x0F;
				break;
			case 15:
				DisplayStringHigh(16, "0 ");  
				parasw = 0x00;
				break;
			default:
				DisplayStringHigh(16, "0 ");  
				parasw = 0x00;
				break;
			}
			break;
		case FUNCTION:		/* ã@î\ÉLÅ[Å^âEñÓàÛÉLÅ[*/
			switch (parasw) {
			case 0:
				DisplayStringHigh(16, "15");  
				parasw = 0x0F;
				break;
			case 2:
				DisplayStringHigh(16, "0 ");  
				parasw = 0x00;
				break;
			case 8:
				DisplayStringHigh(16, "2 ");  
				parasw = 0x02;
				break;
			case 15:
				DisplayStringHigh(16, "8 ");  
				parasw = 0x08;
				break;
			default:
				DisplayStringHigh(16, "0 ");  
				parasw = 0x00;
				break;
			}
			break;
		case ENTER:
			SYB_MachineParameter[M_PARA_SW_I2] = (SYB_MachineParameter[M_PARA_SW_I2] & 0xF0) | parasw;

			/* äÆóπï\é¶ */
			CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
			CMN_StringCopy(FunctionDisplayBufferHigh, &D2W_IsseiRingCount[3]);
			ChildDisplaySetCompleted(FunctionDisplayBufferHigh);
	
			return (OK);
		case STOP:
		case KEY_TIME_UP:
			return (NG);

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
	
	return (NG);
}
#endif

UBYTE SetIsseiAbility(void)
{
	if (SetIsseiSpeed() == NG){
		return (NG);
	}
	
	if (SetIsseiCode() == NG){
		return (NG);
	}
	
	if (SetIsseiMinScanLineTime() == NG){
		return (NG);
	}
	
	return (OK);
}

UBYTE	SetIsseiSpeed(void)
{
	UBYTE	keycode;
	UBYTE	keytype;
	UBYTE	parasw;
	UBYTE	save_parasw;

	ClearDisplayHigh();
	ClearDisplayLow();

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_IsseiSpeed);				/* "º›∫ﬁ≥ ø∏ƒﬁ      " */
	DisplayStringHigh(12, ":");

	save_parasw = SYB_MachineParameter[M_PARA_SW_I3] & ISSEI_SPEED_MASK;
	
	parasw = save_parasw;
	
	switch (parasw) {
	case 0:
		DisplayStringHigh(13, "2400bps");  
		break;
	case 1:
		DisplayStringHigh(13, "4800bps");  
		break;
	case 2:
		DisplayStringHigh(13, "7200bps");  
		break;
	case 3:
		DisplayStringHigh(13, "9600bps");  
		break;
	default:
		DisplayStringHigh(13, "2400bps");  
		break;
	}

	/* â∫íiì_ñ≈ï\é¶ */
	FlashDisplayStringLow(D2W_ProgramEnter);	/* "            ∑…≥/æØƒ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keycode = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[Å^âEñÓàÛÉLÅ[*/
			switch (parasw) {
			case 0:
				DisplayStringHigh(13, "4800bps");  
				parasw = 0x01;
				break;
			case 1:
				DisplayStringHigh(13, "7200bps");  
				parasw = 0x02;
				break;
			case 2:
				DisplayStringHigh(13, "9600bps");  
				parasw = 0x03;
				break;
			case 3:
				DisplayStringHigh(13, "2400bps");  
				parasw = 0x00;
				break;
			default:
				DisplayStringHigh(13, "2400bps");  
				parasw = 0x00;
				break;
			}
			break;
		case LEFT_ARROW:	/* ç∂ñÓàÛÉLÅ[ */
			switch (parasw) {
			case 0:
				DisplayStringHigh(13, "9600bps");  
				parasw = 0x03;
				break;
			case 1:
				DisplayStringHigh(13, "2400bps");  
				parasw = 0x00;
				break;
			case 2:
				DisplayStringHigh(13, "4800bps");  
				parasw = 0x01;
				break;
			case 3:
				DisplayStringHigh(13, "7200bps");  
				parasw = 0x02;
				break;
			default:
				DisplayStringHigh(13, "2400bps");  
				parasw = 0x00;
				break;
			}
			break;
		case ENTER:
			if (parasw != save_parasw){
				SYB_MachineParameter[M_PARA_SW_I3] = (SYB_MachineParameter[M_PARA_SW_I3] & ~ISSEI_SPEED_MASK) | parasw;
			}
			return (OK);
		case STOP:
		case KEY_TIME_UP:
			return (NG);

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
	
	return (NG);
}

UBYTE SetIsseiCode(void)
{
	UBYTE	keycode;
	UBYTE	keytype;
	UBYTE	parasw;

	ClearDisplayHigh();
	ClearDisplayLow();

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_IsseiCode);				/* Ã∫ﬁ≥∂ Œ≥º∑       " */
	DisplayStringHigh(15, ":");
	
	if (SYB_MachineParameter[M_PARA_SW_I3] & ISSEI_CODE_MR) {
		DisplayStringHigh(16, "MR");
		parasw = TRUE;
	}
	else {
		DisplayStringHigh(16, "MH");
		parasw = FALSE;
	}

	/* â∫íiì_ñ≈ï\é¶ */
	FlashDisplayStringLow(D2W_ProgramEnter);	/* "            ∑…≥/æØƒ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keycode = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[Å^âEñÓàÛÉLÅ[*/
		case LEFT_ARROW:	/* ç∂ñÓàÛÉLÅ[ */
			if (parasw) {
				DisplayStringHigh(16, "MH");
				parasw = FALSE;
			}
			else {
				DisplayStringHigh(16, "MR");
				parasw = TRUE;
			}
			break;
		case ENTER:
			if(parasw){
				SYB_MachineParameter[M_PARA_SW_I3] |= ISSEI_CODE_MR;
			}
			else{
				SYB_MachineParameter[M_PARA_SW_I3] &= ~ISSEI_CODE_MR;
			}
			return (OK);
		case STOP:
		case KEY_TIME_UP:
			return (NG);

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
	
	return (NG);
}

UBYTE SetIsseiMinScanLineTime(void)
{
	UBYTE	keycode;
	UBYTE	keytype;
	UBYTE	parasw;
	UBYTE	save_parasw;
	int		index;

	ClearDisplayHigh();
	ClearDisplayLow();

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, D2W_IsseiMinScanLineTime);				/* "√ﬁ›ø≥ ºﬁ∂›      " */
	DisplayStringHigh(12, ":");

	save_parasw = SYB_MachineParameter[M_PARA_SW_I3] & ISSEI_MIN_SCAN_LINE_TIME_MASK;
	
	parasw = save_parasw;
	
	switch (parasw) {
	case 0:
		DisplayStringHigh(13, "20ms   ");  
		index = 0;
		break;
	case 16:
		DisplayStringHigh(13, "10ms   ");  
		index = 1;
		break;
	case 48:
		DisplayStringHigh(13, "10/20ms");  
		index = 2;
		break;
	default:
		DisplayStringHigh(13, "20ms   ");  
		index = 0;
		break;
	}

	/* â∫íiì_ñ≈ï\é¶ */
	FlashDisplayStringLow(D2W_ProgramEnter);	/* "            ∑…≥/æØƒ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keycode = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[Å^âEñÓàÛÉLÅ[*/
			switch (index) {
			case 0:
				DisplayStringHigh(13, "10/20ms");  
				parasw = 0x30;
				index = 2;
				break;
			case 1:
				DisplayStringHigh(13, "20ms   ");  
				parasw = 0x00;
				index = 0;
				break;
			case 2:
				DisplayStringHigh(13, "10ms   ");  
				parasw = 0x10;
				index = 1;
				break;
			default:
				DisplayStringHigh(13, "20ms   ");  
				parasw = 0x00;
				index = 0;
				break;
			}
			break;
		case LEFT_ARROW:	/* ç∂ñÓàÛÉLÅ[ */
			switch (index) {
			case 0:
				DisplayStringHigh(13, "10ms   ");  
				parasw = 0x10;
				index = 2;
				break;
			case 1:
				DisplayStringHigh(13, "20ms   ");  
				parasw = 0x00;
				index = 0;
				break;
			case 2:
				DisplayStringHigh(13, "10/20ms");  
				parasw = 0x30;
				index = 1;
				break;
			default:
				DisplayStringHigh(13, "20ms   ");  
				parasw = 0x00;
				index = 0;
				break;
			}
			break;
		case ENTER:
			if (parasw != save_parasw){
				SYB_MachineParameter[M_PARA_SW_I3] = 
					(SYB_MachineParameter[M_PARA_SW_I3] & ~ISSEI_MIN_SCAN_LINE_TIME_MASK) | parasw;
			}

			/* äÆóπï\é¶ */
			CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
			CMN_StringCopy(FunctionDisplayBufferHigh, &D2W_IsseiAbility[3]);
			ChildDisplaySetCompleted(FunctionDisplayBufferHigh);
			
			return (OK);
		case STOP:
		case KEY_TIME_UP:
			return (NG);

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
	
	return (NG);
}

UBYTE SetIsseiTimeOut(void)
{
	UBYTE	disp_position;
	UWORD	count_min;
	UWORD	count_max;
	UWORD	time_out_count;

	ClearDisplayHigh();
	ClearDisplayLow();

	/*----------------------*/
	/*  ëóèoÉåÉxÉã ÉZÉbÉg   */
	/*----------------------*/
	count_min = 1;
	count_max = 3;
	CMN_MemorySetNULL(SubTitleDisplayBuffer, OPR_DISPLAY_MAX, ' ');
	CMN_StringCopy(SubTitleDisplayBuffer, "Ã›");
	FixedNumberInputRangeSet(count_min, count_max, (UBYTE)12, SubTitleDisplayBuffer);
	disp_position = (UBYTE)(OPR_DISPLAY_MAX - FigureCalculation(count_max));

	DisplayStringHigh(0, &D2W_IsseiTimeOut[3]);

	/* ëóèoÉåÉxÉãì¸óÕ */
	time_out_count = FixedLengthNumberInput((UWORD)(SYB_MachineParameter[M_PARA_SW_I4]),
										  count_min,
										  count_max,
										  disp_position,
										  SubTitleDisplayBuffer);
	if (0xFFFF == time_out_count){
		return (NG);
	}
	
	/* ì¸óÕÇ≥ÇÍÇΩílÇÉZÉbÉg */
	SYB_MachineParameter[M_PARA_SW_I4] = (UBYTE)time_out_count;

	/* äÆóπï\é¶ */
	ChildDisplaySetCompleted(&D2W_IsseiTimeOut[3]);
	
	return (OK);
}

UBYTE SetRemoteRxDialOne(void)
{
	UBYTE	keycode;
	UBYTE	keytype;
	UBYTE	memsw;

	ClearDisplayHigh();
	ClearDisplayLow();

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, &D2W_RemoteRxDialOne[3]);		/* "ÿ”∞ƒ ƒ∏ ﬁ› π¿Ω≥  " */
	DisplayStringHigh(18, ":");

	if (CHK_RemoteTransferDialOne()) {
		DisplayStringHigh(19, "1");
		memsw = TRUE;
	}
	else {
		DisplayStringHigh(19, "2");
		memsw = FALSE;
	}

	/* â∫íiì_ñ≈ï\é¶ */
	FlashDisplayStringLow(D2W_ProgramEnter);	/* "            ∑…≥/æØƒ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keycode = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[Å^âEñÓàÛÉLÅ[*/
		case LEFT_ARROW:	/* ç∂ñÓàÛÉLÅ[ */
			if (memsw) {
				DisplayStringHigh(19, "2");
				memsw = FALSE;
			}
			else {
				DisplayStringHigh(19, "1");
				memsw = TRUE;
			}
			break;
		case ENTER:
			if (memsw) {
				SYS_MemorySwitch[MEMORY_SW_G5] |= REMOTE_TRANSFER_DIAL_ONE;
			}
			else {
				SYS_MemorySwitch[MEMORY_SW_G5] &= ~REMOTE_TRANSFER_DIAL_ONE;
			}

			/* äÆóπï\é¶ */
			CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
			CMN_StringCopy(FunctionDisplayBufferHigh, &D2W_RemoteRxDialOne[3]);
			ChildDisplaySetCompleted(FunctionDisplayBufferHigh);

			return (OK);
		case STOP:
		case KEY_TIME_UP:
			return (NG);

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
	
	return (NG);
}

UBYTE SetKeidenRxPriority(void)
{
	UBYTE	keycode;
	UBYTE	keytype;
	UBYTE	parasw;

	ClearDisplayHigh();
	ClearDisplayLow();

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, &D2W_KeidenRxPriority[3]);		/* "π≤√ﬁ› ’≥æ› ºﬁ≠º›  " */
	DisplayStringHigh(15, ":");

	if (SYB_MachineParameter[M_PARA_SW_I0] & KEIDEN_RX_PRIORITY) {
		DisplayStringHigh(16, D2W_On);  
		parasw = TRUE;					 
	}
	else {
		DisplayStringHigh(16, D2W_Off);   
		parasw = FALSE;					 
	}

	/* â∫íiì_ñ≈ï\é¶ */
	FlashDisplayStringLow(D2W_ProgramEnter);	/* "            ∑…≥/æØƒ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keycode = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[Å^âEñÓàÛÉLÅ[*/
		case LEFT_ARROW:	/* ç∂ñÓàÛÉLÅ[ */
			if (parasw) {
				DisplayStringHigh(16, D2W_Off);
				parasw = FALSE;	
			}
			else {
				DisplayStringHigh(16, D2W_On);
				parasw = TRUE;
			}
			break;
		case ENTER:
			if (parasw) {
				SYB_MachineParameter[M_PARA_SW_I0] |= KEIDEN_RX_PRIORITY;
			}
			else {
				SYB_MachineParameter[M_PARA_SW_I0] &= ~KEIDEN_RX_PRIORITY;
			}

			/* äÆóπï\é¶ */
			CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
			CMN_StringCopy(FunctionDisplayBufferHigh, &D2W_KeidenRxPriority[3]);
			ChildDisplaySetCompleted(FunctionDisplayBufferHigh);

			return (OK);
		case STOP:
		case KEY_TIME_UP:
			return (NG);

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
	
	return (NG);
}

void GetFPGAVersion(void)
{
	UBYTE	key;
	UBYTE	keytype;

	ClearDisplayHigh();
	ClearDisplayLow();

	S1_GetFPGA_VersionString(FunctionDisplayBufferLow);

	DisplayStringHigh(0, &D2W_FPGAVersion[3]);
	DisplayStringLow(0, FunctionDisplayBufferLow);

	while (1) {
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		key = GetInputKeyCode();
		keytype = GetInputKeyType();

		switch (keytype) {
		case STOP:
			return;
		case NO_EFFECT:
			break;
		default:
			NackBuzzer();
			break;
		}
	}
	
	return;
}

UBYTE	SetKeidenDialTone(void)
{
	UBYTE	keycode;
	UBYTE	keytype;
	UBYTE	memsw;

	ClearDisplayHigh();
	ClearDisplayLow();

	/*-----------*/
	/** âÊñ ï\é¶ */
	/*-----------*/
	/* è„íiï\é¶ */
	DisplayStringHigh(0, &D2W_KeidenDialTone[3]);		/* "π≤√ﬁ› ¿ﬁ≤‘Ÿ ƒ∞›  " */
	DisplayStringHigh(15, ":");
	
	if (!(SYS_MemorySwitch[MEMORY_SW_A1] & DIALTONE_OR_TIMEUP_EXT)) {
		DisplayStringHigh(16, D2W_On);  
		memsw = TRUE;					 
	}
	else {
		DisplayStringHigh(16, D2W_Off);   
		memsw = FALSE;					 
	}

	/* â∫íiì_ñ≈ï\é¶ */
	FlashDisplayStringLow(D2W_ProgramEnter);	/* "            ∑…≥/æØƒ " */

	while(1) {

		/** ÉLÅ[éÊÇËçûÇ› */
		OPR_GetKey(KEY_WAIT_ONE_MINUTE);
		keycode = GetInputKeyCode();
		keytype = GetInputKeyType();

		/** éÊÇËçûÇÒÇæÉLÅ[Ç…ëŒÇ∑ÇÈèàóùÇé¿çs */
		switch (keytype) {
		case FUNCTION:		/* ã@î\ÉLÅ[Å^âEñÓàÛÉLÅ[*/
		case LEFT_ARROW:	/* ç∂ñÓàÛÉLÅ[ */
			if (memsw) {
				DisplayStringHigh(16, D2W_Off);
				memsw = FALSE;
			}
			else {
				DisplayStringHigh(16, D2W_On);
				memsw = TRUE;
			}
			break;
		case ENTER:
			if (memsw) {
				SYS_MemorySwitch[MEMORY_SW_A1] &= ~DIALTONE_OR_TIMEUP_EXT;
			}
			else {
				SYS_MemorySwitch[MEMORY_SW_A1] |= DIALTONE_OR_TIMEUP_EXT;
			}

			/* äÆóπï\é¶ */
			CMN_MemorySetNULL(FunctionDisplayBufferHigh, OPR_DISPLAY_MAX, ' ');
			CMN_StringCopy(FunctionDisplayBufferHigh, &D2W_KeidenDialTone[3]);
			ChildDisplaySetCompleted(FunctionDisplayBufferHigh);

			return (OK);
		case STOP:
		case KEY_TIME_UP:
			return (NG);

		case NO_EFFECT:
			break;

		default:
			NackBuzzer();
			break;
		}
	}
	
	return (NG);
}
#endif		/* End of (defined (KEISATSU)) */
