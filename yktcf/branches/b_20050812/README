一卡通系统通用前置说明
Copyright (C) 2005 kingstargroup 上海复旦金仕达计算机有限公司

1.说明
	一卡通通用前置为第三方接入提供数据传输与导入接口

2.目录结构
	通用前置系统分为两个模块:子系统服务端程序 , 通用前置机,插件例程
	子系统服务端程序: yktsubsystem
		起始目录
		  |--源程序
		  |--test
		     |--- testclient.py 	模拟测试程序
		  |--install
		     |--- yktsubsys.nsi		安装程序脚本(使用 Nullsoft NSIS)

	插件例程
		起始目录
		  |--源程序
	
	通用头文件
		include/def.h			定义了接收数据数据包的结构
		  
	通用前置
		起始目录
		  |-- README		本文件
		  |-- Makefile		编译脚本
		  |-- kccconfig.ini 系统参数配置文件
		  |-- bin/			可执行二进制程序
		  |-- contrib/		第三方代码包
		  |-- include/		所有头文件
		  |-- lib/
			  |-- linux     Linux平台下的 DRTP 库
			  |-- solaris	Solaris平台下的 DRTP 库
			  |-- win32		不用
		  |-- log/			日志文件存放的位置
		  |-- modules/		插件模块二进制程序
			  |-- mo_blk.so	挂失解挂名单模块
		  |-- pid/			运行的模块与子系统文件锁
		  |-- sbin/			工具脚本
			  |-- dps		查看当前所有通用前置进程
			  |-- kall		杀死所有通用前置进程
		  |-- src/
			  |-- main.c	主程序
			  |-- kcc_util.c 自定义功能函数
			  |-- kcc_conf.c 系统全局变量与配置参数变量
			  |-- parseconf.c 配置参数分析函数
			  |-- drtpcall.c  DRTP 功能函数的二次封装
			  |-- kcc_module.c 模块定义
			  |-- md5.c		  MD5 算法
			  |-- servers.c	  主体功能流程代码
			  |-- modules/	  功能模块代码
				  |-- blkmodule/
					  |-- Makefile 编译脚本
					  |-- module.c .h 挂失解挂功能模块
					  

3.系统构架
3.1 子系统构架
	子系统服务端程序  =====> 第三方插件
	流程:
	子系统服务端程序作为服务器等待连接请求
	接收通用前置发送过来的数据,解码并分析数据
	调用第三方插件模块处理数据
	由第三方插件决定如何处理数据,数据文件的格式为 XML 文档
	子系统服务端程序将处理后的结果返回给通用前置

3.2 通用前置系统构架
	通用前置 ====> 功能模块插件
	流程:
	通用前置轮询需要发送数据的子系统
	调用功能模块接口生成 CPACK 请求包
	请求数据库数据,并调用功能模块插件接口生成需要发送的数据包
	通用前置生成发送给子系统的数据的格式,并发送给子系统
	子系统处理完成后返回处理结果给通用前置
	通用前置调用功能模块接口生成 CPACK 包
	发送请求到后台处理

4.再次开发说明
4.1 第三方插件开发
4.2 通用前置功能模块开发
